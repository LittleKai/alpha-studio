import{u as te,r as x,j as h}from"./index-BLqa_u3e.js";import{l as fi,u as pi}from"./cloudinaryService-C55MkZhW.js";var mi={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hi,gi;function vi(){return{geminiUrl:hi,vertexUrl:gi}}function yi(t,e,o,n){var s,l;if(!(t!=null&&t.baseUrl)){const a=vi();return e?(s=a.vertexUrl)!==null&&s!==void 0?s:o:(l=a.geminiUrl)!==null&&l!==void 0?l:n}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ae{}function _(t,e){const o=/\{([^}]+)\}/g;return t.replace(o,(n,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function r(t,e,o){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(o))t[u]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(o))for(let d=0;d<c.length;d++){const f=c[d];r(f,e.slice(l+1),o[d])}else for(const d of c)r(d,e.slice(l+1),o)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];r(c[0],e.slice(l+1),o);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const n=e[e.length-1],s=t[n];if(s!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===s)return;if(typeof s=="object"&&typeof o=="object"&&s!==null&&o!==null)Object.assign(s,o);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(t,o):t[n]=o}function i(t,e,o=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return o;const s=e[n];if(s.endsWith("[]")){const l=s.slice(0,-2);if(l in t){const a=t[l];return Array.isArray(a)?a.map(u=>i(u,e.slice(n+1),o)):o}else return o}else t=t[s]}return t}catch(n){if(n instanceof TypeError)return o;throw n}}function Ni(t,e){for(const[o,n]of Object.entries(e)){const s=o.split("."),l=n.split("."),a=new Set;let u=-1;for(let c=0;c<s.length;c++)if(s[c]==="*"){u=c;break}if(u!==-1&&l.length>u)for(let c=u;c<l.length;c++){const d=l[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&a.add(d)}nt(t,s,l,0,a)}}function nt(t,e,o,n,s){if(n>=e.length||typeof t!="object"||t===null)return;const l=e[n];if(l.endsWith("[]")){const a=l.slice(0,-2),u=t;if(a in u&&Array.isArray(u[a]))for(const c of u[a])nt(c,e,o,n+1,s)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,u=Object.keys(a).filter(d=>!d.startsWith("_")&&!s.has(d)),c={};for(const d of u)c[d]=a[d];for(const[d,f]of Object.entries(c)){const m=[];for(const p of o.slice(n))p==="*"?m.push(d):m.push(p);r(a,m,f)}for(const d of u)delete a[d]}}else{const a=t;l in a&&nt(a[l],e,o,n+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vt(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ei(t){const e={},o=i(t,["operationName"]);o!=null&&r(e,["operationName"],o);const n=i(t,["resourceName"]);return n!=null&&r(e,["_url","resourceName"],n),e}function Ti(t){const e={},o=i(t,["name"]);o!=null&&r(e,["name"],o);const n=i(t,["metadata"]);n!=null&&r(e,["metadata"],n);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response","generateVideoResponse"]);return a!=null&&r(e,["response"],Ci(a)),e}function Si(t){const e={},o=i(t,["name"]);o!=null&&r(e,["name"],o);const n=i(t,["metadata"]);n!=null&&r(e,["metadata"],n);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],xi(a)),e}function Ci(t){const e={},o=i(t,["generatedSamples"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>_i(a))),r(e,["generatedVideos"],l)}const n=i(t,["raiMediaFilteredCount"]);n!=null&&r(e,["raiMediaFilteredCount"],n);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function xi(t){const e={},o=i(t,["videos"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Di(a))),r(e,["generatedVideos"],l)}const n=i(t,["raiMediaFilteredCount"]);n!=null&&r(e,["raiMediaFilteredCount"],n);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function _i(t){const e={},o=i(t,["video"]);return o!=null&&r(e,["video"],Pi(o)),e}function Di(t){const e={},o=i(t,["_self"]);return o!=null&&r(e,["video"],Mi(o)),e}function Ii(t){const e={},o=i(t,["operationName"]);return o!=null&&r(e,["_url","operationName"],o),e}function wi(t){const e={},o=i(t,["operationName"]);return o!=null&&r(e,["_url","operationName"],o),e}function Ai(t){const e={},o=i(t,["name"]);o!=null&&r(e,["name"],o);const n=i(t,["metadata"]);n!=null&&r(e,["metadata"],n);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],bi(a)),e}function bi(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["parent"]);n!=null&&r(e,["parent"],n);const s=i(t,["documentName"]);return s!=null&&r(e,["documentName"],s),e}function pn(t){const e={},o=i(t,["name"]);o!=null&&r(e,["name"],o);const n=i(t,["metadata"]);n!=null&&r(e,["metadata"],n);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],Ri(a)),e}function Ri(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["parent"]);n!=null&&r(e,["parent"],n);const s=i(t,["documentName"]);return s!=null&&r(e,["documentName"],s),e}function Pi(t){const e={},o=i(t,["uri"]);o!=null&&r(e,["uri"],o);const n=i(t,["encodedVideo"]);n!=null&&r(e,["videoBytes"],vt(n));const s=i(t,["encoding"]);return s!=null&&r(e,["mimeType"],s),e}function Mi(t){const e={},o=i(t,["gcsUri"]);o!=null&&r(e,["uri"],o);const n=i(t,["bytesBase64Encoded"]);n!=null&&r(e,["videoBytes"],vt(n));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Rt;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Rt||(Rt={}));var Pt;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Pt||(Pt={}));var Mt;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Mt||(Mt={}));var de;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(de||(de={}));var kt;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kt||(kt={}));var Ut;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Ut||(Ut={}));var Vt;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Vt||(Vt={}));var Lt;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Lt||(Lt={}));var Ft;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ft||(Ft={}));var Gt;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Gt||(Gt={}));var Jt;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Jt||(Jt={}));var Ht;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Ht||(Ht={}));var Bt;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Bt||(Bt={}));var qt;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(qt||(qt={}));var $t;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})($t||($t={}));var Kt;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Kt||(Kt={}));var zt;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(zt||(zt={}));var Wt;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Wt||(Wt={}));var Yt;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Yt||(Yt={}));var Ot;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Ot||(Ot={}));var Xt;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Xt||(Xt={}));var Me;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Me||(Me={}));var Qt;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Qt||(Qt={}));var Zt;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Zt||(Zt={}));var jt;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(jt||(jt={}));var it;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(it||(it={}));var eo;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(eo||(eo={}));var to;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(to||(to={}));var oo;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(oo||(oo={}));var no;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(no||(no={}));var io;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(io||(io={}));var so;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(so||(so={}));var ro;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ro||(ro={}));var lo;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(lo||(lo={}));var ao;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ao||(ao={}));var uo;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(uo||(uo={}));var co;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(co||(co={}));var fo;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(fo||(fo={}));var po;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(po||(po={}));var mo;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(mo||(mo={}));var ho;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ho||(ho={}));var go;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(go||(go={}));var vo;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(vo||(vo={}));var yo;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(yo||(yo={}));var No;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(No||(No={}));var Eo;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Eo||(Eo={}));var To;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(To||(To={}));var So;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(So||(So={}));var Co;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Co||(Co={}));var xo;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(xo||(xo={}));var _o;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(_o||(_o={}));var Do;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Do||(Do={}));var Io;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Io||(Io={}));var wo;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(wo||(wo={}));var Ao;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Ao||(Ao={}));var Te;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Te||(Te={}));class st{constructor(e){const o={};for(const n of e.headers.entries())o[n[0]]=n[1];this.headers=o,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ae{get text(){var e,o,n,s,l,a,u,c;if(((s=(n=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const m=[];for(const p of(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[g,v]of Object.entries(p))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(v!==null||v!==void 0)&&m.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,d+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,o,n,s,l,a,u,c;if(((s=(n=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const m of(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[p,g]of Object.entries(m))p!=="inlineData"&&(g!==null||g!==void 0)&&f.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,o,n,s,l,a,u,c;if(((s=(n=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,o,n,s,l,a,u,c,d;if(((s=(n=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,o,n,s,l,a,u,c,d;if(((s=(n=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class bo{}class Ro{}class ki{}class Ui{}class Vi{}class Li{}class Po{}class Mo{}class ko{}class Fi{}class He{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const n=new He;let s;const l=e;return o?s=Si(l):s=Ti(l),Object.assign(n,s),n}}class Uo{}class Vo{}class Lo{}class Fo{}class Gi{}class Ji{}class Hi{}class yt{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const n=new yt,l=Ai(e);return Object.assign(n,l),n}}class Bi{}class qi{}class $i{}class Go{}class Ki{get text(){var e,o,n;let s="",l=!1;const a=[];for(const u of(n=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&n!==void 0?n:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&a.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,s+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,o,n;let s="";const l=[];for(const a of(n=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&n!==void 0?n:[]){for(const[u,c]of Object.entries(a))u!=="inlineData"&&c!==null&&l.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class zi{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Nt{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const n=new Nt,l=pn(e);return Object.assign(n,l),n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const o=e.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function mn(t,e){const o=F(t,e);return o?o.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${o}`:o.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${o}`:o:""}function hn(t){return Array.isArray(t)?t.map(e=>Be(e)):[Be(t)]}function Be(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function gn(t){const e=Be(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function vn(t){const e=Be(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Jo(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function yn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Jo(e)):[Jo(t)]}function rt(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Ho(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Bo(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function X(t){if(t==null)throw new Error("ContentUnion is required");return rt(t)?t:{role:"user",parts:yn(t)}}function Et(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(o=>{const n=X(o);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){const o=X(e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(e)?e.map(o=>X(o)):[X(e)]}function j(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Ho(t)||Bo(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[X(t)]}const e=[],o=[],n=rt(t[0]);for(const s of t){const l=rt(s);if(l!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(Ho(s)||Bo(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(s)}}return n||e.push({role:"user",parts:yn(o)}),e}function Wi(t,e){t.includes("null")&&(e.nullable=!0);const o=t.filter(n=>n!=="null");if(o.length===1)e.type=Object.values(de).includes(o[0].toUpperCase())?o[0].toUpperCase():de.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of o)e.anyOf.push({type:Object.values(de).includes(n.toUpperCase())?n.toUpperCase():de.TYPE_UNSPECIFIED})}}function Ce(t){const e={},o=["items"],n=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&Wi(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(de).includes(u.toUpperCase())?u.toUpperCase():de.TYPE_UNSPECIFIED}else if(o.includes(a))e[a]=Ce(u);else if(n.includes(a)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(Ce(d))}e[a]=c}else if(s.includes(a)){const c={};for(const[d,f]of Object.entries(u))c[d]=Ce(f);e[a]=c}else{if(a==="additionalProperties")continue;e[a]=u}return e}function Tt(t){return Ce(t)}function St(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Ct(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function _e(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ce(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ce(e.response));return t}function De(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const o of t)e.push(o);return e}function Yi(t,e,o,n=1){const s=!e.startsWith(`${o}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${o}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${o}/${e}`:e:s?`${o}/${e}`:e}function ue(t,e){if(typeof e!="string")throw new Error("name must be a string");return Yi(t,e,"cachedContents")}function Nn(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ce(t){return vt(t)}function Oi(t){return t!=null&&typeof t=="object"&&"name"in t}function Xi(t){return t!=null&&typeof t=="object"&&"video"in t}function Qi(t){return t!=null&&typeof t=="object"&&"uri"in t}function En(t){var e;let o;if(Oi(t)&&(o=t.name),!(Qi(t)&&(o=t.uri,o===void 0))&&!(Xi(t)&&(o=(e=t.video)===null||e===void 0?void 0:e.uri,o===void 0))){if(typeof t=="string"&&(o=t),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const s=o.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${o}`);o=s[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function Tn(t,e){let o;return t.isVertexAI()?o=e?"publishers/google/models":"models":o=e?"models":"tunedModels",o}function Sn(t){for(const e of["models","tunedModels","publisherModels"])if(Zi(t,e))return t[e];return[]}function Zi(t,e){return t!==null&&typeof t=="object"&&e in t}function ji(t,e={}){const o=t,n={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(n.responseJsonSchema=o.outputSchema),e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function es(t,e={}){const o=[],n=new Set;for(const s of t){const l=s.name;if(n.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);n.add(l);const a=ji(s,e);a.functionDeclarations&&o.push(...a.functionDeclarations)}return{functionDeclarations:o}}function Cn(t,e){let o;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))o={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))o={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))o={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:e}}else o=e;const n=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,s=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function ts(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function xn(t){if(typeof t!="object"||t===null)return{};const e=t,o=e.inlinedResponses;if(typeof o!="object"||o===null)return t;const s=o.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let l=!1;for(const a of s){if(typeof a!="object"||a===null)continue;const c=a.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ie(t,e){const o=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function _n(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function os(t){const e={},o=i(t,["responsesFile"]);o!=null&&r(e,["fileName"],o);const n=i(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Vs(a))),r(e,["inlinedResponses"],l)}const s=i(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["inlinedEmbedContentResponses"],l)}return e}function ns(t){const e={},o=i(t,["predictionsFormat"]);o!=null&&r(e,["format"],o);const n=i(t,["gcsDestination","outputUriPrefix"]);n!=null&&r(e,["gcsUri"],n);const s=i(t,["bigqueryDestination","outputUri"]);return s!=null&&r(e,["bigqueryUri"],s),e}function is(t){const e={},o=i(t,["format"]);o!=null&&r(e,["predictionsFormat"],o);const n=i(t,["gcsUri"]);n!=null&&r(e,["gcsDestination","outputUriPrefix"],n);const s=i(t,["bigqueryUri"]);if(s!=null&&r(e,["bigqueryDestination","outputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(i(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ge(t){const e={},o=i(t,["name"]);o!=null&&r(e,["name"],o);const n=i(t,["metadata","displayName"]);n!=null&&r(e,["displayName"],n);const s=i(t,["metadata","state"]);s!=null&&r(e,["state"],_n(s));const l=i(t,["metadata","createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["metadata","endTime"]);a!=null&&r(e,["endTime"],a);const u=i(t,["metadata","updateTime"]);u!=null&&r(e,["updateTime"],u);const c=i(t,["metadata","model"]);c!=null&&r(e,["model"],c);const d=i(t,["metadata","output"]);return d!=null&&r(e,["dest"],os(xn(d))),e}function lt(t){const e={},o=i(t,["name"]);o!=null&&r(e,["name"],o);const n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const s=i(t,["state"]);s!=null&&r(e,["state"],_n(s));const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["createTime"]);a!=null&&r(e,["createTime"],a);const u=i(t,["startTime"]);u!=null&&r(e,["startTime"],u);const c=i(t,["endTime"]);c!=null&&r(e,["endTime"],c);const d=i(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const f=i(t,["model"]);f!=null&&r(e,["model"],f);const m=i(t,["inputConfig"]);m!=null&&r(e,["src"],ss(m));const p=i(t,["outputConfig"]);p!=null&&r(e,["dest"],ns(xn(p)));const g=i(t,["completionStats"]);return g!=null&&r(e,["completionStats"],g),e}function ss(t){const e={},o=i(t,["instancesFormat"]);o!=null&&r(e,["format"],o);const n=i(t,["gcsSource","uris"]);n!=null&&r(e,["gcsUri"],n);const s=i(t,["bigquerySource","inputUri"]);return s!=null&&r(e,["bigqueryUri"],s),e}function rs(t,e){const o={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=i(e,["fileName"]);n!=null&&r(o,["fileName"],n);const s=i(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Us(t,a))),r(o,["requests","requests"],l)}return o}function ls(t){const e={},o=i(t,["format"]);o!=null&&r(e,["instancesFormat"],o);const n=i(t,["gcsUri"]);n!=null&&r(e,["gcsSource","uris"],n);const s=i(t,["bigqueryUri"]);if(s!=null&&r(e,["bigquerySource","inputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function as(t){const e={},o=i(t,["data"]);if(o!=null&&r(e,["data"],o),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["mimeType"]);return n!=null&&r(e,["mimeType"],n),e}function us(t,e){const o={},n=i(e,["name"]);return n!=null&&r(o,["_url","name"],Ie(t,n)),o}function ds(t,e){const o={},n=i(e,["name"]);return n!=null&&r(o,["_url","name"],Ie(t,n)),o}function cs(t){const e={},o=i(t,["content"]);o!=null&&r(e,["content"],o);const n=i(t,["citationMetadata"]);n!=null&&r(e,["citationMetadata"],fs(n));const s=i(t,["tokenCount"]);s!=null&&r(e,["tokenCount"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["avgLogprobs"]);a!=null&&r(e,["avgLogprobs"],a);const u=i(t,["groundingMetadata"]);u!=null&&r(e,["groundingMetadata"],u);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const d=i(t,["logprobsResult"]);d!=null&&r(e,["logprobsResult"],d);const f=i(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),r(e,["safetyRatings"],p)}const m=i(t,["urlContextMetadata"]);return m!=null&&r(e,["urlContextMetadata"],m),e}function fs(t){const e={},o=i(t,["citationSources"]);if(o!=null){let n=o;Array.isArray(n)&&(n=n.map(s=>s)),r(e,["citations"],n)}return e}function Dn(t){const e={},o=i(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>qs(l))),r(e,["parts"],s)}const n=i(t,["role"]);return n!=null&&r(e,["role"],n),e}function ps(t,e){const o={},n=i(t,["displayName"]);if(e!==void 0&&n!=null&&r(e,["batch","displayName"],n),i(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function ms(t,e){const o={},n=i(t,["displayName"]);e!==void 0&&n!=null&&r(e,["displayName"],n);const s=i(t,["dest"]);return e!==void 0&&s!=null&&r(e,["outputConfig"],is(ts(s))),o}function qo(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["src"]);s!=null&&r(o,["batch","inputConfig"],rs(t,Cn(t,s)));const l=i(e,["config"]);return l!=null&&ps(l,o),o}function hs(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["model"],F(t,n));const s=i(e,["src"]);s!=null&&r(o,["inputConfig"],ls(Cn(t,s)));const l=i(e,["config"]);return l!=null&&ms(l,o),o}function gs(t,e){const o={},n=i(t,["displayName"]);return e!==void 0&&n!=null&&r(e,["batch","displayName"],n),o}function vs(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["src"]);s!=null&&r(o,["batch","inputConfig"],xs(t,s));const l=i(e,["config"]);return l!=null&&gs(l,o),o}function ys(t,e){const o={},n=i(e,["name"]);return n!=null&&r(o,["_url","name"],Ie(t,n)),o}function Ns(t,e){const o={},n=i(e,["name"]);return n!=null&&r(o,["_url","name"],Ie(t,n)),o}function Es(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["name"]);n!=null&&r(e,["name"],n);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);return l!=null&&r(e,["error"],l),e}function Ts(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["name"]);n!=null&&r(e,["name"],n);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);return l!=null&&r(e,["error"],l),e}function Ss(t,e){const o={},n=i(e,["contents"]);if(n!=null){let l=Et(t,n);Array.isArray(l)&&(l=l.map(a=>a)),r(o,["requests[]","request","content"],l)}const s=i(e,["config"]);return s!=null&&(r(o,["_self"],Cs(s,o)),Ni(o,{"requests[].*":"requests[].request.*"})),o}function Cs(t,e){const o={},n=i(t,["taskType"]);e!==void 0&&n!=null&&r(e,["requests[]","taskType"],n);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["requests[]","title"],s);const l=i(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&r(e,["requests[]","outputDimensionality"],l),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function xs(t,e){const o={},n=i(e,["fileName"]);n!=null&&r(o,["file_name"],n);const s=i(e,["inlinedRequests"]);return s!=null&&r(o,["requests"],Ss(t,s)),o}function _s(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const n=i(t,["mimeType"]);return n!=null&&r(e,["mimeType"],n),e}function Ds(t){const e={},o=i(t,["id"]);o!=null&&r(e,["id"],o);const n=i(t,["args"]);n!=null&&r(e,["args"],n);const s=i(t,["name"]);if(s!=null&&r(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Is(t){const e={},o=i(t,["allowedFunctionNames"]);o!=null&&r(e,["allowedFunctionNames"],o);const n=i(t,["mode"]);if(n!=null&&r(e,["mode"],n),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ws(t,e,o){const n={},s=i(e,["systemInstruction"]);o!==void 0&&s!=null&&r(o,["systemInstruction"],Dn(X(s)));const l=i(e,["temperature"]);l!=null&&r(n,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(n,["topP"],a);const u=i(e,["topK"]);u!=null&&r(n,["topK"],u);const c=i(e,["candidateCount"]);c!=null&&r(n,["candidateCount"],c);const d=i(e,["maxOutputTokens"]);d!=null&&r(n,["maxOutputTokens"],d);const f=i(e,["stopSequences"]);f!=null&&r(n,["stopSequences"],f);const m=i(e,["responseLogprobs"]);m!=null&&r(n,["responseLogprobs"],m);const p=i(e,["logprobs"]);p!=null&&r(n,["logprobs"],p);const g=i(e,["presencePenalty"]);g!=null&&r(n,["presencePenalty"],g);const v=i(e,["frequencyPenalty"]);v!=null&&r(n,["frequencyPenalty"],v);const N=i(e,["seed"]);N!=null&&r(n,["seed"],N);const y=i(e,["responseMimeType"]);y!=null&&r(n,["responseMimeType"],y);const E=i(e,["responseSchema"]);E!=null&&r(n,["responseSchema"],Tt(E));const T=i(e,["responseJsonSchema"]);if(T!=null&&r(n,["responseJsonSchema"],T),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=i(e,["safetySettings"]);if(o!==void 0&&S!=null){let L=S;Array.isArray(L)&&(L=L.map($=>$s($))),r(o,["safetySettings"],L)}const C=i(e,["tools"]);if(o!==void 0&&C!=null){let L=De(C);Array.isArray(L)&&(L=L.map($=>zs(_e($)))),r(o,["tools"],L)}const I=i(e,["toolConfig"]);if(o!==void 0&&I!=null&&r(o,["toolConfig"],Ks(I)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=i(e,["cachedContent"]);o!==void 0&&P!=null&&r(o,["cachedContent"],ue(t,P));const R=i(e,["responseModalities"]);R!=null&&r(n,["responseModalities"],R);const J=i(e,["mediaResolution"]);J!=null&&r(n,["mediaResolution"],J);const A=i(e,["speechConfig"]);if(A!=null&&r(n,["speechConfig"],St(A)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=i(e,["thinkingConfig"]);k!=null&&r(n,["thinkingConfig"],k);const H=i(e,["imageConfig"]);H!=null&&r(n,["imageConfig"],ks(H));const z=i(e,["enableEnhancedCivicAnswers"]);return z!=null&&r(n,["enableEnhancedCivicAnswers"],z),n}function As(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>cs(d))),r(e,["candidates"],c)}const s=i(t,["modelVersion"]);s!=null&&r(e,["modelVersion"],s);const l=i(t,["promptFeedback"]);l!=null&&r(e,["promptFeedback"],l);const a=i(t,["responseId"]);a!=null&&r(e,["responseId"],a);const u=i(t,["usageMetadata"]);return u!=null&&r(e,["usageMetadata"],u),e}function bs(t,e){const o={},n=i(e,["name"]);return n!=null&&r(o,["_url","name"],Ie(t,n)),o}function Rs(t,e){const o={},n=i(e,["name"]);return n!=null&&r(o,["_url","name"],Ie(t,n)),o}function Ps(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=i(t,["enableWidget"]);return o!=null&&r(e,["enableWidget"],o),e}function Ms(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=i(t,["timeRangeFilter"]);return o!=null&&r(e,["timeRangeFilter"],o),e}function ks(t){const e={},o=i(t,["aspectRatio"]);o!=null&&r(e,["aspectRatio"],o);const n=i(t,["imageSize"]);if(n!=null&&r(e,["imageSize"],n),i(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(i(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(i(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Us(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["request","model"],F(t,n));const s=i(e,["contents"]);if(s!=null){let u=j(s);Array.isArray(u)&&(u=u.map(c=>Dn(c))),r(o,["request","contents"],u)}const l=i(e,["metadata"]);l!=null&&r(o,["metadata"],l);const a=i(e,["config"]);return a!=null&&r(o,["request","generationConfig"],ws(t,a,i(o,["request"],{}))),o}function Vs(t){const e={},o=i(t,["response"]);o!=null&&r(e,["response"],As(o));const n=i(t,["error"]);return n!=null&&r(e,["error"],n),e}function Ls(t,e){const o={},n=i(t,["pageSize"]);e!==void 0&&n!=null&&r(e,["_query","pageSize"],n);const s=i(t,["pageToken"]);if(e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),i(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function Fs(t,e){const o={},n=i(t,["pageSize"]);e!==void 0&&n!=null&&r(e,["_query","pageSize"],n);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const l=i(t,["filter"]);return e!==void 0&&l!=null&&r(e,["_query","filter"],l),o}function Gs(t){const e={},o=i(t,["config"]);return o!=null&&Ls(o,e),e}function Js(t){const e={},o=i(t,["config"]);return o!=null&&Fs(o,e),e}function Hs(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const s=i(t,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Ge(a))),r(e,["batchJobs"],l)}return e}function Bs(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const s=i(t,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>lt(a))),r(e,["batchJobs"],l)}return e}function qs(t){const e={},o=i(t,["mediaResolution"]);o!=null&&r(e,["mediaResolution"],o);const n=i(t,["codeExecutionResult"]);n!=null&&r(e,["codeExecutionResult"],n);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],_s(l));const a=i(t,["functionCall"]);a!=null&&r(e,["functionCall"],Ds(a));const u=i(t,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],as(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const f=i(t,["thought"]);f!=null&&r(e,["thought"],f);const m=i(t,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const p=i(t,["videoMetadata"]);return p!=null&&r(e,["videoMetadata"],p),e}function $s(t){const e={},o=i(t,["category"]);if(o!=null&&r(e,["category"],o),i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=i(t,["threshold"]);return n!=null&&r(e,["threshold"],n),e}function Ks(t){const e={},o=i(t,["retrievalConfig"]);o!=null&&r(e,["retrievalConfig"],o);const n=i(t,["functionCallingConfig"]);return n!=null&&r(e,["functionCallingConfig"],Is(n)),e}function zs(t){const e={};if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["computerUse"]);o!=null&&r(e,["computerUse"],o);const n=i(t,["fileSearch"]);n!=null&&r(e,["fileSearch"],n);const s=i(t,["codeExecution"]);if(s!=null&&r(e,["codeExecution"],s),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=i(t,["functionDeclarations"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>m)),r(e,["functionDeclarations"],f)}const a=i(t,["googleMaps"]);a!=null&&r(e,["googleMaps"],Ps(a));const u=i(t,["googleSearch"]);u!=null&&r(e,["googleSearch"],Ms(u));const c=i(t,["googleSearchRetrieval"]);c!=null&&r(e,["googleSearchRetrieval"],c);const d=i(t,["urlContext"]);return d!=null&&r(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var le;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(le||(le={}));class ge{constructor(e,o,n,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(e,n,s)}init(e,o,n){var s,l;this.nameInternal=e,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o==null?void 0:o.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!n||Object.keys(n).length===0?a={config:{}}:typeof n=="object"?a=Object.assign({},n):a=n,a.config&&(a.config.pageToken=o.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ws extends ae{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new ge(le.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(e){const o=qo(this.apiClient,e),n=o._url,s=_("{model}:batchGenerateContent",n),u=o.batch.inputConfig.requests,c=u.requests,d=[];for(const f of c){const m=Object.assign({},f);if(m.systemInstruction){const p=m.systemInstruction;delete m.systemInstruction;const g=m.request;g.systemInstruction=p,m.request=g}d.push(m)}return u.requests=d,delete o.config,delete o._url,delete o._query,{path:s,body:o}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,o){const n=o?Object.assign({},o):{},s=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${s}`),n.dest===void 0){const l=this.getGcsUri(e),a=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?n.dest=`${l.slice(0,-6)}/dest`:n.dest=`${l}_dest_${s}`;else if(a)n.dest=`${a}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=hs(this.apiClient,e);return u=_("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>lt(f))}else{const d=qo(this.apiClient,e);return u=_("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Ge(f))}}async createEmbeddingsInternal(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vs(this.apiClient,e);return l=_("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>Ge(c))}}async get(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Rs(this.apiClient,e);return u=_("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>lt(f))}else{const d=bs(this.apiClient,e);return u=_("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Ge(f))}}async cancel(e){var o,n,s,l;let a="",u={};if(this.apiClient.isVertexAI()){const c=ds(this.apiClient,e);a=_("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const c=us(this.apiClient,e);a=_("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Js(e);return u=_("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Bs(f),p=new Go;return Object.assign(p,m),p})}else{const d=Gs(e);return u=_("batches",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Hs(f),p=new Go;return Object.assign(p,m),p})}}async delete(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Ns(this.apiClient,e);return u=_("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>Ts(f))}else{const d=ys(this.apiClient,e);return u=_("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>Es(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ys(t){const e={},o=i(t,["data"]);if(o!=null&&r(e,["data"],o),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["mimeType"]);return n!=null&&r(e,["mimeType"],n),e}function $o(t){const e={},o=i(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>vr(l))),r(e,["parts"],s)}const n=i(t,["role"]);return n!=null&&r(e,["role"],n),e}function Os(t,e){const o={},n=i(t,["ttl"]);e!==void 0&&n!=null&&r(e,["ttl"],n);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&r(e,["expireTime"],s);const l=i(t,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let f=j(a);Array.isArray(f)&&(f=f.map(m=>$o(m))),r(e,["contents"],f)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],$o(X(u)));const c=i(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>Nr(m))),r(e,["tools"],f)}const d=i(t,["toolConfig"]);if(e!==void 0&&d!=null&&r(e,["toolConfig"],yr(d)),i(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function Xs(t,e){const o={},n=i(t,["ttl"]);e!==void 0&&n!=null&&r(e,["ttl"],n);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&r(e,["expireTime"],s);const l=i(t,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let m=j(a);Array.isArray(m)&&(m=m.map(p=>p)),r(e,["contents"],m)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],X(u));const c=i(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(p=>Er(p))),r(e,["tools"],m)}const d=i(t,["toolConfig"]);e!==void 0&&d!=null&&r(e,["toolConfig"],d);const f=i(t,["kmsKeyName"]);return e!==void 0&&f!=null&&r(e,["encryption_spec","kmsKeyName"],f),o}function Qs(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["model"],mn(t,n));const s=i(e,["config"]);return s!=null&&Os(s,o),o}function Zs(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["model"],mn(t,n));const s=i(e,["config"]);return s!=null&&Xs(s,o),o}function js(t,e){const o={},n=i(e,["name"]);return n!=null&&r(o,["_url","name"],ue(t,n)),o}function er(t,e){const o={},n=i(e,["name"]);return n!=null&&r(o,["_url","name"],ue(t,n)),o}function tr(t){const e={},o=i(t,["sdkHttpResponse"]);return o!=null&&r(e,["sdkHttpResponse"],o),e}function or(t){const e={},o=i(t,["sdkHttpResponse"]);return o!=null&&r(e,["sdkHttpResponse"],o),e}function nr(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const n=i(t,["mimeType"]);return n!=null&&r(e,["mimeType"],n),e}function ir(t){const e={},o=i(t,["id"]);o!=null&&r(e,["id"],o);const n=i(t,["args"]);n!=null&&r(e,["args"],n);const s=i(t,["name"]);if(s!=null&&r(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sr(t){const e={},o=i(t,["allowedFunctionNames"]);o!=null&&r(e,["allowedFunctionNames"],o);const n=i(t,["mode"]);if(n!=null&&r(e,["mode"],n),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function rr(t){const e={},o=i(t,["description"]);o!=null&&r(e,["description"],o);const n=i(t,["name"]);n!=null&&r(e,["name"],n);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);if(u!=null&&r(e,["responseJsonSchema"],u),i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function lr(t,e){const o={},n=i(e,["name"]);return n!=null&&r(o,["_url","name"],ue(t,n)),o}function ar(t,e){const o={},n=i(e,["name"]);return n!=null&&r(o,["_url","name"],ue(t,n)),o}function ur(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=i(t,["enableWidget"]);return o!=null&&r(e,["enableWidget"],o),e}function dr(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=i(t,["timeRangeFilter"]);return o!=null&&r(e,["timeRangeFilter"],o),e}function cr(t,e){const o={},n=i(t,["pageSize"]);e!==void 0&&n!=null&&r(e,["_query","pageSize"],n);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),o}function fr(t,e){const o={},n=i(t,["pageSize"]);e!==void 0&&n!=null&&r(e,["_query","pageSize"],n);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),o}function pr(t){const e={},o=i(t,["config"]);return o!=null&&cr(o,e),e}function mr(t){const e={},o=i(t,["config"]);return o!=null&&fr(o,e),e}function hr(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const s=i(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["cachedContents"],l)}return e}function gr(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const s=i(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["cachedContents"],l)}return e}function vr(t){const e={},o=i(t,["mediaResolution"]);o!=null&&r(e,["mediaResolution"],o);const n=i(t,["codeExecutionResult"]);n!=null&&r(e,["codeExecutionResult"],n);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],nr(l));const a=i(t,["functionCall"]);a!=null&&r(e,["functionCall"],ir(a));const u=i(t,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],Ys(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const f=i(t,["thought"]);f!=null&&r(e,["thought"],f);const m=i(t,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const p=i(t,["videoMetadata"]);return p!=null&&r(e,["videoMetadata"],p),e}function yr(t){const e={},o=i(t,["retrievalConfig"]);o!=null&&r(e,["retrievalConfig"],o);const n=i(t,["functionCallingConfig"]);return n!=null&&r(e,["functionCallingConfig"],sr(n)),e}function Nr(t){const e={};if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["computerUse"]);o!=null&&r(e,["computerUse"],o);const n=i(t,["fileSearch"]);n!=null&&r(e,["fileSearch"],n);const s=i(t,["codeExecution"]);if(s!=null&&r(e,["codeExecution"],s),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=i(t,["functionDeclarations"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>m)),r(e,["functionDeclarations"],f)}const a=i(t,["googleMaps"]);a!=null&&r(e,["googleMaps"],ur(a));const u=i(t,["googleSearch"]);u!=null&&r(e,["googleSearch"],dr(u));const c=i(t,["googleSearchRetrieval"]);c!=null&&r(e,["googleSearchRetrieval"],c);const d=i(t,["urlContext"]);return d!=null&&r(e,["urlContext"],d),e}function Er(t){const e={},o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const n=i(t,["computerUse"]);if(n!=null&&r(e,["computerUse"],n),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=i(t,["codeExecution"]);s!=null&&r(e,["codeExecution"],s);const l=i(t,["enterpriseWebSearch"]);l!=null&&r(e,["enterpriseWebSearch"],l);const a=i(t,["functionDeclarations"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(p=>rr(p))),r(e,["functionDeclarations"],m)}const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],u);const c=i(t,["googleSearch"]);c!=null&&r(e,["googleSearch"],c);const d=i(t,["googleSearchRetrieval"]);d!=null&&r(e,["googleSearchRetrieval"],d);const f=i(t,["urlContext"]);return f!=null&&r(e,["urlContext"],f),e}function Tr(t,e){const o={},n=i(t,["ttl"]);e!==void 0&&n!=null&&r(e,["ttl"],n);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&r(e,["expireTime"],s),o}function Sr(t,e){const o={},n=i(t,["ttl"]);e!==void 0&&n!=null&&r(e,["ttl"],n);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&r(e,["expireTime"],s),o}function Cr(t,e){const o={},n=i(e,["name"]);n!=null&&r(o,["_url","name"],ue(t,n));const s=i(e,["config"]);return s!=null&&Tr(s,o),o}function xr(t,e){const o={},n=i(e,["name"]);n!=null&&r(o,["_url","name"],ue(t,n));const s=i(e,["config"]);return s!=null&&Sr(s,o),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _r extends ae{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new ge(le.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(o),o)}async create(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Zs(this.apiClient,e);return u=_("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=Qs(this.apiClient,e);return u=_("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async get(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=ar(this.apiClient,e);return u=_("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=lr(this.apiClient,e);return u=_("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async delete(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=er(this.apiClient,e);return u=_("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=or(f),p=new Lo;return Object.assign(p,m),p})}else{const d=js(this.apiClient,e);return u=_("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=tr(f),p=new Lo;return Object.assign(p,m),p})}}async update(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=xr(this.apiClient,e);return u=_("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=Cr(this.apiClient,e);return u=_("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async listInternal(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=mr(e);return u=_("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=gr(f),p=new Fo;return Object.assign(p,m),p})}else{const d=pr(e);return u=_("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=hr(f),p=new Fo;return Object.assign(p,m),p})}}}function qe(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(o[n[s]]=t[n[s]]);return o}function Ko(t){var e=typeof Symbol=="function"&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function M(t){return this instanceof M?(this.v=t,this):new M(t)}function oe(t,e,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=o.apply(t,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(g){return function(v){return Promise.resolve(v).then(g,m)}}function u(g,v){n[g]&&(s[g]=function(N){return new Promise(function(y,E){l.push([g,N,y,E])>1||c(g,N)})},v&&(s[g]=v(s[g])))}function c(g,v){try{d(n[g](v))}catch(N){p(l[0][3],N)}}function d(g){g.value instanceof M?Promise.resolve(g.value.v).then(f,m):p(l[0][2],g)}function f(g){c("next",g)}function m(g){c("throw",g)}function p(g,v){g(v),l.shift(),l.length&&c(l[0][0],l[0][1])}}function ne(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],o;return e?e.call(t):(t=typeof Ko=="function"?Ko(t):t[Symbol.iterator](),o={},n("next"),n("throw"),n("return"),o[Symbol.asyncIterator]=function(){return this},o);function n(l){o[l]=t[l]&&function(a){return new Promise(function(u,c){a=t[l](a),s(u,c,a.done,a.value)})}}function s(l,a,u,c){Promise.resolve(c).then(function(d){l({value:d,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dr(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const o=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return o===void 0?!1:In(o)}function In(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Ir(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function zo(t){if(t===void 0||t.length===0)return[];const e=[],o=t.length;let n=0;for(;n<o;)if(t[n].role==="user")e.push(t[n]),n++;else{const s=[];let l=!0;for(;n<o&&t[n].role==="model";)s.push(t[n]),l&&!In(t[n])&&(l=!1),n++;l?e.push(...s):e.pop()}return e}class wr{constructor(e,o){this.modelsModule=e,this.apiClient=o}create(e){return new Ar(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Ar{constructor(e,o,n,s={},l=[]){this.apiClient=e,this.modelsModule=o,this.model=n,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),Ir(l)}async sendMessage(e){var o;await this.sendPromise;const n=X(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(o=e.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var l,a,u;const c=await s,d=(a=(l=c.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,f=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let p=[];f!=null&&(p=(u=f.slice(m))!==null&&u!==void 0?u:[]);const g=d?[d]:[];this.recordHistory(n,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var o;await this.sendPromise;const n=X(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(o=e.config)!==null&&o!==void 0?o:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,n)}getHistory(e=!1){const o=e?zo(this.history):this.history;return structuredClone(o)}processStreamResponse(e,o){return oe(this,arguments,function*(){var s,l,a,u,c,d;const f=[];try{for(var m=!0,p=ne(e),g;g=yield M(p.next()),s=g.done,!s;m=!0){u=g.value,m=!1;const v=u;if(Dr(v)){const N=(d=(c=v.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;N!==void 0&&f.push(N)}yield yield M(v)}}catch(v){l={error:v}}finally{try{!m&&!s&&(a=p.return)&&(yield M(a.call(p)))}finally{if(l)throw l.error}}this.recordHistory(o,f)})}recordHistory(e,o,n){let s=[];o.length>0&&o.every(l=>l.role!==void 0)?s=o:s.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...zo(n)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ze extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ze.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function br(t){const e={},o=i(t,["file"]);return o!=null&&r(e,["file"],o),e}function Rr(t){const e={},o=i(t,["sdkHttpResponse"]);return o!=null&&r(e,["sdkHttpResponse"],o),e}function Pr(t){const e={},o=i(t,["name"]);return o!=null&&r(e,["_url","file"],En(o)),e}function Mr(t){const e={},o=i(t,["sdkHttpResponse"]);return o!=null&&r(e,["sdkHttpResponse"],o),e}function kr(t){const e={},o=i(t,["name"]);return o!=null&&r(e,["_url","file"],En(o)),e}function Ur(t,e){const o={},n=i(t,["pageSize"]);e!==void 0&&n!=null&&r(e,["_query","pageSize"],n);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),o}function Vr(t){const e={},o=i(t,["config"]);return o!=null&&Ur(o,e),e}function Lr(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const s=i(t,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fr extends ae{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new ge(le.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(o),o)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(o=>o)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Vr(e);return l=_("files",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Lr(c),f=new Bi;return Object.assign(f,d),f})}}async createInternal(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=br(e);return l=_("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>{const d=Rr(c),f=new qi;return Object.assign(f,d),f})}}async get(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kr(e);return l=_("files/{file}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Pr(e);return l=_("files/{file}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Mr(c),f=new $i;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Je(t){const e={},o=i(t,["data"]);if(o!=null&&r(e,["data"],o),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["mimeType"]);return n!=null&&r(e,["mimeType"],n),e}function Gr(t){const e={},o=i(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>tl(l))),r(e,["parts"],s)}const n=i(t,["role"]);return n!=null&&r(e,["role"],n),e}function Jr(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const n=i(t,["mimeType"]);return n!=null&&r(e,["mimeType"],n),e}function Hr(t){const e={},o=i(t,["id"]);o!=null&&r(e,["id"],o);const n=i(t,["args"]);n!=null&&r(e,["args"],n);const s=i(t,["name"]);if(s!=null&&r(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Br(t){const e={},o=i(t,["description"]);o!=null&&r(e,["description"],o);const n=i(t,["name"]);n!=null&&r(e,["name"],n);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);if(u!=null&&r(e,["responseJsonSchema"],u),i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function qr(t){const e={},o=i(t,["modelSelectionConfig"]);o!=null&&r(e,["modelConfig"],o);const n=i(t,["responseJsonSchema"]);n!=null&&r(e,["responseJsonSchema"],n);const s=i(t,["audioTimestamp"]);s!=null&&r(e,["audioTimestamp"],s);const l=i(t,["candidateCount"]);l!=null&&r(e,["candidateCount"],l);const a=i(t,["enableAffectiveDialog"]);a!=null&&r(e,["enableAffectiveDialog"],a);const u=i(t,["frequencyPenalty"]);u!=null&&r(e,["frequencyPenalty"],u);const c=i(t,["logprobs"]);c!=null&&r(e,["logprobs"],c);const d=i(t,["maxOutputTokens"]);d!=null&&r(e,["maxOutputTokens"],d);const f=i(t,["mediaResolution"]);f!=null&&r(e,["mediaResolution"],f);const m=i(t,["presencePenalty"]);m!=null&&r(e,["presencePenalty"],m);const p=i(t,["responseLogprobs"]);p!=null&&r(e,["responseLogprobs"],p);const g=i(t,["responseMimeType"]);g!=null&&r(e,["responseMimeType"],g);const v=i(t,["responseModalities"]);v!=null&&r(e,["responseModalities"],v);const N=i(t,["responseSchema"]);N!=null&&r(e,["responseSchema"],N);const y=i(t,["routingConfig"]);y!=null&&r(e,["routingConfig"],y);const E=i(t,["seed"]);E!=null&&r(e,["seed"],E);const T=i(t,["speechConfig"]);T!=null&&r(e,["speechConfig"],T);const S=i(t,["stopSequences"]);S!=null&&r(e,["stopSequences"],S);const C=i(t,["temperature"]);C!=null&&r(e,["temperature"],C);const I=i(t,["thinkingConfig"]);I!=null&&r(e,["thinkingConfig"],I);const P=i(t,["topK"]);P!=null&&r(e,["topK"],P);const R=i(t,["topP"]);if(R!=null&&r(e,["topP"],R),i(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $r(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=i(t,["enableWidget"]);return o!=null&&r(e,["enableWidget"],o),e}function Kr(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=i(t,["timeRangeFilter"]);return o!=null&&r(e,["timeRangeFilter"],o),e}function zr(t,e){const o={},n=i(t,["generationConfig"]);e!==void 0&&n!=null&&r(e,["setup","generationConfig"],n);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const c=i(t,["maxOutputTokens"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","maxOutputTokens"],c);const d=i(t,["mediaResolution"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","mediaResolution"],d);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const m=i(t,["speechConfig"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","speechConfig"],Ct(m));const p=i(t,["thinkingConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","thinkingConfig"],p);const g=i(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=i(t,["systemInstruction"]);e!==void 0&&v!=null&&r(e,["setup","systemInstruction"],Gr(X(v)));const N=i(t,["tools"]);if(e!==void 0&&N!=null){let P=De(N);Array.isArray(P)&&(P=P.map(R=>nl(_e(R)))),r(e,["setup","tools"],P)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],ol(y));const E=i(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&r(e,["setup","inputAudioTranscription"],E);const T=i(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&r(e,["setup","outputAudioTranscription"],T);const S=i(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&r(e,["setup","realtimeInputConfig"],S);const C=i(t,["contextWindowCompression"]);e!==void 0&&C!=null&&r(e,["setup","contextWindowCompression"],C);const I=i(t,["proactivity"]);if(e!==void 0&&I!=null&&r(e,["setup","proactivity"],I),i(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function Wr(t,e){const o={},n=i(t,["generationConfig"]);e!==void 0&&n!=null&&r(e,["setup","generationConfig"],qr(n));const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const c=i(t,["maxOutputTokens"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","maxOutputTokens"],c);const d=i(t,["mediaResolution"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","mediaResolution"],d);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const m=i(t,["speechConfig"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","speechConfig"],Ct(m));const p=i(t,["thinkingConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","thinkingConfig"],p);const g=i(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=i(t,["systemInstruction"]);e!==void 0&&v!=null&&r(e,["setup","systemInstruction"],X(v));const N=i(t,["tools"]);if(e!==void 0&&N!=null){let R=De(N);Array.isArray(R)&&(R=R.map(J=>il(_e(J)))),r(e,["setup","tools"],R)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],y);const E=i(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&r(e,["setup","inputAudioTranscription"],E);const T=i(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&r(e,["setup","outputAudioTranscription"],T);const S=i(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&r(e,["setup","realtimeInputConfig"],S);const C=i(t,["contextWindowCompression"]);e!==void 0&&C!=null&&r(e,["setup","contextWindowCompression"],C);const I=i(t,["proactivity"]);e!==void 0&&I!=null&&r(e,["setup","proactivity"],I);const P=i(t,["explicitVadSignal"]);return e!==void 0&&P!=null&&r(e,["setup","explicitVadSignal"],P),o}function Yr(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["setup","model"],F(t,n));const s=i(e,["config"]);return s!=null&&r(o,["config"],zr(s,o)),o}function Or(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["setup","model"],F(t,n));const s=i(e,["config"]);return s!=null&&r(o,["config"],Wr(s,o)),o}function Xr(t){const e={},o=i(t,["musicGenerationConfig"]);return o!=null&&r(e,["musicGenerationConfig"],o),e}function Qr(t){const e={},o=i(t,["weightedPrompts"]);if(o!=null){let n=o;Array.isArray(n)&&(n=n.map(s=>s)),r(e,["weightedPrompts"],n)}return e}function Zr(t){const e={},o=i(t,["media"]);if(o!=null){let d=hn(o);Array.isArray(d)&&(d=d.map(f=>Je(f))),r(e,["mediaChunks"],d)}const n=i(t,["audio"]);n!=null&&r(e,["audio"],Je(vn(n)));const s=i(t,["audioStreamEnd"]);s!=null&&r(e,["audioStreamEnd"],s);const l=i(t,["video"]);l!=null&&r(e,["video"],Je(gn(l)));const a=i(t,["text"]);a!=null&&r(e,["text"],a);const u=i(t,["activityStart"]);u!=null&&r(e,["activityStart"],u);const c=i(t,["activityEnd"]);return c!=null&&r(e,["activityEnd"],c),e}function jr(t){const e={},o=i(t,["media"]);if(o!=null){let d=hn(o);Array.isArray(d)&&(d=d.map(f=>f)),r(e,["mediaChunks"],d)}const n=i(t,["audio"]);n!=null&&r(e,["audio"],vn(n));const s=i(t,["audioStreamEnd"]);s!=null&&r(e,["audioStreamEnd"],s);const l=i(t,["video"]);l!=null&&r(e,["video"],gn(l));const a=i(t,["text"]);a!=null&&r(e,["text"],a);const u=i(t,["activityStart"]);u!=null&&r(e,["activityStart"],u);const c=i(t,["activityEnd"]);return c!=null&&r(e,["activityEnd"],c),e}function el(t){const e={},o=i(t,["setupComplete"]);o!=null&&r(e,["setupComplete"],o);const n=i(t,["serverContent"]);n!=null&&r(e,["serverContent"],n);const s=i(t,["toolCall"]);s!=null&&r(e,["toolCall"],s);const l=i(t,["toolCallCancellation"]);l!=null&&r(e,["toolCallCancellation"],l);const a=i(t,["usageMetadata"]);a!=null&&r(e,["usageMetadata"],sl(a));const u=i(t,["goAway"]);u!=null&&r(e,["goAway"],u);const c=i(t,["sessionResumptionUpdate"]);c!=null&&r(e,["sessionResumptionUpdate"],c);const d=i(t,["voiceActivityDetectionSignal"]);d!=null&&r(e,["voiceActivityDetectionSignal"],d);const f=i(t,["voiceActivity"]);return f!=null&&r(e,["voiceActivity"],rl(f)),e}function tl(t){const e={},o=i(t,["mediaResolution"]);o!=null&&r(e,["mediaResolution"],o);const n=i(t,["codeExecutionResult"]);n!=null&&r(e,["codeExecutionResult"],n);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Jr(l));const a=i(t,["functionCall"]);a!=null&&r(e,["functionCall"],Hr(a));const u=i(t,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],Je(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const f=i(t,["thought"]);f!=null&&r(e,["thought"],f);const m=i(t,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const p=i(t,["videoMetadata"]);return p!=null&&r(e,["videoMetadata"],p),e}function ol(t){const e={},o=i(t,["handle"]);if(o!=null&&r(e,["handle"],o),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function nl(t){const e={};if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["computerUse"]);o!=null&&r(e,["computerUse"],o);const n=i(t,["fileSearch"]);n!=null&&r(e,["fileSearch"],n);const s=i(t,["codeExecution"]);if(s!=null&&r(e,["codeExecution"],s),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=i(t,["functionDeclarations"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>m)),r(e,["functionDeclarations"],f)}const a=i(t,["googleMaps"]);a!=null&&r(e,["googleMaps"],$r(a));const u=i(t,["googleSearch"]);u!=null&&r(e,["googleSearch"],Kr(u));const c=i(t,["googleSearchRetrieval"]);c!=null&&r(e,["googleSearchRetrieval"],c);const d=i(t,["urlContext"]);return d!=null&&r(e,["urlContext"],d),e}function il(t){const e={},o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const n=i(t,["computerUse"]);if(n!=null&&r(e,["computerUse"],n),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=i(t,["codeExecution"]);s!=null&&r(e,["codeExecution"],s);const l=i(t,["enterpriseWebSearch"]);l!=null&&r(e,["enterpriseWebSearch"],l);const a=i(t,["functionDeclarations"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(p=>Br(p))),r(e,["functionDeclarations"],m)}const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],u);const c=i(t,["googleSearch"]);c!=null&&r(e,["googleSearch"],c);const d=i(t,["googleSearchRetrieval"]);d!=null&&r(e,["googleSearchRetrieval"],d);const f=i(t,["urlContext"]);return f!=null&&r(e,["urlContext"],f),e}function sl(t){const e={},o=i(t,["promptTokenCount"]);o!=null&&r(e,["promptTokenCount"],o);const n=i(t,["cachedContentTokenCount"]);n!=null&&r(e,["cachedContentTokenCount"],n);const s=i(t,["candidatesTokenCount"]);s!=null&&r(e,["responseTokenCount"],s);const l=i(t,["toolUsePromptTokenCount"]);l!=null&&r(e,["toolUsePromptTokenCount"],l);const a=i(t,["thoughtsTokenCount"]);a!=null&&r(e,["thoughtsTokenCount"],a);const u=i(t,["totalTokenCount"]);u!=null&&r(e,["totalTokenCount"],u);const c=i(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>v)),r(e,["promptTokensDetails"],g)}const d=i(t,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>v)),r(e,["cacheTokensDetails"],g)}const f=i(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(v=>v)),r(e,["responseTokensDetails"],g)}const m=i(t,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(v=>v)),r(e,["toolUsePromptTokensDetails"],g)}const p=i(t,["trafficType"]);return p!=null&&r(e,["trafficType"],p),e}function rl(t){const e={},o=i(t,["type"]);return o!=null&&r(e,["voiceActivityType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ll(t){const e={},o=i(t,["data"]);if(o!=null&&r(e,["data"],o),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["mimeType"]);return n!=null&&r(e,["mimeType"],n),e}function al(t){const e={},o=i(t,["content"]);o!=null&&r(e,["content"],o);const n=i(t,["citationMetadata"]);n!=null&&r(e,["citationMetadata"],ul(n));const s=i(t,["tokenCount"]);s!=null&&r(e,["tokenCount"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["avgLogprobs"]);a!=null&&r(e,["avgLogprobs"],a);const u=i(t,["groundingMetadata"]);u!=null&&r(e,["groundingMetadata"],u);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const d=i(t,["logprobsResult"]);d!=null&&r(e,["logprobsResult"],d);const f=i(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),r(e,["safetyRatings"],p)}const m=i(t,["urlContextMetadata"]);return m!=null&&r(e,["urlContextMetadata"],m),e}function ul(t){const e={},o=i(t,["citationSources"]);if(o!=null){let n=o;Array.isArray(n)&&(n=n.map(s=>s)),r(e,["citations"],n)}return e}function dl(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["contents"]);if(s!=null){let l=j(s);Array.isArray(l)&&(l=l.map(a=>a)),r(o,["contents"],l)}return o}function cl(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["tokensInfo"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>l)),r(e,["tokensInfo"],s)}return e}function fl(t){const e={},o=i(t,["values"]);o!=null&&r(e,["values"],o);const n=i(t,["statistics"]);return n!=null&&r(e,["statistics"],pl(n)),e}function pl(t){const e={},o=i(t,["truncated"]);o!=null&&r(e,["truncated"],o);const n=i(t,["token_count"]);return n!=null&&r(e,["tokenCount"],n),e}function We(t){const e={},o=i(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Sa(l))),r(e,["parts"],s)}const n=i(t,["role"]);return n!=null&&r(e,["role"],n),e}function ml(t){const e={},o=i(t,["controlType"]);o!=null&&r(e,["controlType"],o);const n=i(t,["enableControlImageComputation"]);return n!=null&&r(e,["computeControl"],n),e}function hl(t){const e={};if(i(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function gl(t,e){const o={},n=i(t,["systemInstruction"]);e!==void 0&&n!=null&&r(e,["systemInstruction"],X(n));const s=i(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Rn(u))),r(e,["tools"],a)}const l=i(t,["generationConfig"]);return e!==void 0&&l!=null&&r(e,["generationConfig"],la(l)),o}function vl(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["contents"]);if(s!=null){let a=j(s);Array.isArray(a)&&(a=a.map(u=>We(u))),r(o,["contents"],a)}const l=i(e,["config"]);return l!=null&&hl(l),o}function yl(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["contents"]);if(s!=null){let a=j(s);Array.isArray(a)&&(a=a.map(u=>u)),r(o,["contents"],a)}const l=i(e,["config"]);return l!=null&&gl(l,o),o}function Nl(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["totalTokens"]);n!=null&&r(e,["totalTokens"],n);const s=i(t,["cachedContentTokenCount"]);return s!=null&&r(e,["cachedContentTokenCount"],s),e}function El(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["totalTokens"]);return n!=null&&r(e,["totalTokens"],n),e}function Tl(t,e){const o={},n=i(e,["model"]);return n!=null&&r(o,["_url","name"],F(t,n)),o}function Sl(t,e){const o={},n=i(e,["model"]);return n!=null&&r(o,["_url","name"],F(t,n)),o}function Cl(t){const e={},o=i(t,["sdkHttpResponse"]);return o!=null&&r(e,["sdkHttpResponse"],o),e}function xl(t){const e={},o=i(t,["sdkHttpResponse"]);return o!=null&&r(e,["sdkHttpResponse"],o),e}function _l(t,e){const o={},n=i(t,["outputGcsUri"]);e!==void 0&&n!=null&&r(e,["parameters","storageUri"],n);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&r(e,["parameters","negativePrompt"],s);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const c=i(t,["seed"]);e!==void 0&&c!=null&&r(e,["parameters","seed"],c);const d=i(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&r(e,["parameters","safetySetting"],d);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const m=i(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&r(e,["parameters","includeSafetyAttributes"],m);const p=i(t,["includeRaiReason"]);e!==void 0&&p!=null&&r(e,["parameters","includeRaiReason"],p);const g=i(t,["language"]);e!==void 0&&g!=null&&r(e,["parameters","language"],g);const v=i(t,["outputMimeType"]);e!==void 0&&v!=null&&r(e,["parameters","outputOptions","mimeType"],v);const N=i(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&r(e,["parameters","outputOptions","compressionQuality"],N);const y=i(t,["addWatermark"]);e!==void 0&&y!=null&&r(e,["parameters","addWatermark"],y);const E=i(t,["labels"]);e!==void 0&&E!=null&&r(e,["labels"],E);const T=i(t,["editMode"]);e!==void 0&&T!=null&&r(e,["parameters","editMode"],T);const S=i(t,["baseSteps"]);return e!==void 0&&S!=null&&r(e,["parameters","editConfig","baseSteps"],S),o}function Dl(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["prompt"]);s!=null&&r(o,["instances[0]","prompt"],s);const l=i(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(c=>wa(c))),r(o,["instances[0]","referenceImages"],u)}const a=i(e,["config"]);return a!=null&&_l(a,o),o}function Il(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Ye(l))),r(e,["generatedImages"],s)}return e}function wl(t,e){const o={},n=i(t,["taskType"]);e!==void 0&&n!=null&&r(e,["requests[]","taskType"],n);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["requests[]","title"],s);const l=i(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&r(e,["requests[]","outputDimensionality"],l),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Al(t,e){const o={},n=i(t,["taskType"]);e!==void 0&&n!=null&&r(e,["instances[]","task_type"],n);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["instances[]","title"],s);const l=i(t,["outputDimensionality"]);e!==void 0&&l!=null&&r(e,["parameters","outputDimensionality"],l);const a=i(t,["mimeType"]);e!==void 0&&a!=null&&r(e,["instances[]","mimeType"],a);const u=i(t,["autoTruncate"]);return e!==void 0&&u!=null&&r(e,["parameters","autoTruncate"],u),o}function bl(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["contents"]);if(s!=null){let u=Et(t,s);Array.isArray(u)&&(u=u.map(c=>c)),r(o,["requests[]","content"],u)}const l=i(e,["config"]);l!=null&&wl(l,o);const a=i(e,["model"]);return a!==void 0&&r(o,["requests[]","model"],F(t,a)),o}function Rl(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["contents"]);if(s!=null){let a=Et(t,s);Array.isArray(a)&&(a=a.map(u=>u)),r(o,["instances[]","content"],a)}const l=i(e,["config"]);return l!=null&&Al(l,o),o}function Pl(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["embeddings"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["embeddings"],l)}const s=i(t,["metadata"]);return s!=null&&r(e,["metadata"],s),e}function Ml(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["predictions[]","embeddings"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>fl(a))),r(e,["embeddings"],l)}const s=i(t,["metadata"]);return s!=null&&r(e,["metadata"],s),e}function kl(t){const e={},o=i(t,["endpoint"]);o!=null&&r(e,["name"],o);const n=i(t,["deployedModelId"]);return n!=null&&r(e,["deployedModelId"],n),e}function Ul(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const n=i(t,["mimeType"]);return n!=null&&r(e,["mimeType"],n),e}function Vl(t){const e={},o=i(t,["id"]);o!=null&&r(e,["id"],o);const n=i(t,["args"]);n!=null&&r(e,["args"],n);const s=i(t,["name"]);if(s!=null&&r(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ll(t){const e={},o=i(t,["allowedFunctionNames"]);o!=null&&r(e,["allowedFunctionNames"],o);const n=i(t,["mode"]);if(n!=null&&r(e,["mode"],n),i(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Fl(t){const e={},o=i(t,["description"]);o!=null&&r(e,["description"],o);const n=i(t,["name"]);n!=null&&r(e,["name"],n);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);if(u!=null&&r(e,["responseJsonSchema"],u),i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Gl(t,e,o){const n={},s=i(e,["systemInstruction"]);o!==void 0&&s!=null&&r(o,["systemInstruction"],We(X(s)));const l=i(e,["temperature"]);l!=null&&r(n,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(n,["topP"],a);const u=i(e,["topK"]);u!=null&&r(n,["topK"],u);const c=i(e,["candidateCount"]);c!=null&&r(n,["candidateCount"],c);const d=i(e,["maxOutputTokens"]);d!=null&&r(n,["maxOutputTokens"],d);const f=i(e,["stopSequences"]);f!=null&&r(n,["stopSequences"],f);const m=i(e,["responseLogprobs"]);m!=null&&r(n,["responseLogprobs"],m);const p=i(e,["logprobs"]);p!=null&&r(n,["logprobs"],p);const g=i(e,["presencePenalty"]);g!=null&&r(n,["presencePenalty"],g);const v=i(e,["frequencyPenalty"]);v!=null&&r(n,["frequencyPenalty"],v);const N=i(e,["seed"]);N!=null&&r(n,["seed"],N);const y=i(e,["responseMimeType"]);y!=null&&r(n,["responseMimeType"],y);const E=i(e,["responseSchema"]);E!=null&&r(n,["responseSchema"],Tt(E));const T=i(e,["responseJsonSchema"]);if(T!=null&&r(n,["responseJsonSchema"],T),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=i(e,["safetySettings"]);if(o!==void 0&&S!=null){let L=S;Array.isArray(L)&&(L=L.map($=>Aa($))),r(o,["safetySettings"],L)}const C=i(e,["tools"]);if(o!==void 0&&C!=null){let L=De(C);Array.isArray(L)&&(L=L.map($=>Va(_e($)))),r(o,["tools"],L)}const I=i(e,["toolConfig"]);if(o!==void 0&&I!=null&&r(o,["toolConfig"],Ua(I)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=i(e,["cachedContent"]);o!==void 0&&P!=null&&r(o,["cachedContent"],ue(t,P));const R=i(e,["responseModalities"]);R!=null&&r(n,["responseModalities"],R);const J=i(e,["mediaResolution"]);J!=null&&r(n,["mediaResolution"],J);const A=i(e,["speechConfig"]);if(A!=null&&r(n,["speechConfig"],St(A)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=i(e,["thinkingConfig"]);k!=null&&r(n,["thinkingConfig"],k);const H=i(e,["imageConfig"]);H!=null&&r(n,["imageConfig"],fa(H));const z=i(e,["enableEnhancedCivicAnswers"]);return z!=null&&r(n,["enableEnhancedCivicAnswers"],z),n}function Jl(t,e,o){const n={},s=i(e,["systemInstruction"]);o!==void 0&&s!=null&&r(o,["systemInstruction"],X(s));const l=i(e,["temperature"]);l!=null&&r(n,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(n,["topP"],a);const u=i(e,["topK"]);u!=null&&r(n,["topK"],u);const c=i(e,["candidateCount"]);c!=null&&r(n,["candidateCount"],c);const d=i(e,["maxOutputTokens"]);d!=null&&r(n,["maxOutputTokens"],d);const f=i(e,["stopSequences"]);f!=null&&r(n,["stopSequences"],f);const m=i(e,["responseLogprobs"]);m!=null&&r(n,["responseLogprobs"],m);const p=i(e,["logprobs"]);p!=null&&r(n,["logprobs"],p);const g=i(e,["presencePenalty"]);g!=null&&r(n,["presencePenalty"],g);const v=i(e,["frequencyPenalty"]);v!=null&&r(n,["frequencyPenalty"],v);const N=i(e,["seed"]);N!=null&&r(n,["seed"],N);const y=i(e,["responseMimeType"]);y!=null&&r(n,["responseMimeType"],y);const E=i(e,["responseSchema"]);E!=null&&r(n,["responseSchema"],Tt(E));const T=i(e,["responseJsonSchema"]);T!=null&&r(n,["responseJsonSchema"],T);const S=i(e,["routingConfig"]);S!=null&&r(n,["routingConfig"],S);const C=i(e,["modelSelectionConfig"]);C!=null&&r(n,["modelConfig"],C);const I=i(e,["safetySettings"]);if(o!==void 0&&I!=null){let Y=I;Array.isArray(Y)&&(Y=Y.map(U=>U)),r(o,["safetySettings"],Y)}const P=i(e,["tools"]);if(o!==void 0&&P!=null){let Y=De(P);Array.isArray(Y)&&(Y=Y.map(U=>Rn(_e(U)))),r(o,["tools"],Y)}const R=i(e,["toolConfig"]);o!==void 0&&R!=null&&r(o,["toolConfig"],R);const J=i(e,["labels"]);o!==void 0&&J!=null&&r(o,["labels"],J);const A=i(e,["cachedContent"]);o!==void 0&&A!=null&&r(o,["cachedContent"],ue(t,A));const k=i(e,["responseModalities"]);k!=null&&r(n,["responseModalities"],k);const H=i(e,["mediaResolution"]);H!=null&&r(n,["mediaResolution"],H);const z=i(e,["speechConfig"]);z!=null&&r(n,["speechConfig"],St(z));const L=i(e,["audioTimestamp"]);L!=null&&r(n,["audioTimestamp"],L);const $=i(e,["thinkingConfig"]);$!=null&&r(n,["thinkingConfig"],$);const re=i(e,["imageConfig"]);if(re!=null&&r(n,["imageConfig"],pa(re)),i(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function Wo(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["contents"]);if(s!=null){let a=j(s);Array.isArray(a)&&(a=a.map(u=>We(u))),r(o,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(o,["generationConfig"],Gl(t,l,o)),o}function Yo(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["contents"]);if(s!=null){let a=j(s);Array.isArray(a)&&(a=a.map(u=>u)),r(o,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(o,["generationConfig"],Jl(t,l,o)),o}function Oo(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>al(d))),r(e,["candidates"],c)}const s=i(t,["modelVersion"]);s!=null&&r(e,["modelVersion"],s);const l=i(t,["promptFeedback"]);l!=null&&r(e,["promptFeedback"],l);const a=i(t,["responseId"]);a!=null&&r(e,["responseId"],a);const u=i(t,["usageMetadata"]);return u!=null&&r(e,["usageMetadata"],u),e}function Xo(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["candidates"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>f)),r(e,["candidates"],d)}const s=i(t,["createTime"]);s!=null&&r(e,["createTime"],s);const l=i(t,["modelVersion"]);l!=null&&r(e,["modelVersion"],l);const a=i(t,["promptFeedback"]);a!=null&&r(e,["promptFeedback"],a);const u=i(t,["responseId"]);u!=null&&r(e,["responseId"],u);const c=i(t,["usageMetadata"]);return c!=null&&r(e,["usageMetadata"],c),e}function Hl(t,e){const o={};if(i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=i(t,["numberOfImages"]);e!==void 0&&n!=null&&r(e,["parameters","sampleCount"],n);const s=i(t,["aspectRatio"]);e!==void 0&&s!=null&&r(e,["parameters","aspectRatio"],s);const l=i(t,["guidanceScale"]);if(e!==void 0&&l!=null&&r(e,["parameters","guidanceScale"],l),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&r(e,["parameters","safetySetting"],a);const u=i(t,["personGeneration"]);e!==void 0&&u!=null&&r(e,["parameters","personGeneration"],u);const c=i(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&r(e,["parameters","includeSafetyAttributes"],c);const d=i(t,["includeRaiReason"]);e!==void 0&&d!=null&&r(e,["parameters","includeRaiReason"],d);const f=i(t,["language"]);e!==void 0&&f!=null&&r(e,["parameters","language"],f);const m=i(t,["outputMimeType"]);e!==void 0&&m!=null&&r(e,["parameters","outputOptions","mimeType"],m);const p=i(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&r(e,["parameters","outputOptions","compressionQuality"],p),i(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=i(t,["imageSize"]);if(e!==void 0&&g!=null&&r(e,["parameters","sampleImageSize"],g),i(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function Bl(t,e){const o={},n=i(t,["outputGcsUri"]);e!==void 0&&n!=null&&r(e,["parameters","storageUri"],n);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&r(e,["parameters","negativePrompt"],s);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const c=i(t,["seed"]);e!==void 0&&c!=null&&r(e,["parameters","seed"],c);const d=i(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&r(e,["parameters","safetySetting"],d);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const m=i(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&r(e,["parameters","includeSafetyAttributes"],m);const p=i(t,["includeRaiReason"]);e!==void 0&&p!=null&&r(e,["parameters","includeRaiReason"],p);const g=i(t,["language"]);e!==void 0&&g!=null&&r(e,["parameters","language"],g);const v=i(t,["outputMimeType"]);e!==void 0&&v!=null&&r(e,["parameters","outputOptions","mimeType"],v);const N=i(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&r(e,["parameters","outputOptions","compressionQuality"],N);const y=i(t,["addWatermark"]);e!==void 0&&y!=null&&r(e,["parameters","addWatermark"],y);const E=i(t,["labels"]);e!==void 0&&E!=null&&r(e,["labels"],E);const T=i(t,["imageSize"]);e!==void 0&&T!=null&&r(e,["parameters","sampleImageSize"],T);const S=i(t,["enhancePrompt"]);return e!==void 0&&S!=null&&r(e,["parameters","enhancePrompt"],S),o}function ql(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["prompt"]);s!=null&&r(o,["instances[0]","prompt"],s);const l=i(e,["config"]);return l!=null&&Hl(l,o),o}function $l(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["prompt"]);s!=null&&r(o,["instances[0]","prompt"],s);const l=i(e,["config"]);return l!=null&&Bl(l,o),o}function Kl(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["predictions"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>na(a))),r(e,["generatedImages"],l)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&r(e,["positivePromptSafetyAttributes"],An(s)),e}function zl(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["predictions"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Ye(a))),r(e,["generatedImages"],l)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&r(e,["positivePromptSafetyAttributes"],bn(s)),e}function Wl(t,e){const o={},n=i(t,["numberOfVideos"]);if(e!==void 0&&n!=null&&r(e,["parameters","sampleCount"],n),i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=i(t,["durationSeconds"]);if(e!==void 0&&s!=null&&r(e,["parameters","durationSeconds"],s),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(t,["aspectRatio"]);e!==void 0&&l!=null&&r(e,["parameters","aspectRatio"],l);const a=i(t,["resolution"]);e!==void 0&&a!=null&&r(e,["parameters","resolution"],a);const u=i(t,["personGeneration"]);if(e!==void 0&&u!=null&&r(e,["parameters","personGeneration"],u),i(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=i(t,["negativePrompt"]);e!==void 0&&c!=null&&r(e,["parameters","negativePrompt"],c);const d=i(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&r(e,["parameters","enhancePrompt"],d),i(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=i(t,["lastFrame"]);e!==void 0&&f!=null&&r(e,["instances[0]","lastFrame"],Oe(f));const m=i(t,["referenceImages"]);if(e!==void 0&&m!=null){let p=m;Array.isArray(p)&&(p=p.map(g=>Oa(g))),r(e,["instances[0]","referenceImages"],p)}if(i(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(i(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function Yl(t,e){const o={},n=i(t,["numberOfVideos"]);e!==void 0&&n!=null&&r(e,["parameters","sampleCount"],n);const s=i(t,["outputGcsUri"]);e!==void 0&&s!=null&&r(e,["parameters","storageUri"],s);const l=i(t,["fps"]);e!==void 0&&l!=null&&r(e,["parameters","fps"],l);const a=i(t,["durationSeconds"]);e!==void 0&&a!=null&&r(e,["parameters","durationSeconds"],a);const u=i(t,["seed"]);e!==void 0&&u!=null&&r(e,["parameters","seed"],u);const c=i(t,["aspectRatio"]);e!==void 0&&c!=null&&r(e,["parameters","aspectRatio"],c);const d=i(t,["resolution"]);e!==void 0&&d!=null&&r(e,["parameters","resolution"],d);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const m=i(t,["pubsubTopic"]);e!==void 0&&m!=null&&r(e,["parameters","pubsubTopic"],m);const p=i(t,["negativePrompt"]);e!==void 0&&p!=null&&r(e,["parameters","negativePrompt"],p);const g=i(t,["enhancePrompt"]);e!==void 0&&g!=null&&r(e,["parameters","enhancePrompt"],g);const v=i(t,["generateAudio"]);e!==void 0&&v!=null&&r(e,["parameters","generateAudio"],v);const N=i(t,["lastFrame"]);e!==void 0&&N!=null&&r(e,["instances[0]","lastFrame"],ie(N));const y=i(t,["referenceImages"]);if(e!==void 0&&y!=null){let S=y;Array.isArray(S)&&(S=S.map(C=>Xa(C))),r(e,["instances[0]","referenceImages"],S)}const E=i(t,["mask"]);e!==void 0&&E!=null&&r(e,["instances[0]","mask"],Ya(E));const T=i(t,["compressionQuality"]);return e!==void 0&&T!=null&&r(e,["parameters","compressionQuality"],T),o}function Ol(t){const e={},o=i(t,["name"]);o!=null&&r(e,["name"],o);const n=i(t,["metadata"]);n!=null&&r(e,["metadata"],n);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response","generateVideoResponse"]);return a!=null&&r(e,["response"],jl(a)),e}function Xl(t){const e={},o=i(t,["name"]);o!=null&&r(e,["name"],o);const n=i(t,["metadata"]);n!=null&&r(e,["metadata"],n);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],ea(a)),e}function Ql(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["prompt"]);s!=null&&r(o,["instances[0]","prompt"],s);const l=i(e,["image"]);l!=null&&r(o,["instances[0]","image"],Oe(l));const a=i(e,["video"]);a!=null&&r(o,["instances[0]","video"],Pn(a));const u=i(e,["source"]);u!=null&&ta(u,o);const c=i(e,["config"]);return c!=null&&Wl(c,o),o}function Zl(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["prompt"]);s!=null&&r(o,["instances[0]","prompt"],s);const l=i(e,["image"]);l!=null&&r(o,["instances[0]","image"],ie(l));const a=i(e,["video"]);a!=null&&r(o,["instances[0]","video"],Mn(a));const u=i(e,["source"]);u!=null&&oa(u,o);const c=i(e,["config"]);return c!=null&&Yl(c,o),o}function jl(t){const e={},o=i(t,["generatedSamples"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>sa(a))),r(e,["generatedVideos"],l)}const n=i(t,["raiMediaFilteredCount"]);n!=null&&r(e,["raiMediaFilteredCount"],n);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function ea(t){const e={},o=i(t,["videos"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>ra(a))),r(e,["generatedVideos"],l)}const n=i(t,["raiMediaFilteredCount"]);n!=null&&r(e,["raiMediaFilteredCount"],n);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function ta(t,e){const o={},n=i(t,["prompt"]);e!==void 0&&n!=null&&r(e,["instances[0]","prompt"],n);const s=i(t,["image"]);e!==void 0&&s!=null&&r(e,["instances[0]","image"],Oe(s));const l=i(t,["video"]);return e!==void 0&&l!=null&&r(e,["instances[0]","video"],Pn(l)),o}function oa(t,e){const o={},n=i(t,["prompt"]);e!==void 0&&n!=null&&r(e,["instances[0]","prompt"],n);const s=i(t,["image"]);e!==void 0&&s!=null&&r(e,["instances[0]","image"],ie(s));const l=i(t,["video"]);return e!==void 0&&l!=null&&r(e,["instances[0]","video"],Mn(l)),o}function na(t){const e={},o=i(t,["_self"]);o!=null&&r(e,["image"],ma(o));const n=i(t,["raiFilteredReason"]);n!=null&&r(e,["raiFilteredReason"],n);const s=i(t,["_self"]);return s!=null&&r(e,["safetyAttributes"],An(s)),e}function Ye(t){const e={},o=i(t,["_self"]);o!=null&&r(e,["image"],wn(o));const n=i(t,["raiFilteredReason"]);n!=null&&r(e,["raiFilteredReason"],n);const s=i(t,["_self"]);s!=null&&r(e,["safetyAttributes"],bn(s));const l=i(t,["prompt"]);return l!=null&&r(e,["enhancedPrompt"],l),e}function ia(t){const e={},o=i(t,["_self"]);o!=null&&r(e,["mask"],wn(o));const n=i(t,["labels"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>l)),r(e,["labels"],s)}return e}function sa(t){const e={},o=i(t,["video"]);return o!=null&&r(e,["video"],za(o)),e}function ra(t){const e={},o=i(t,["_self"]);return o!=null&&r(e,["video"],Wa(o)),e}function la(t){const e={},o=i(t,["modelSelectionConfig"]);o!=null&&r(e,["modelConfig"],o);const n=i(t,["responseJsonSchema"]);n!=null&&r(e,["responseJsonSchema"],n);const s=i(t,["audioTimestamp"]);s!=null&&r(e,["audioTimestamp"],s);const l=i(t,["candidateCount"]);l!=null&&r(e,["candidateCount"],l);const a=i(t,["enableAffectiveDialog"]);a!=null&&r(e,["enableAffectiveDialog"],a);const u=i(t,["frequencyPenalty"]);u!=null&&r(e,["frequencyPenalty"],u);const c=i(t,["logprobs"]);c!=null&&r(e,["logprobs"],c);const d=i(t,["maxOutputTokens"]);d!=null&&r(e,["maxOutputTokens"],d);const f=i(t,["mediaResolution"]);f!=null&&r(e,["mediaResolution"],f);const m=i(t,["presencePenalty"]);m!=null&&r(e,["presencePenalty"],m);const p=i(t,["responseLogprobs"]);p!=null&&r(e,["responseLogprobs"],p);const g=i(t,["responseMimeType"]);g!=null&&r(e,["responseMimeType"],g);const v=i(t,["responseModalities"]);v!=null&&r(e,["responseModalities"],v);const N=i(t,["responseSchema"]);N!=null&&r(e,["responseSchema"],N);const y=i(t,["routingConfig"]);y!=null&&r(e,["routingConfig"],y);const E=i(t,["seed"]);E!=null&&r(e,["seed"],E);const T=i(t,["speechConfig"]);T!=null&&r(e,["speechConfig"],T);const S=i(t,["stopSequences"]);S!=null&&r(e,["stopSequences"],S);const C=i(t,["temperature"]);C!=null&&r(e,["temperature"],C);const I=i(t,["thinkingConfig"]);I!=null&&r(e,["thinkingConfig"],I);const P=i(t,["topK"]);P!=null&&r(e,["topK"],P);const R=i(t,["topP"]);if(R!=null&&r(e,["topP"],R),i(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function aa(t,e){const o={},n=i(e,["model"]);return n!=null&&r(o,["_url","name"],F(t,n)),o}function ua(t,e){const o={},n=i(e,["model"]);return n!=null&&r(o,["_url","name"],F(t,n)),o}function da(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=i(t,["enableWidget"]);return o!=null&&r(e,["enableWidget"],o),e}function ca(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=i(t,["timeRangeFilter"]);return o!=null&&r(e,["timeRangeFilter"],o),e}function fa(t){const e={},o=i(t,["aspectRatio"]);o!=null&&r(e,["aspectRatio"],o);const n=i(t,["imageSize"]);if(n!=null&&r(e,["imageSize"],n),i(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(i(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(i(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function pa(t){const e={},o=i(t,["aspectRatio"]);o!=null&&r(e,["aspectRatio"],o);const n=i(t,["imageSize"]);n!=null&&r(e,["imageSize"],n);const s=i(t,["personGeneration"]);s!=null&&r(e,["personGeneration"],s);const l=i(t,["outputMimeType"]);l!=null&&r(e,["imageOutputOptions","mimeType"],l);const a=i(t,["outputCompressionQuality"]);return a!=null&&r(e,["imageOutputOptions","compressionQuality"],a),e}function ma(t){const e={},o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["imageBytes"],ce(o));const n=i(t,["mimeType"]);return n!=null&&r(e,["mimeType"],n),e}function wn(t){const e={},o=i(t,["gcsUri"]);o!=null&&r(e,["gcsUri"],o);const n=i(t,["bytesBase64Encoded"]);n!=null&&r(e,["imageBytes"],ce(n));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Oe(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=i(t,["imageBytes"]);o!=null&&r(e,["bytesBase64Encoded"],ce(o));const n=i(t,["mimeType"]);return n!=null&&r(e,["mimeType"],n),e}function ie(t){const e={},o=i(t,["gcsUri"]);o!=null&&r(e,["gcsUri"],o);const n=i(t,["imageBytes"]);n!=null&&r(e,["bytesBase64Encoded"],ce(n));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function ha(t,e,o){const n={},s=i(e,["pageSize"]);o!==void 0&&s!=null&&r(o,["_query","pageSize"],s);const l=i(e,["pageToken"]);o!==void 0&&l!=null&&r(o,["_query","pageToken"],l);const a=i(e,["filter"]);o!==void 0&&a!=null&&r(o,["_query","filter"],a);const u=i(e,["queryBase"]);return o!==void 0&&u!=null&&r(o,["_url","models_url"],Tn(t,u)),n}function ga(t,e,o){const n={},s=i(e,["pageSize"]);o!==void 0&&s!=null&&r(o,["_query","pageSize"],s);const l=i(e,["pageToken"]);o!==void 0&&l!=null&&r(o,["_query","pageToken"],l);const a=i(e,["filter"]);o!==void 0&&a!=null&&r(o,["_query","filter"],a);const u=i(e,["queryBase"]);return o!==void 0&&u!=null&&r(o,["_url","models_url"],Tn(t,u)),n}function va(t,e){const o={},n=i(e,["config"]);return n!=null&&ha(t,n,o),o}function ya(t,e){const o={},n=i(e,["config"]);return n!=null&&ga(t,n,o),o}function Na(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const s=i(t,["_self"]);if(s!=null){let l=Sn(s);Array.isArray(l)&&(l=l.map(a=>at(a))),r(e,["models"],l)}return e}function Ea(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const s=i(t,["_self"]);if(s!=null){let l=Sn(s);Array.isArray(l)&&(l=l.map(a=>ut(a))),r(e,["models"],l)}return e}function Ta(t){const e={},o=i(t,["maskMode"]);o!=null&&r(e,["maskMode"],o);const n=i(t,["segmentationClasses"]);n!=null&&r(e,["maskClasses"],n);const s=i(t,["maskDilation"]);return s!=null&&r(e,["dilation"],s),e}function at(t){const e={},o=i(t,["name"]);o!=null&&r(e,["name"],o);const n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["version"]);l!=null&&r(e,["version"],l);const a=i(t,["_self"]);a!=null&&r(e,["tunedModelInfo"],La(a));const u=i(t,["inputTokenLimit"]);u!=null&&r(e,["inputTokenLimit"],u);const c=i(t,["outputTokenLimit"]);c!=null&&r(e,["outputTokenLimit"],c);const d=i(t,["supportedGenerationMethods"]);d!=null&&r(e,["supportedActions"],d);const f=i(t,["temperature"]);f!=null&&r(e,["temperature"],f);const m=i(t,["maxTemperature"]);m!=null&&r(e,["maxTemperature"],m);const p=i(t,["topP"]);p!=null&&r(e,["topP"],p);const g=i(t,["topK"]);g!=null&&r(e,["topK"],g);const v=i(t,["thinking"]);return v!=null&&r(e,["thinking"],v),e}function ut(t){const e={},o=i(t,["name"]);o!=null&&r(e,["name"],o);const n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["versionId"]);l!=null&&r(e,["version"],l);const a=i(t,["deployedModels"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(p=>kl(p))),r(e,["endpoints"],m)}const u=i(t,["labels"]);u!=null&&r(e,["labels"],u);const c=i(t,["_self"]);c!=null&&r(e,["tunedModelInfo"],Fa(c));const d=i(t,["defaultCheckpointId"]);d!=null&&r(e,["defaultCheckpointId"],d);const f=i(t,["checkpoints"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(p=>p)),r(e,["checkpoints"],m)}return e}function Sa(t){const e={},o=i(t,["mediaResolution"]);o!=null&&r(e,["mediaResolution"],o);const n=i(t,["codeExecutionResult"]);n!=null&&r(e,["codeExecutionResult"],n);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Ul(l));const a=i(t,["functionCall"]);a!=null&&r(e,["functionCall"],Vl(a));const u=i(t,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],ll(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const f=i(t,["thought"]);f!=null&&r(e,["thought"],f);const m=i(t,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const p=i(t,["videoMetadata"]);return p!=null&&r(e,["videoMetadata"],p),e}function Ca(t){const e={},o=i(t,["productImage"]);return o!=null&&r(e,["image"],ie(o)),e}function xa(t,e){const o={},n=i(t,["numberOfImages"]);e!==void 0&&n!=null&&r(e,["parameters","sampleCount"],n);const s=i(t,["baseSteps"]);e!==void 0&&s!=null&&r(e,["parameters","baseSteps"],s);const l=i(t,["outputGcsUri"]);e!==void 0&&l!=null&&r(e,["parameters","storageUri"],l);const a=i(t,["seed"]);e!==void 0&&a!=null&&r(e,["parameters","seed"],a);const u=i(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&r(e,["parameters","safetySetting"],u);const c=i(t,["personGeneration"]);e!==void 0&&c!=null&&r(e,["parameters","personGeneration"],c);const d=i(t,["addWatermark"]);e!==void 0&&d!=null&&r(e,["parameters","addWatermark"],d);const f=i(t,["outputMimeType"]);e!==void 0&&f!=null&&r(e,["parameters","outputOptions","mimeType"],f);const m=i(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&r(e,["parameters","outputOptions","compressionQuality"],m);const p=i(t,["enhancePrompt"]);e!==void 0&&p!=null&&r(e,["parameters","enhancePrompt"],p);const g=i(t,["labels"]);return e!==void 0&&g!=null&&r(e,["labels"],g),o}function _a(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["source"]);s!=null&&Ia(s,o);const l=i(e,["config"]);return l!=null&&xa(l,o),o}function Da(t){const e={},o=i(t,["predictions"]);if(o!=null){let n=o;Array.isArray(n)&&(n=n.map(s=>Ye(s))),r(e,["generatedImages"],n)}return e}function Ia(t,e){const o={},n=i(t,["prompt"]);e!==void 0&&n!=null&&r(e,["instances[0]","prompt"],n);const s=i(t,["personImage"]);e!==void 0&&s!=null&&r(e,["instances[0]","personImage","image"],ie(s));const l=i(t,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>Ca(u))),r(e,["instances[0]","productImages"],a)}return o}function wa(t){const e={},o=i(t,["referenceImage"]);o!=null&&r(e,["referenceImage"],ie(o));const n=i(t,["referenceId"]);n!=null&&r(e,["referenceId"],n);const s=i(t,["referenceType"]);s!=null&&r(e,["referenceType"],s);const l=i(t,["maskImageConfig"]);l!=null&&r(e,["maskImageConfig"],Ta(l));const a=i(t,["controlImageConfig"]);a!=null&&r(e,["controlImageConfig"],ml(a));const u=i(t,["styleImageConfig"]);u!=null&&r(e,["styleImageConfig"],u);const c=i(t,["subjectImageConfig"]);return c!=null&&r(e,["subjectImageConfig"],c),e}function An(t){const e={},o=i(t,["safetyAttributes","categories"]);o!=null&&r(e,["categories"],o);const n=i(t,["safetyAttributes","scores"]);n!=null&&r(e,["scores"],n);const s=i(t,["contentType"]);return s!=null&&r(e,["contentType"],s),e}function bn(t){const e={},o=i(t,["safetyAttributes","categories"]);o!=null&&r(e,["categories"],o);const n=i(t,["safetyAttributes","scores"]);n!=null&&r(e,["scores"],n);const s=i(t,["contentType"]);return s!=null&&r(e,["contentType"],s),e}function Aa(t){const e={},o=i(t,["category"]);if(o!=null&&r(e,["category"],o),i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=i(t,["threshold"]);return n!=null&&r(e,["threshold"],n),e}function ba(t){const e={},o=i(t,["image"]);return o!=null&&r(e,["image"],ie(o)),e}function Ra(t,e){const o={},n=i(t,["mode"]);e!==void 0&&n!=null&&r(e,["parameters","mode"],n);const s=i(t,["maxPredictions"]);e!==void 0&&s!=null&&r(e,["parameters","maxPredictions"],s);const l=i(t,["confidenceThreshold"]);e!==void 0&&l!=null&&r(e,["parameters","confidenceThreshold"],l);const a=i(t,["maskDilation"]);e!==void 0&&a!=null&&r(e,["parameters","maskDilation"],a);const u=i(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&r(e,["parameters","binaryColorThreshold"],u);const c=i(t,["labels"]);return e!==void 0&&c!=null&&r(e,["labels"],c),o}function Pa(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["source"]);s!=null&&ka(s,o);const l=i(e,["config"]);return l!=null&&Ra(l,o),o}function Ma(t){const e={},o=i(t,["predictions"]);if(o!=null){let n=o;Array.isArray(n)&&(n=n.map(s=>ia(s))),r(e,["generatedMasks"],n)}return e}function ka(t,e){const o={},n=i(t,["prompt"]);e!==void 0&&n!=null&&r(e,["instances[0]","prompt"],n);const s=i(t,["image"]);e!==void 0&&s!=null&&r(e,["instances[0]","image"],ie(s));const l=i(t,["scribbleImage"]);return e!==void 0&&l!=null&&r(e,["instances[0]","scribble"],ba(l)),o}function Ua(t){const e={},o=i(t,["retrievalConfig"]);o!=null&&r(e,["retrievalConfig"],o);const n=i(t,["functionCallingConfig"]);return n!=null&&r(e,["functionCallingConfig"],Ll(n)),e}function Va(t){const e={};if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["computerUse"]);o!=null&&r(e,["computerUse"],o);const n=i(t,["fileSearch"]);n!=null&&r(e,["fileSearch"],n);const s=i(t,["codeExecution"]);if(s!=null&&r(e,["codeExecution"],s),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=i(t,["functionDeclarations"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>m)),r(e,["functionDeclarations"],f)}const a=i(t,["googleMaps"]);a!=null&&r(e,["googleMaps"],da(a));const u=i(t,["googleSearch"]);u!=null&&r(e,["googleSearch"],ca(u));const c=i(t,["googleSearchRetrieval"]);c!=null&&r(e,["googleSearchRetrieval"],c);const d=i(t,["urlContext"]);return d!=null&&r(e,["urlContext"],d),e}function Rn(t){const e={},o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const n=i(t,["computerUse"]);if(n!=null&&r(e,["computerUse"],n),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=i(t,["codeExecution"]);s!=null&&r(e,["codeExecution"],s);const l=i(t,["enterpriseWebSearch"]);l!=null&&r(e,["enterpriseWebSearch"],l);const a=i(t,["functionDeclarations"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(p=>Fl(p))),r(e,["functionDeclarations"],m)}const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],u);const c=i(t,["googleSearch"]);c!=null&&r(e,["googleSearch"],c);const d=i(t,["googleSearchRetrieval"]);d!=null&&r(e,["googleSearchRetrieval"],d);const f=i(t,["urlContext"]);return f!=null&&r(e,["urlContext"],f),e}function La(t){const e={},o=i(t,["baseModel"]);o!=null&&r(e,["baseModel"],o);const n=i(t,["createTime"]);n!=null&&r(e,["createTime"],n);const s=i(t,["updateTime"]);return s!=null&&r(e,["updateTime"],s),e}function Fa(t){const e={},o=i(t,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&r(e,["baseModel"],o);const n=i(t,["createTime"]);n!=null&&r(e,["createTime"],n);const s=i(t,["updateTime"]);return s!=null&&r(e,["updateTime"],s),e}function Ga(t,e){const o={},n=i(t,["displayName"]);e!==void 0&&n!=null&&r(e,["displayName"],n);const s=i(t,["description"]);e!==void 0&&s!=null&&r(e,["description"],s);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&r(e,["defaultCheckpointId"],l),o}function Ja(t,e){const o={},n=i(t,["displayName"]);e!==void 0&&n!=null&&r(e,["displayName"],n);const s=i(t,["description"]);e!==void 0&&s!=null&&r(e,["description"],s);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&r(e,["defaultCheckpointId"],l),o}function Ha(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","name"],F(t,n));const s=i(e,["config"]);return s!=null&&Ga(s,o),o}function Ba(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["config"]);return s!=null&&Ja(s,o),o}function qa(t,e){const o={},n=i(t,["outputGcsUri"]);e!==void 0&&n!=null&&r(e,["parameters","storageUri"],n);const s=i(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&r(e,["parameters","safetySetting"],s);const l=i(t,["personGeneration"]);e!==void 0&&l!=null&&r(e,["parameters","personGeneration"],l);const a=i(t,["includeRaiReason"]);e!==void 0&&a!=null&&r(e,["parameters","includeRaiReason"],a);const u=i(t,["outputMimeType"]);e!==void 0&&u!=null&&r(e,["parameters","outputOptions","mimeType"],u);const c=i(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&r(e,["parameters","outputOptions","compressionQuality"],c);const d=i(t,["enhanceInputImage"]);e!==void 0&&d!=null&&r(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=i(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&r(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const m=i(t,["labels"]);e!==void 0&&m!=null&&r(e,["labels"],m);const p=i(t,["numberOfImages"]);e!==void 0&&p!=null&&r(e,["parameters","sampleCount"],p);const g=i(t,["mode"]);return e!==void 0&&g!=null&&r(e,["parameters","mode"],g),o}function $a(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["_url","model"],F(t,n));const s=i(e,["image"]);s!=null&&r(o,["instances[0]","image"],ie(s));const l=i(e,["upscaleFactor"]);l!=null&&r(o,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&qa(a,o),o}function Ka(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Ye(l))),r(e,["generatedImages"],s)}return e}function za(t){const e={},o=i(t,["uri"]);o!=null&&r(e,["uri"],o);const n=i(t,["encodedVideo"]);n!=null&&r(e,["videoBytes"],ce(n));const s=i(t,["encoding"]);return s!=null&&r(e,["mimeType"],s),e}function Wa(t){const e={},o=i(t,["gcsUri"]);o!=null&&r(e,["uri"],o);const n=i(t,["bytesBase64Encoded"]);n!=null&&r(e,["videoBytes"],ce(n));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Ya(t){const e={},o=i(t,["image"]);o!=null&&r(e,["_self"],ie(o));const n=i(t,["maskMode"]);return n!=null&&r(e,["maskMode"],n),e}function Oa(t){const e={},o=i(t,["image"]);o!=null&&r(e,["image"],Oe(o));const n=i(t,["referenceType"]);return n!=null&&r(e,["referenceType"],n),e}function Xa(t){const e={},o=i(t,["image"]);o!=null&&r(e,["image"],ie(o));const n=i(t,["referenceType"]);return n!=null&&r(e,["referenceType"],n),e}function Pn(t){const e={},o=i(t,["uri"]);o!=null&&r(e,["uri"],o);const n=i(t,["videoBytes"]);n!=null&&r(e,["encodedVideo"],ce(n));const s=i(t,["mimeType"]);return s!=null&&r(e,["encoding"],s),e}function Mn(t){const e={},o=i(t,["uri"]);o!=null&&r(e,["gcsUri"],o);const n=i(t,["videoBytes"]);n!=null&&r(e,["bytesBase64Encoded"],ce(n));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qa(t,e){const o={},n=i(t,["displayName"]);return e!==void 0&&n!=null&&r(e,["displayName"],n),o}function Za(t){const e={},o=i(t,["config"]);return o!=null&&Qa(o,e),e}function ja(t,e){const o={},n=i(t,["force"]);return e!==void 0&&n!=null&&r(e,["_query","force"],n),o}function eu(t){const e={},o=i(t,["name"]);o!=null&&r(e,["_url","name"],o);const n=i(t,["config"]);return n!=null&&ja(n,e),e}function tu(t){const e={},o=i(t,["name"]);return o!=null&&r(e,["_url","name"],o),e}function ou(t,e){const o={},n=i(t,["customMetadata"]);if(e!==void 0&&n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["customMetadata"],l)}const s=i(t,["chunkingConfig"]);return e!==void 0&&s!=null&&r(e,["chunkingConfig"],s),o}function nu(t){const e={},o=i(t,["name"]);o!=null&&r(e,["name"],o);const n=i(t,["metadata"]);n!=null&&r(e,["metadata"],n);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],su(a)),e}function iu(t){const e={},o=i(t,["fileSearchStoreName"]);o!=null&&r(e,["_url","file_search_store_name"],o);const n=i(t,["fileName"]);n!=null&&r(e,["fileName"],n);const s=i(t,["config"]);return s!=null&&ou(s,e),e}function su(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["parent"]);n!=null&&r(e,["parent"],n);const s=i(t,["documentName"]);return s!=null&&r(e,["documentName"],s),e}function ru(t,e){const o={},n=i(t,["pageSize"]);e!==void 0&&n!=null&&r(e,["_query","pageSize"],n);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),o}function lu(t){const e={},o=i(t,["config"]);return o!=null&&ru(o,e),e}function au(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const s=i(t,["fileSearchStores"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["fileSearchStores"],l)}return e}function kn(t,e){const o={},n=i(t,["mimeType"]);e!==void 0&&n!=null&&r(e,["mimeType"],n);const s=i(t,["displayName"]);e!==void 0&&s!=null&&r(e,["displayName"],s);const l=i(t,["customMetadata"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(c=>c)),r(e,["customMetadata"],u)}const a=i(t,["chunkingConfig"]);return e!==void 0&&a!=null&&r(e,["chunkingConfig"],a),o}function uu(t){const e={},o=i(t,["fileSearchStoreName"]);o!=null&&r(e,["_url","file_search_store_name"],o);const n=i(t,["config"]);return n!=null&&kn(n,e),e}function du(t){const e={},o=i(t,["sdkHttpResponse"]);return o!=null&&r(e,["sdkHttpResponse"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cu="Content-Type",fu="X-Server-Timeout",pu="User-Agent",dt="x-goog-api-client",mu="1.36.0",hu=`google-genai-sdk/${mu}`,gu="v1beta1",vu="v1beta";class yu{constructor(e){var o,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:gu,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:vu,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),o=new URL(e);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,o,n){const s=[this.getRequestUrlInternal(o)];return n&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,o,n);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))s.searchParams.append(a,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,o,s.toString(),e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,o){const n=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(o))typeof l=="object"?n[s]=Object.assign(Object.assign({},n[s]),l):l!==void 0&&(n[s]=l);return n}async requestStream(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,o,n);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,o,s.toString(),e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,o,n,s){if(o&&o.timeout||s){const l=new AbortController,a=l.signal;if(o.timeout&&(o==null?void 0:o.timeout)>0){const u=setTimeout(()=>l.abort(),o.timeout);u&&typeof u.unref=="function"&&u.unref()}s&&s.addEventListener("abort",()=>{l.abort()}),e.signal=a}return o&&o.extraBody!==null&&Nu(e,o.extraBody),e.headers=await this.getHeadersInternal(o,n),e}async unaryApiCall(e,o,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:n})).then(async s=>(await Qo(s),new st(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,o,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:n})).then(async s=>(await Qo(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return oe(this,arguments,function*(){var n;const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let a="";const u="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield M(s.read());if(d){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=l.decode(f,{stream:!0});try{const v=JSON.parse(m);if("error"in v){const N=JSON.parse(JSON.stringify(v.error)),y=N.status,E=N.code,T=`got status: ${y}. ${JSON.stringify(v)}`;if(E>=400&&E<600)throw new ze({message:T,status:E})}}catch(v){if(v.name==="ApiError")throw v}a+=m;let p=-1,g=0;for(;;){p=-1,g=0;for(const y of c){const E=a.indexOf(y);E!==-1&&(p===-1||E<p)&&(p=E,g=y.length)}if(p===-1)break;const v=a.substring(0,p);a=a.substring(p+g);const N=v.trim();if(N.startsWith(u)){const y=N.substring(u.length).trim();try{const E=new Response(y,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield M(new st(E))}catch(E){throw new Error(`exception parsing stream chunk ${y}. ${E}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,o){return fetch(e,o).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},o=hu+" "+this.clientOptions.userAgentExtra;return e[pu]=o,e[dt]=o,e[cu]="application/json",e}async getHeadersInternal(e,o){const n=new Headers;if(e&&e.headers){for(const[s,l]of Object.entries(e.headers))n.append(s,l);e.timeout&&e.timeout>0&&n.append(fu,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,o),n}getFileName(e){var o;let n="";return typeof e=="string"&&(n=e.replace(/[/\\]+$/,""),n=(o=n.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),n}async uploadFile(e,o){var n;const s={};o!=null&&(s.mimeType=o.mimeType,s.name=o.name,s.displayName=o.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);s.sizeBytes=String(a.size);const u=(n=o==null?void 0:o.mimeType)!==null&&n!==void 0?n:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=u;const c={file:s},d=this.getFileName(e),f=_("upload/v1beta/files",c._url),m=await this.fetchUploadUrl(f,s.sizeBytes,s.mimeType,d,c,o==null?void 0:o.httpOptions);return l.upload(e,m,this)}async uploadFileToFileSearchStore(e,o,n){var s;const l=this.clientOptions.uploader,a=await l.stat(o),u=String(a.size),c=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(o),m={};n!=null&&kn(n,m);const p=await this.fetchUploadUrl(d,u,c,f,m,n==null?void 0:n.httpOptions);return l.uploadToFileSearchStore(o,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,o,n,s,l,a){var u;let c={};a?c=a:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${n}`},s?{"X-Goog-Upload-File-Name":s}:{})};const d=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=d==null?void 0:d.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Qo(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const o=t.status;let n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(n);throw o>=400&&o<600?new ze({message:s,status:o}):new Error(s)}}function Nu(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))o=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(l,a){const u=Object.assign({},l);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c)){const d=a[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=n(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const s=n(o,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Eu="mcp_used/unknown";let Tu=!1;function Un(t){for(const e of t)if(Su(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Tu}function Vn(t){var e;const o=(e=t[dt])!==null&&e!==void 0?e:"";t[dt]=(o+` ${Eu}`).trimStart()}function Su(t){return t!==null&&typeof t=="object"&&t instanceof xt}function Cu(t){return oe(this,arguments,function*(o,n=100){let s,l=0;for(;l<n;){const a=yield M(o.listTools({cursor:s}));for(const u of a.tools)yield yield M(u),l++;if(!a.nextCursor)break;s=a.nextCursor}})}class xt{constructor(e=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=o}static create(e,o){return new xt(e,o)}async initialize(){var e,o,n,s;if(this.mcpTools.length>0)return;const l={},a=[];for(const f of this.mcpClients)try{for(var u=!0,c=(o=void 0,ne(Cu(f))),d;d=await c.next(),e=d.done,!e;u=!0){s=d.value,u=!1;const m=s;a.push(m);const p=m.name;if(l[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);l[p]=f}}catch(m){o={error:m}}finally{try{!u&&!e&&(n=c.return)&&await n.call(c)}finally{if(o)throw o.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),es(this.mcpTools,this.config)}async callTool(e){await this.initialize();const o=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[n.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await s.callTool({name:n.name,arguments:n.args},void 0,l);o.push({functionResponse:{name:n.name,response:a.isError?{error:a}:a}})}return o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function xu(t,e,o){const n=new zi;let s;o.data instanceof Blob?s=JSON.parse(await o.data.text()):s=JSON.parse(o.data),Object.assign(n,s),e(n)}class _u{constructor(e,o,n){this.apiClient=e,this.auth=o,this.webSocketFactory=n}async connect(e){var o,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=wu(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const f=new Promise(S=>{d=S}),m=e.callbacks,p=function(){d({})},g=this.apiClient,v={onopen:p,onmessage:S=>{xu(g,m.onmessage,S)},onerror:(o=m==null?void 0:m.onerror)!==null&&o!==void 0?o:function(S){},onclose:(n=m==null?void 0:m.onclose)!==null&&n!==void 0?n:function(S){}},N=this.webSocketFactory.create(c,Iu(a),v);N.connect(),await f;const T={setup:{model:F(this.apiClient,e.model)}};return N.send(JSON.stringify(T)),new Du(N,this.apiClient)}}class Du{constructor(e,o){this.conn=e,this.apiClient=o}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=Qr(e);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const o=Xr(e);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const o={playbackControl:e};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Te.PLAY)}pause(){this.sendPlaybackControl(Te.PAUSE)}stop(){this.sendPlaybackControl(Te.STOP)}resetContext(){this.sendPlaybackControl(Te.RESET_CONTEXT)}close(){this.conn.close()}}function Iu(t){const e={};return t.forEach((o,n)=>{e[n]=o}),e}function wu(t){const e=new Headers;for(const[o,n]of Object.entries(t))e.append(o,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Au="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function bu(t,e,o){const n=new Ki;let s;o.data instanceof Blob?s=await o.data.text():o.data instanceof ArrayBuffer?s=new TextDecoder().decode(o.data):s=o.data;const l=JSON.parse(s);if(t.isVertexAI()){const a=el(l);Object.assign(n,a)}else Object.assign(n,l);e(n)}class Ru{constructor(e,o,n){this.apiClient=e,this.auth=o,this.webSocketFactory=n,this.music=new _u(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var o,n,s,l,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&Un(e.config.tools)&&Vn(m);const p=Uu(m);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,f);else{const A=this.apiClient.getApiKey();let k="BidiGenerateContent",H="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",H="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${k}?${H}=${A}`}let g=()=>{};const v=new Promise(A=>{g=A}),N=e.callbacks,y=function(){var A;(A=N==null?void 0:N.onopen)===null||A===void 0||A.call(N),g({})},E=this.apiClient,T={onopen:y,onmessage:A=>{bu(E,N.onmessage,A)},onerror:(o=N==null?void 0:N.onerror)!==null&&o!==void 0?o:function(A){},onclose:(n=N==null?void 0:N.onclose)!==null&&n!==void 0?n:function(A){}},S=this.webSocketFactory.create(f,ku(p),T);S.connect(),await v;let C=F(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&C.startsWith("publishers/")){const A=this.apiClient.getProject(),k=this.apiClient.getLocation();C=`projects/${A}/locations/${k}/`+C}let I={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Me.AUDIO]}:e.config.responseModalities=[Me.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],R=[];for(const A of P)if(this.isCallableTool(A)){const k=A;R.push(await k.tool())}else R.push(A);R.length>0&&(e.config.tools=R);const J={model:C,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?I=Or(this.apiClient,J):I=Yr(this.apiClient,J),delete I.config,S.send(JSON.stringify(I)),new Mu(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Pu={turnComplete:!0};class Mu{constructor(e,o){this.conn=e,this.apiClient=o}tLiveClientContent(e,o){if(o.turns!==null&&o.turns!==void 0){let n=[];try{n=j(o.turns),e.isVertexAI()||(n=n.map(s=>We(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:n,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(e,o){let n=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?n=o.functionResponses:n=[o.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const l of n){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Au)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Pu),e);const o=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(o))}sendRealtimeInput(e){let o={};this.apiClient.isVertexAI()?o={realtimeInput:jr(e)}:o={realtimeInput:Zr(e)},this.conn.send(JSON.stringify(o))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function ku(t){const e={};return t.forEach((o,n)=>{e[n]=o}),e}function Uu(t){const e=new Headers;for(const[o,n]of Object.entries(t))e.append(o,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zo=10;function jo(t){var e,o,n;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const a of(o=t==null?void 0:t.tools)!==null&&o!==void 0?o:[])if(xe(a)){s=!0;break}if(!s)return!0;const l=(n=t==null?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function xe(t){return"callTool"in t&&typeof t.callTool=="function"}function Vu(t){var e,o,n;return(n=(o=(e=t.config)===null||e===void 0?void 0:e.tools)===null||o===void 0?void 0:o.some(s=>xe(s)))!==null&&n!==void 0?n:!1}function en(t){var e;const o=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((n,s)=>{if(xe(n))return;const l=n;l.functionDeclarations&&l.functionDeclarations.length>0&&o.push(s)}),o}function tn(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lu extends ae{constructor(e){super(),this.apiClient=e,this.generateContent=async o=>{var n,s,l,a,u;const c=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!Vu(o)||jo(o.config))return await this.generateContentInternal(c);const d=en(o);if(d.length>0){const N=d.map(y=>`tools[${y}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let f,m;const p=j(c.contents),g=(l=(s=(n=c.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:Zo;let v=0;for(;v<g&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const N=f.candidates[0].content,y=[];for(const E of(u=(a=o.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(xe(E)){const S=await E.callTool(f.functionCalls);y.push(...S)}v++,m={role:"user",parts:y},c.contents=j(c.contents),c.contents.push(N),c.contents.push(m),tn(c.config)&&(p.push(N),p.push(m))}return tn(c.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async o=>{var n,s,l,a,u;if(this.maybeMoveToResponseJsonSchem(o),jo(o.config)){const m=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(m)}const c=en(o);if(c.length>0){const m=c.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(l=(s=(n=o==null?void 0:o.config)===null||n===void 0?void 0:n.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,f=(u=(a=o==null?void 0:o.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(n=>{var s;let l;const a=[];if(n!=null&&n.generatedImages)for(const c of n.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((s=c==null?void 0:c.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=c==null?void 0:c.safetyAttributes:a.push(c);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:n.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:n.sdkHttpResponse},u}),this.list=async o=>{var n;const a={config:Object.assign(Object.assign({},{queryBase:!0}),o==null?void 0:o.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((n=a.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new ge(le.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async o=>{const n={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(n.referenceImages=o.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async o=>{let n={numberOfImages:1,mode:"upscale"};o.config&&(n=Object.assign(Object.assign({},n),o.config));const s={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:n};return await this.upscaleImageInternal(s)},this.generateVideos=async o=>{var n,s,l,a,u,c;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=o.video)===null||n===void 0)&&n.uri&&(!((s=o.video)===null||s===void 0)&&s.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((a=(l=o.source)===null||l===void 0?void 0:l.video)===null||a===void 0)&&a.uri&&(!((c=(u=o.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var o,n,s;const l=(o=e.config)===null||o===void 0?void 0:o.tools;if(!l)return e;const a=await Promise.all(l.map(async c=>xe(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&Un(e.config.tools)){const c=(s=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&s!==void 0?s:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Vn(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var o,n,s;const l=new Map;for(const a of(n=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&n!==void 0?n:[])if(xe(a)){const u=a,c=await u.tool();for(const d of(s=c.functionDeclarations)!==null&&s!==void 0?s:[]){if(!d.name)throw new Error("Function declaration name is required.");if(l.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);l.set(d.name,u)}}return l}async processAfcStream(e){var o,n,s;const l=(s=(n=(o=e.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&s!==void 0?s:Zo;let a=!1,u=0;const c=await this.initAfcToolsMap(e);return(function(d,f,m){return oe(this,arguments,function*(){for(var p,g,v,N,y,E;u<l;){a&&(u++,a=!1);const I=yield M(d.processParamsMaybeAddMcpUsage(m)),P=yield M(d.generateContentStreamInternal(I)),R=[],J=[];try{for(var T=!0,S=(g=void 0,ne(P)),C;C=yield M(S.next()),p=C.done,!p;T=!0){N=C.value,T=!1;const A=N;if(yield yield M(A),A.candidates&&(!((y=A.candidates[0])===null||y===void 0)&&y.content)){J.push(A.candidates[0].content);for(const k of(E=A.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(u<l&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(k.functionCall.name)){const H=yield M(f.get(k.functionCall.name).callTool([k.functionCall]));R.push(...H)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(A){g={error:A}}finally{try{!T&&!p&&(v=S.return)&&(yield M(v.call(S)))}finally{if(g)throw g.error}}if(R.length>0){a=!0;const A=new Ae;A.candidates=[{content:{role:"user",parts:R}}],yield yield M(A);const k=[];k.push(...J),k.push({role:"user",parts:R});const H=j(m.contents).concat(k);m.contents=H}else break}})})(this,c,e)}async generateContentInternal(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Yo(this.apiClient,e);return u=_("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Xo(f),p=new Ae;return Object.assign(p,m),p})}else{const d=Wo(this.apiClient,e);return u=_("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Oo(f),p=new Ae;return Object.assign(p,m),p})}}async generateContentStreamInternal(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Yo(this.apiClient,e);return u=_("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),a.then(function(m){return oe(this,arguments,function*(){var p,g,v,N;try{for(var y=!0,E=ne(m),T;T=yield M(E.next()),p=T.done,!p;y=!0){N=T.value,y=!1;const S=N,C=Xo(yield M(S.json()));C.sdkHttpResponse={headers:S.headers};const I=new Ae;Object.assign(I,C),yield yield M(I)}}catch(S){g={error:S}}finally{try{!y&&!p&&(v=E.return)&&(yield M(v.call(E)))}finally{if(g)throw g.error}}})})}else{const d=Wo(this.apiClient,e);return u=_("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(m){return oe(this,arguments,function*(){var p,g,v,N;try{for(var y=!0,E=ne(m),T;T=yield M(E.next()),p=T.done,!p;y=!0){N=T.value,y=!1;const S=N,C=Oo(yield M(S.json()));C.sdkHttpResponse={headers:S.headers};const I=new Ae;Object.assign(I,C),yield yield M(I)}}catch(S){g={error:S}}finally{try{!y&&!p&&(v=E.return)&&(yield M(v.call(E)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Rl(this.apiClient,e);return u=_("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Ml(f),p=new bo;return Object.assign(p,m),p})}else{const d=bl(this.apiClient,e);return u=_("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Pl(f),p=new bo;return Object.assign(p,m),p})}}async generateImagesInternal(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=$l(this.apiClient,e);return u=_("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=zl(f),p=new Ro;return Object.assign(p,m),p})}else{const d=ql(this.apiClient,e);return u=_("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Kl(f),p=new Ro;return Object.assign(p,m),p})}}async editImageInternal(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Dl(this.apiClient,e);return l=_("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Il(c),f=new ki;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=$a(this.apiClient,e);return l=_("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Ka(c),f=new Ui;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=_a(this.apiClient,e);return l=_("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>{const d=Da(c),f=new Vi;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Pa(this.apiClient,e);return l=_("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>{const d=Ma(c),f=new Li;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=ua(this.apiClient,e);return u=_("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>ut(f))}else{const d=aa(this.apiClient,e);return u=_("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>at(f))}}async listInternal(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=ya(this.apiClient,e);return u=_("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Ea(f),p=new Po;return Object.assign(p,m),p})}else{const d=va(this.apiClient,e);return u=_("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Na(f),p=new Po;return Object.assign(p,m),p})}}async update(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Ba(this.apiClient,e);return u=_("{model}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>ut(f))}else{const d=Ha(this.apiClient,e);return u=_("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>at(f))}}async delete(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Sl(this.apiClient,e);return u=_("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=xl(f),p=new Mo;return Object.assign(p,m),p})}else{const d=Tl(this.apiClient,e);return u=_("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Cl(f),p=new Mo;return Object.assign(p,m),p})}}async countTokens(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=yl(this.apiClient,e);return u=_("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=El(f),p=new ko;return Object.assign(p,m),p})}else{const d=vl(this.apiClient,e);return u=_("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Nl(f),p=new ko;return Object.assign(p,m),p})}}async computeTokens(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=dl(this.apiClient,e);return l=_("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=cl(c),f=new Fi;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Zl(this.apiClient,e);return u=_("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a.then(f=>{const m=Xl(f),p=new He;return Object.assign(p,m),p})}else{const d=Ql(this.apiClient,e);return u=_("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const m=Ol(f),p=new He;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fu extends ae{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const o=e.operation,n=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=o.name.split("/operations/")[0];let l;n&&"httpOptions"in n&&(l=n.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:s,config:{httpOptions:l}});return o._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:o.name,config:n});return o._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const o=e.operation,n=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=o.name.split("/operations/")[0];let l;n&&"httpOptions"in n&&(l=n.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:s,config:{httpOptions:l}});return o._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:o.name,config:n});return o._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=wi(e);return u=_("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),a}else{const d=Ii(e);return u=_("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a}}async fetchPredictVideosOperationInternal(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Ei(e);return l=_("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gu(t){const e={},o=i(t,["data"]);if(o!=null&&r(e,["data"],o),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["mimeType"]);return n!=null&&r(e,["mimeType"],n),e}function Ju(t){const e={},o=i(t,["parts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Ou(l))),r(e,["parts"],s)}const n=i(t,["role"]);return n!=null&&r(e,["role"],n),e}function Hu(t,e,o){const n={},s=i(e,["expireTime"]);o!==void 0&&s!=null&&r(o,["expireTime"],s);const l=i(e,["newSessionExpireTime"]);o!==void 0&&l!=null&&r(o,["newSessionExpireTime"],l);const a=i(e,["uses"]);o!==void 0&&a!=null&&r(o,["uses"],a);const u=i(e,["liveConnectConstraints"]);o!==void 0&&u!=null&&r(o,["bidiGenerateContentSetup"],Yu(t,u));const c=i(e,["lockAdditionalFields"]);return o!==void 0&&c!=null&&r(o,["fieldMask"],c),n}function Bu(t,e){const o={},n=i(e,["config"]);return n!=null&&r(o,["config"],Hu(t,n,o)),o}function qu(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const n=i(t,["mimeType"]);return n!=null&&r(e,["mimeType"],n),e}function $u(t){const e={},o=i(t,["id"]);o!=null&&r(e,["id"],o);const n=i(t,["args"]);n!=null&&r(e,["args"],n);const s=i(t,["name"]);if(s!=null&&r(e,["name"],s),i(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(i(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ku(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=i(t,["enableWidget"]);return o!=null&&r(e,["enableWidget"],o),e}function zu(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=i(t,["timeRangeFilter"]);return o!=null&&r(e,["timeRangeFilter"],o),e}function Wu(t,e){const o={},n=i(t,["generationConfig"]);e!==void 0&&n!=null&&r(e,["setup","generationConfig"],n);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const c=i(t,["maxOutputTokens"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","maxOutputTokens"],c);const d=i(t,["mediaResolution"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","mediaResolution"],d);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const m=i(t,["speechConfig"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","speechConfig"],Ct(m));const p=i(t,["thinkingConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","thinkingConfig"],p);const g=i(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=i(t,["systemInstruction"]);e!==void 0&&v!=null&&r(e,["setup","systemInstruction"],Ju(X(v)));const N=i(t,["tools"]);if(e!==void 0&&N!=null){let P=De(N);Array.isArray(P)&&(P=P.map(R=>Qu(_e(R)))),r(e,["setup","tools"],P)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],Xu(y));const E=i(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&r(e,["setup","inputAudioTranscription"],E);const T=i(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&r(e,["setup","outputAudioTranscription"],T);const S=i(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&r(e,["setup","realtimeInputConfig"],S);const C=i(t,["contextWindowCompression"]);e!==void 0&&C!=null&&r(e,["setup","contextWindowCompression"],C);const I=i(t,["proactivity"]);if(e!==void 0&&I!=null&&r(e,["setup","proactivity"],I),i(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function Yu(t,e){const o={},n=i(e,["model"]);n!=null&&r(o,["setup","model"],F(t,n));const s=i(e,["config"]);return s!=null&&r(o,["config"],Wu(s,o)),o}function Ou(t){const e={},o=i(t,["mediaResolution"]);o!=null&&r(e,["mediaResolution"],o);const n=i(t,["codeExecutionResult"]);n!=null&&r(e,["codeExecutionResult"],n);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],qu(l));const a=i(t,["functionCall"]);a!=null&&r(e,["functionCall"],$u(a));const u=i(t,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],Gu(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const f=i(t,["thought"]);f!=null&&r(e,["thought"],f);const m=i(t,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const p=i(t,["videoMetadata"]);return p!=null&&r(e,["videoMetadata"],p),e}function Xu(t){const e={},o=i(t,["handle"]);if(o!=null&&r(e,["handle"],o),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Qu(t){const e={};if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["computerUse"]);o!=null&&r(e,["computerUse"],o);const n=i(t,["fileSearch"]);n!=null&&r(e,["fileSearch"],n);const s=i(t,["codeExecution"]);if(s!=null&&r(e,["codeExecution"],s),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=i(t,["functionDeclarations"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>m)),r(e,["functionDeclarations"],f)}const a=i(t,["googleMaps"]);a!=null&&r(e,["googleMaps"],Ku(a));const u=i(t,["googleSearch"]);u!=null&&r(e,["googleSearch"],zu(u));const c=i(t,["googleSearchRetrieval"]);c!=null&&r(e,["googleSearchRetrieval"],c);const d=i(t,["urlContext"]);return d!=null&&r(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zu(t){const e=[];for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)){const n=t[o];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const s=Object.keys(n).map(l=>`${o}.${l}`);e.push(...s)}else e.push(o)}return e.join(",")}function ju(t,e){let o=null;const n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const l=n.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,o=l):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(o){const l=Zu(o);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];s.length>0&&(u=s.map(d=>a.includes(d)?`generationConfig.${d}`:d));const c=[];l&&c.push(l),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class ed extends ae{constructor(e){super(),this.apiClient=e}async create(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Bu(this.apiClient,e);l=_("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const c=ju(u,e.config);return s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),s.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function td(t,e){const o={},n=i(t,["force"]);return e!==void 0&&n!=null&&r(e,["_query","force"],n),o}function od(t){const e={},o=i(t,["name"]);o!=null&&r(e,["_url","name"],o);const n=i(t,["config"]);return n!=null&&td(n,e),e}function nd(t){const e={},o=i(t,["name"]);return o!=null&&r(e,["_url","name"],o),e}function id(t,e){const o={},n=i(t,["pageSize"]);e!==void 0&&n!=null&&r(e,["_query","pageSize"],n);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),o}function sd(t){const e={},o=i(t,["parent"]);o!=null&&r(e,["_url","parent"],o);const n=i(t,["config"]);return n!=null&&id(n,e),e}function rd(t){const e={},o=i(t,["sdkHttpResponse"]);o!=null&&r(e,["sdkHttpResponse"],o);const n=i(t,["nextPageToken"]);n!=null&&r(e,["nextPageToken"],n);const s=i(t,["documents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ld extends ae{constructor(e){super(),this.apiClient=e,this.list=async o=>new ge(le.PAGED_ITEM_DOCUMENTS,n=>this.listInternal({parent:o.parent,config:n.config}),await this.listInternal(o),o)}async get(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=nd(e);return l=_("{name}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(e){var o,n;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=od(e);s=_("{name}",a._url),l=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=sd(e);return l=_("{parent}/documents",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>{const d=rd(c),f=new Gi;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ad extends ae{constructor(e,o=new ld(e)){super(),this.apiClient=e,this.documents=o,this.list=async(n={})=>new ge(le.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(n),n)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Za(e);return l=_("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async get(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=tu(e);return l=_("{name}",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(e){var o,n;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=eu(e);s=_("{name}",a._url),l=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lu(e);return l=_("fileSearchStores",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>{const d=au(c),f=new Ji;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=uu(e);return l=_("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>{const d=du(c),f=new Hi;return Object.assign(f,d),f})}}async importFile(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=iu(e);return l=_("{file_search_store_name}:importFile",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>{const d=nu(c),f=new yt;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ln=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Ln=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),o=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^o()&15>>+n/4).toString(16))};const ud=()=>Ln();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ct(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ft=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ee extends Error{}class Z extends ee{constructor(e,o,n,s){super(`${Z.makeMessage(e,o,n)}`),this.status=e,this.headers=s,this.error=o}static makeMessage(e,o,n){const s=o!=null&&o.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):n;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,o,n,s){if(!e||!s)return new Xe({message:n,cause:ft(o)});const l=o;return e===400?new Gn(e,l,n,s):e===401?new Jn(e,l,n,s):e===403?new Hn(e,l,n,s):e===404?new Bn(e,l,n,s):e===409?new qn(e,l,n,s):e===422?new $n(e,l,n,s):e===429?new Kn(e,l,n,s):e>=500?new zn(e,l,n,s):new Z(e,l,n,s)}}class pt extends Z{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Xe extends Z{constructor({message:e,cause:o}){super(void 0,void 0,e||"Connection error.",void 0),o&&(this.cause=o)}}class Fn extends Xe{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Gn extends Z{}class Jn extends Z{}class Hn extends Z{}class Bn extends Z{}class qn extends Z{}class $n extends Z{}class Kn extends Z{}class zn extends Z{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dd=/^[a-z][a-z0-9+.-]*:/i,cd=t=>dd.test(t);let mt=t=>(mt=Array.isArray,mt(t));const fd=mt;let pd=fd;const on=pd;function md(t){if(!t)return!0;for(const e in t)return!1;return!0}function hd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const gd=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ee(`${t} must be an integer`);if(e<0)throw new ee(`${t} must be a positive integer`);return e},vd=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yd=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ee="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nd(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Ed=()=>{var t,e,o,n,s;const l=Nd();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ee,"X-Stainless-OS":sn(Deno.build.os),"X-Stainless-Arch":nn(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ee,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ee,"X-Stainless-OS":sn((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":nn((n=globalThis.process.arch)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const a=Td();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ee,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ee,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Td(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:o}of t){const n=o.exec(navigator.userAgent);if(n){const s=n[1]||0,l=n[2]||0,a=n[3]||0;return{browser:e,version:`${s}.${l}.${a}`}}}return null}const nn=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",sn=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ke;const Sd=()=>ke??(ke=Ed());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cd(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Wn(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function xd(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Wn({start(){},async pull(o){const{done:n,value:s}=await e.next();n?o.close():o.enqueue(s)},async cancel(){var o;await((o=e.return)===null||o===void 0?void 0:o.call(e))}})}function Yn(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const o=await e.read();return o!=null&&o.done&&e.releaseLock(),o}catch(o){throw e.releaseLock(),o}},async return(){const o=e.cancel();return e.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function _d(t){var e,o;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((o=(e=t[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(e));return}const n=t.getReader(),s=n.cancel();n.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dd=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const On=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,o=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function je(t,e,o){return On(),new File(t,e??"unknown_file",o)}function Id(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const wd=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xn=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Ad=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Xn(t),bd=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Rd(t,e,o){if(On(),t=await t,Ad(t))return t instanceof File?t:je([await t.arrayBuffer()],t.name);if(bd(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),je(await ht(s),e,o)}const n=await ht(t);if(e||(e=Id(t)),!(o!=null&&o.type)){const s=n.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof s=="string"&&(o=Object.assign(Object.assign({},o),{type:s}))}return je(n,e,o)}async function ht(t){var e,o,n,s,l;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(Xn(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(wd(t))try{for(var u=!0,c=ne(t),d;d=await c.next(),e=d.done,!e;u=!0){s=d.value,u=!1;const f=s;a.push(...await ht(f))}}catch(f){o={error:f}}finally{try{!u&&!e&&(n=c.return)&&await n.call(c)}finally{if(o)throw o.error}}else{const f=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${Pd(t)}`)}return a}function Pd(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(o=>`"${o}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qn{constructor(e){this._client=e}}Qn._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zn(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const rn=Object.freeze(Object.create(null)),Md=(t=Zn)=>(function(o,...n){if(o.length===1)return o[0];let s=!1;const l=[],a=o.reduce((f,m,p)=>{var g,v,N;/[?#]/.test(m)&&(s=!0);const y=n[p];let E=(s?encodeURIComponent:t)(""+y);return p!==n.length&&(y==null||typeof y=="object"&&y.toString===((N=Object.getPrototypeOf((v=Object.getPrototypeOf((g=y.hasOwnProperty)!==null&&g!==void 0?g:rn))!==null&&v!==void 0?v:rn))===null||N===void 0?void 0:N.toString))&&(E=y+"",l.push({start:f.length+m.length,length:E.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),f+m+(p===n.length?"":E)},""),u=a.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(u))!==null;)l.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(l.sort((f,m)=>f.start-m.start),l.length>0){let f=0;const m=l.reduce((p,g)=>{const v=" ".repeat(g.start-f),N="^".repeat(g.length);return f=g.start+g.length,p+v+N},"");throw new ee(`Path parameters result in path with invalid segments:
${l.map(p=>p.error).join(`
`)}
${a}
${m}`)}return a}),Ue=Md(Zn);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jn extends Qn{create(e,o){var n;const{api_version:s=this._client.apiVersion}=e,l=qe(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new ee("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new ee("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ue`/${s}/interactions`,Object.assign(Object.assign({body:l},o),{stream:(n=e.stream)!==null&&n!==void 0?n:!1}))}delete(e,o={},n){const{api_version:s=this._client.apiVersion}=o??{};return this._client.delete(Ue`/${s}/interactions/${e}`,n)}cancel(e,o={},n){const{api_version:s=this._client.apiVersion}=o??{};return this._client.post(Ue`/${s}/interactions/${e}/cancel`,n)}get(e,o={},n){var s;const l=o??{},{api_version:a=this._client.apiVersion}=l,u=qe(l,["api_version"]);return this._client.get(Ue`/${a}/interactions/${e}`,Object.assign(Object.assign({query:u},n),{stream:(s=o==null?void 0:o.stream)!==null&&s!==void 0?s:!1}))}}jn._key=Object.freeze(["interactions"]);class ei extends jn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kd(t){let e=0;for(const s of t)e+=s.length;const o=new Uint8Array(e);let n=0;for(const s of t)o.set(s,n),n+=s.length;return o}let Ve;function _t(t){let e;return(Ve??(e=new globalThis.TextEncoder,Ve=e.encode.bind(e)))(t)}let Le;function ln(t){let e;return(Le??(e=new globalThis.TextDecoder,Le=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qe{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const o=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?_t(e):e;this.buffer=kd([this.buffer,o]);const n=[];let s;for(;(s=Ud(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){n.push(ln(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,a=ln(this.buffer.subarray(0,l));n.push(a),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode(`
`):[]}}Qe.NEWLINE_CHARS=new Set([`
`,"\r"]);Qe.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Ud(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function Vd(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $e={off:0,error:200,warn:300,info:400,debug:500},an=(t,e,o)=>{if(t){if(hd($e,t))return t;Q(o).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys($e))}`)}};function Re(){}function Fe(t,e,o){return!e||$e[t]>$e[o]?Re:e[t].bind(e)}const Ld={error:Re,warn:Re,info:Re,debug:Re};let un=new WeakMap;function Q(t){var e;const o=t.logger,n=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!o)return Ld;const s=un.get(o);if(s&&s[0]===n)return s[1];const l={error:Fe("error",o,n),warn:Fe("warn",o,n),info:Fe("info",o,n),debug:Fe("debug",o,n)};return un.set(o,[n,l]),l}const he=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,o])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Se{constructor(e,o,n){this.iterator=e,this.controller=o,this.client=n}static fromSSEResponse(e,o,n){let s=!1;const l=n?Q(n):console;function a(){return oe(this,arguments,function*(){var c,d,f,m;if(s)throw new ee("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let p=!1;try{try{for(var g=!0,v=ne(Fd(e,o)),N;N=yield M(v.next()),c=N.done,!c;g=!0){m=N.value,g=!1;const y=m;if(!p)if(y.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield M(JSON.parse(y.data))}catch(E){throw l.error("Could not parse message into JSON:",y.data),l.error("From chunk:",y.raw),E}}}catch(y){d={error:y}}finally{try{!g&&!c&&(f=v.return)&&(yield M(f.call(v)))}finally{if(d)throw d.error}}p=!0}catch(y){if(ct(y))return yield M(void 0);throw y}finally{p||o.abort()}})}return new Se(a,o,n)}static fromReadableStream(e,o,n){let s=!1;function l(){return oe(this,arguments,function*(){var c,d,f,m;const p=new Qe,g=Yn(e);try{for(var v=!0,N=ne(g),y;y=yield M(N.next()),c=y.done,!c;v=!0){m=y.value,v=!1;const E=m;for(const T of p.decode(E))yield yield M(T)}}catch(E){d={error:E}}finally{try{!v&&!c&&(f=N.return)&&(yield M(f.call(N)))}finally{if(d)throw d.error}}for(const E of p.flush())yield yield M(E)})}function a(){return oe(this,arguments,function*(){var c,d,f,m;if(s)throw new ee("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let p=!1;try{try{for(var g=!0,v=ne(l()),N;N=yield M(v.next()),c=N.done,!c;g=!0){m=N.value,g=!1;const y=m;p||y&&(yield yield M(JSON.parse(y)))}}catch(y){d={error:y}}finally{try{!g&&!c&&(f=v.return)&&(yield M(f.call(v)))}finally{if(d)throw d.error}}p=!0}catch(y){if(ct(y))return yield M(void 0);throw y}finally{p||o.abort()}})}return new Se(a,o,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],o=[],n=this.iterator(),s=l=>({next:()=>{if(l.length===0){const a=n.next();e.push(a),o.push(a)}return l.shift()}});return[new Se(()=>s(e),this.controller,this.client),new Se(()=>s(o),this.controller,this.client)]}toReadableStream(){const e=this;let o;return Wn({async start(){o=e[Symbol.asyncIterator]()},async pull(n){try{const{value:s,done:l}=await o.next();if(l)return n.close();const a=_t(JSON.stringify(s)+`
`);n.enqueue(a)}catch(s){n.error(s)}},async cancel(){var n;await((n=o.return)===null||n===void 0?void 0:n.call(o))}})}}function Fd(t,e){return oe(this,arguments,function*(){var n,s,l,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ee("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ee("Attempted to iterate over a response with no body");const u=new Jd,c=new Qe,d=Yn(t.body);try{for(var f=!0,m=ne(Gd(d)),p;p=yield M(m.next()),n=p.done,!n;f=!0){a=p.value,f=!1;const g=a;for(const v of c.decode(g)){const N=u.decode(v);N&&(yield yield M(N))}}}catch(g){s={error:g}}finally{try{!f&&!n&&(l=m.return)&&(yield M(l.call(m)))}finally{if(s)throw s.error}}for(const g of c.flush()){const v=u.decode(g);v&&(yield yield M(v))}})}function Gd(t){return oe(this,arguments,function*(){var o,n,s,l;let a=new Uint8Array;try{for(var u=!0,c=ne(t),d;d=yield M(c.next()),o=d.done,!o;u=!0){l=d.value,u=!1;const f=l;if(f==null)continue;const m=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?_t(f):f;let p=new Uint8Array(a.length+m.length);p.set(a),p.set(m,a.length),a=p;let g;for(;(g=Vd(a))!==-1;)yield yield M(a.slice(0,g)),a=a.slice(g)}}catch(f){n={error:f}}finally{try{!u&&!o&&(s=c.return)&&(yield M(s.call(c)))}finally{if(n)throw n.error}}a.length>0&&(yield yield M(a))})}class Jd{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[o,n,s]=Hd(e,":");return s.startsWith(" ")&&(s=s.substring(1)),o==="event"?this.event=s:o==="data"&&this.data.push(s),null}}function Hd(t,e){const o=t.indexOf(e);return o!==-1?[t.substring(0,o),e,t.substring(o+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Bd(t,e){const{response:o,requestLogID:n,retryOfRequestLogID:s,startTime:l}=e,a=await(async()=>{var u;if(e.options.stream)return Q(t).debug("response",o.status,o.url,o.headers,o.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(o,e.controller,t):Se.fromSSEResponse(o,e.controller,t);if(o.status===204)return null;if(e.options.__binaryResponse)return o;const c=o.headers.get("content-type"),d=(u=c==null?void 0:c.split(";")[0])===null||u===void 0?void 0:u.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await o.json():await o.text()})();return Q(t).debug(`[${n}] response parsed`,he({retryOfRequestLogID:s,url:o.url,status:o.status,body:a,durationMs:Date.now()-l})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dt extends Promise{constructor(e,o,n=Bd){super(s=>{s(null)}),this.responsePromise=o,this.parseResponse=n,this.client=e}_thenUnwrap(e){return new Dt(this.client,this.responsePromise,async(o,n)=>e(await this.parseResponse(o,n),n))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,o){return this.parse().then(e,o)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ti=Symbol("brand.privateNullableHeaders");function*qd(t){if(!t)return;if(ti in t){const{values:n,nulls:s}=t;yield*n.entries();for(const l of s)yield[l,null];return}let e=!1,o;t instanceof Headers?o=t.entries():on(t)?o=t:(e=!0,o=Object.entries(t??{}));for(let n of o){const s=n[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const l=on(n[1])?n[1]:[n[1]];let a=!1;for(const u of l)u!==void 0&&(e&&!a&&(a=!0,yield[s,null]),yield[s,u])}}const be=t=>{const e=new Headers,o=new Set;for(const n of t){const s=new Set;for(const[l,a]of qd(n)){const u=l.toLowerCase();s.has(u)||(e.delete(l),s.add(u)),a===null?(e.delete(l),o.add(u)):(e.append(l,a),o.delete(u))}}return{[ti]:!0,values:e,nulls:o}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const et=t=>{var e,o,n,s,l,a;if(typeof globalThis.process<"u")return(n=(o=(e=mi)===null||e===void 0?void 0:e[t])===null||o===void 0?void 0:o.trim())!==null&&n!==void 0?n:void 0;if(typeof globalThis.Deno<"u")return(a=(l=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||l===void 0?void 0:l.call(s,t))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var oi;class Ze{constructor(e){var o,n,s,l,a,u,c,{baseURL:d=et("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(o=et("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:m="v1beta"}=e,p=qe(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:f,apiVersion:m},p),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(n=g.timeout)!==null&&n!==void 0?n:Ze.DEFAULT_TIMEOUT,this.logger=(s=g.logger)!==null&&s!==void 0?s:console;const v="warn";this.logLevel=v,this.logLevel=(a=(l=an(g.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:an(et("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:v,this.fetchOptions=g.fetchOptions,this.maxRetries=(u=g.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(c=g.fetch)!==null&&c!==void 0?c:Cd(),this.encoder=Dd,this._options=g,this.apiKey=f,this.apiVersion=m,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:o}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const o=be([e.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return be([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return be([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([o,n])=>typeof n<"u").map(([o,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(o)}=`;throw new ee(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ee}`}defaultIdempotencyKey(){return`stainless-node-retry-${ud()}`}makeStatusError(e,o,n,s){return Z.generate(e,o,n,s)}buildURL(e,o,n){const s=!this.baseURLOverridden()&&n||this.baseURL,l=cd(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return md(a)||(o=Object.assign(Object.assign({},a),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(l.search=this.stringifyQuery(o)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const o=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(e,{url:o,options:n}){}get(e,o){return this.methodRequest("get",e,o)}post(e,o){return this.methodRequest("post",e,o)}patch(e,o){return this.methodRequest("patch",e,o)}put(e,o){return this.methodRequest("put",e,o)}delete(e,o){return this.methodRequest("delete",e,o)}methodRequest(e,o,n){return this.request(Promise.resolve(n).then(s=>Object.assign({method:e,path:o},s)))}request(e,o=null){return new Dt(this,this.makeRequest(e,o,void 0))}async makeRequest(e,o,n){var s,l,a;const u=await e,c=(s=u.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o==null&&(o=c),await this.prepareOptions(u);const{req:d,url:f,timeout:m}=await this.buildRequest(u,{retryCount:c-o});await this.prepareRequest(d,{url:f,options:u});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=n===void 0?"":`, retryOf: ${n}`,v=Date.now();if(Q(this).debug(`[${p}] sending request`,he({retryOfRequestLogID:n,method:u.method,url:f,options:u,headers:d.headers})),!((l=u.signal)===null||l===void 0)&&l.aborted)throw new pt;const N=new AbortController,y=await this.fetchWithTimeout(f,d,m,N).catch(ft),E=Date.now();if(y instanceof globalThis.Error){const S=`retrying, ${o} attempts remaining`;if(!((a=u.signal)===null||a===void 0)&&a.aborted)throw new pt;const C=ct(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(o)return Q(this).info(`[${p}] connection ${C?"timed out":"failed"} - ${S}`),Q(this).debug(`[${p}] connection ${C?"timed out":"failed"} (${S})`,he({retryOfRequestLogID:n,url:f,durationMs:E-v,message:y.message})),this.retryRequest(u,o,n??p);throw Q(this).info(`[${p}] connection ${C?"timed out":"failed"} - error; no more retries left`),Q(this).debug(`[${p}] connection ${C?"timed out":"failed"} (error; no more retries left)`,he({retryOfRequestLogID:n,url:f,durationMs:E-v,message:y.message})),C?new Fn:new Xe({cause:y})}const T=`[${p}${g}] ${d.method} ${f} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${E-v}ms`;if(!y.ok){const S=await this.shouldRetry(y);if(o&&S){const A=`retrying, ${o} attempts remaining`;return await _d(y.body),Q(this).info(`${T} - ${A}`),Q(this).debug(`[${p}] response error (${A})`,he({retryOfRequestLogID:n,url:y.url,status:y.status,headers:y.headers,durationMs:E-v})),this.retryRequest(u,o,n??p,y.headers)}const C=S?"error; no more retries left":"error; not retryable";Q(this).info(`${T} - ${C}`);const I=await y.text().catch(A=>ft(A).message),P=vd(I),R=P?void 0:I;throw Q(this).debug(`[${p}] response error (${C})`,he({retryOfRequestLogID:n,url:y.url,status:y.status,headers:y.headers,message:R,durationMs:Date.now()-v})),this.makeStatusError(y.status,P,R,y.headers)}return Q(this).info(T),Q(this).debug(`[${p}] response start`,he({retryOfRequestLogID:n,url:y.url,status:y.status,headers:y.headers,durationMs:E-v})),{response:y,options:u,controller:N,requestLogID:p,retryOfRequestLogID:n,startTime:v}}async fetchWithTimeout(e,o,n,s){const l=o||{},{signal:a,method:u}=l,c=qe(l,["signal","method"]);a&&a.addEventListener("abort",()=>s.abort());const d=setTimeout(()=>s.abort(),n),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m=Object.assign(Object.assign(Object.assign({signal:s.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);u&&(m.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(d)}}async shouldRetry(e){const o=e.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,o,n,s){var l;let a;const u=s==null?void 0:s.get("retry-after-ms");if(u){const d=parseFloat(u);Number.isNaN(d)||(a=d)}const c=s==null?void 0:s.get("retry-after");if(c&&!a){const d=parseFloat(c);Number.isNaN(d)?a=Date.parse(c)-Date.now():a=d*1e3}if(!(a&&0<=a&&a<60*1e3)){const d=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(o,d)}return await yd(a),this.makeRequest(e,o-1,n)}calculateDefaultRetryTimeoutMillis(e,o){const l=o-e,a=Math.min(.5*Math.pow(2,l),8),u=1-Math.random()*.25;return a*u*1e3}async buildRequest(e,{retryCount:o=0}={}){var n,s,l;const a=Object.assign({},e),{method:u,path:c,query:d,defaultBaseURL:f}=a,m=this.buildURL(c,d,f);"timeout"in a&&gd("timeout",a.timeout),a.timeout=(n=a.timeout)!==null&&n!==void 0?n:this.timeout;const{bodyHeaders:p,body:g}=this.buildBody({options:a}),v=await this.buildHeaders({options:e,method:u,bodyHeaders:p,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:v},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(l=a.fetchOptions)!==null&&l!==void 0?l:{}),url:m,timeout:a.timeout}}async buildHeaders({options:e,method:o,bodyHeaders:n,retryCount:s}){let l={};this.idempotencyHeader&&o!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let u=be([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Sd()),this._options.defaultHeaders,n,e.headers,a]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:o}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=be([o]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:xd(e)}:this.encoder({body:e,headers:n})}}Ze.DEFAULT_TIMEOUT=6e4;class W extends Ze{constructor(){super(...arguments),this.interactions=new ei(this)}}oi=W;W.GeminiNextGenAPIClient=oi;W.GeminiNextGenAPIClientError=ee;W.APIError=Z;W.APIConnectionError=Xe;W.APIConnectionTimeoutError=Fn;W.APIUserAbortError=pt;W.NotFoundError=Bn;W.ConflictError=qn;W.RateLimitError=Kn;W.BadRequestError=Gn;W.AuthenticationError=Jn;W.InternalServerError=zn;W.PermissionDeniedError=Hn;W.UnprocessableEntityError=$n;W.toFile=Rd;W.Interactions=ei;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $d(t,e){const o={},n=i(t,["name"]);return n!=null&&r(o,["_url","name"],n),o}function Kd(t,e){const o={},n=i(t,["name"]);return n!=null&&r(o,["_url","name"],n),o}function zd(t,e){const o={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(o,["sdkHttpResponse"],n),o}function Wd(t,e){const o={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(o,["sdkHttpResponse"],n),o}function Yd(t,e,o){const n={};if(i(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=i(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&r(e,["displayName"],s),i(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=i(t,["epochCount"]);e!==void 0&&l!=null&&r(e,["tuningTask","hyperparameters","epochCount"],l);const a=i(t,["learningRateMultiplier"]);if(a!=null&&r(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),i(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(i(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=i(t,["batchSize"]);e!==void 0&&u!=null&&r(e,["tuningTask","hyperparameters","batchSize"],u);const c=i(t,["learningRate"]);if(e!==void 0&&c!=null&&r(e,["tuningTask","hyperparameters","learningRate"],c),i(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(i(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return n}function Od(t,e,o){const n={};let s=i(o,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const g=i(t,["validationDataset"]);e!==void 0&&g!=null&&r(e,["supervisedTuningSpec"],dn(g))}else if(s==="PREFERENCE_TUNING"){const g=i(t,["validationDataset"]);e!==void 0&&g!=null&&r(e,["preferenceOptimizationSpec"],dn(g))}const l=i(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&r(e,["tunedModelDisplayName"],l);const a=i(t,["description"]);e!==void 0&&a!=null&&r(e,["description"],a);let u=i(o,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=i(t,["epochCount"]);e!==void 0&&g!=null&&r(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(u==="PREFERENCE_TUNING"){const g=i(t,["epochCount"]);e!==void 0&&g!=null&&r(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=i(o,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=i(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&r(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){const g=i(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&r(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let d=i(o,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=i(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&r(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(d==="PREFERENCE_TUNING"){const g=i(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&r(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=i(o,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=i(t,["adapterSize"]);e!==void 0&&g!=null&&r(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=i(t,["adapterSize"]);e!==void 0&&g!=null&&r(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(i(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=i(t,["labels"]);e!==void 0&&m!=null&&r(e,["labels"],m);const p=i(t,["beta"]);return e!==void 0&&p!=null&&r(e,["preferenceOptimizationSpec","hyperParameters","beta"],p),n}function Xd(t,e){const o={},n=i(t,["baseModel"]);n!=null&&r(o,["baseModel"],n);const s=i(t,["preTunedModel"]);s!=null&&r(o,["preTunedModel"],s);const l=i(t,["trainingDataset"]);l!=null&&lc(l);const a=i(t,["config"]);return a!=null&&Yd(a,o),o}function Qd(t,e){const o={},n=i(t,["baseModel"]);n!=null&&r(o,["baseModel"],n);const s=i(t,["preTunedModel"]);s!=null&&r(o,["preTunedModel"],s);const l=i(t,["trainingDataset"]);l!=null&&ac(l,o,e);const a=i(t,["config"]);return a!=null&&Od(a,o,e),o}function Zd(t,e){const o={},n=i(t,["name"]);return n!=null&&r(o,["_url","name"],n),o}function jd(t,e){const o={},n=i(t,["name"]);return n!=null&&r(o,["_url","name"],n),o}function ec(t,e,o){const n={},s=i(t,["pageSize"]);e!==void 0&&s!=null&&r(e,["_query","pageSize"],s);const l=i(t,["pageToken"]);e!==void 0&&l!=null&&r(e,["_query","pageToken"],l);const a=i(t,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),n}function tc(t,e,o){const n={},s=i(t,["pageSize"]);e!==void 0&&s!=null&&r(e,["_query","pageSize"],s);const l=i(t,["pageToken"]);e!==void 0&&l!=null&&r(e,["_query","pageToken"],l);const a=i(t,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),n}function oc(t,e){const o={},n=i(t,["config"]);return n!=null&&ec(n,o),o}function nc(t,e){const o={},n=i(t,["config"]);return n!=null&&tc(n,o),o}function ic(t,e){const o={},n=i(t,["sdkHttpResponse"]);n!=null&&r(o,["sdkHttpResponse"],n);const s=i(t,["nextPageToken"]);s!=null&&r(o,["nextPageToken"],s);const l=i(t,["tunedModels"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>ni(u))),r(o,["tuningJobs"],a)}return o}function sc(t,e){const o={},n=i(t,["sdkHttpResponse"]);n!=null&&r(o,["sdkHttpResponse"],n);const s=i(t,["nextPageToken"]);s!=null&&r(o,["nextPageToken"],s);const l=i(t,["tuningJobs"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>gt(u))),r(o,["tuningJobs"],a)}return o}function rc(t,e){const o={},n=i(t,["name"]);n!=null&&r(o,["model"],n);const s=i(t,["name"]);return s!=null&&r(o,["endpoint"],s),o}function lc(t,e){const o={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=i(t,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>l)),r(o,["examples","examples"],s)}return o}function ac(t,e,o){const n={};let s=i(o,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=i(t,["gcsUri"]);e!==void 0&&a!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=i(t,["gcsUri"]);e!==void 0&&a!=null&&r(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let l=i(o,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const a=i(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(l==="PREFERENCE_TUNING"){const a=i(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&r(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(i(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function ni(t,e){const o={},n=i(t,["sdkHttpResponse"]);n!=null&&r(o,["sdkHttpResponse"],n);const s=i(t,["name"]);s!=null&&r(o,["name"],s);const l=i(t,["state"]);l!=null&&r(o,["state"],Nn(l));const a=i(t,["createTime"]);a!=null&&r(o,["createTime"],a);const u=i(t,["tuningTask","startTime"]);u!=null&&r(o,["startTime"],u);const c=i(t,["tuningTask","completeTime"]);c!=null&&r(o,["endTime"],c);const d=i(t,["updateTime"]);d!=null&&r(o,["updateTime"],d);const f=i(t,["description"]);f!=null&&r(o,["description"],f);const m=i(t,["baseModel"]);m!=null&&r(o,["baseModel"],m);const p=i(t,["_self"]);return p!=null&&r(o,["tunedModel"],rc(p)),o}function gt(t,e){const o={},n=i(t,["sdkHttpResponse"]);n!=null&&r(o,["sdkHttpResponse"],n);const s=i(t,["name"]);s!=null&&r(o,["name"],s);const l=i(t,["state"]);l!=null&&r(o,["state"],Nn(l));const a=i(t,["createTime"]);a!=null&&r(o,["createTime"],a);const u=i(t,["startTime"]);u!=null&&r(o,["startTime"],u);const c=i(t,["endTime"]);c!=null&&r(o,["endTime"],c);const d=i(t,["updateTime"]);d!=null&&r(o,["updateTime"],d);const f=i(t,["error"]);f!=null&&r(o,["error"],f);const m=i(t,["description"]);m!=null&&r(o,["description"],m);const p=i(t,["baseModel"]);p!=null&&r(o,["baseModel"],p);const g=i(t,["tunedModel"]);g!=null&&r(o,["tunedModel"],g);const v=i(t,["preTunedModel"]);v!=null&&r(o,["preTunedModel"],v);const N=i(t,["supervisedTuningSpec"]);N!=null&&r(o,["supervisedTuningSpec"],N);const y=i(t,["preferenceOptimizationSpec"]);y!=null&&r(o,["preferenceOptimizationSpec"],y);const E=i(t,["tuningDataStats"]);E!=null&&r(o,["tuningDataStats"],E);const T=i(t,["encryptionSpec"]);T!=null&&r(o,["encryptionSpec"],T);const S=i(t,["partnerModelTuningSpec"]);S!=null&&r(o,["partnerModelTuningSpec"],S);const C=i(t,["customBaseModel"]);C!=null&&r(o,["customBaseModel"],C);const I=i(t,["experiment"]);I!=null&&r(o,["experiment"],I);const P=i(t,["labels"]);P!=null&&r(o,["labels"],P);const R=i(t,["outputUri"]);R!=null&&r(o,["outputUri"],R);const J=i(t,["pipelineJob"]);J!=null&&r(o,["pipelineJob"],J);const A=i(t,["serviceAccount"]);A!=null&&r(o,["serviceAccount"],A);const k=i(t,["tunedModelDisplayName"]);k!=null&&r(o,["tunedModelDisplayName"],k);const H=i(t,["veoTuningSpec"]);return H!=null&&r(o,["veoTuningSpec"],H),o}function uc(t,e){const o={},n=i(t,["sdkHttpResponse"]);n!=null&&r(o,["sdkHttpResponse"],n);const s=i(t,["name"]);s!=null&&r(o,["name"],s);const l=i(t,["metadata"]);l!=null&&r(o,["metadata"],l);const a=i(t,["done"]);a!=null&&r(o,["done"],a);const u=i(t,["error"]);return u!=null&&r(o,["error"],u),o}function dn(t,e){const o={},n=i(t,["gcsUri"]);n!=null&&r(o,["validationDatasetUri"],n);const s=i(t,["vertexDatasetResource"]);return s!=null&&r(o,["validationDatasetUri"],s),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dc extends ae{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new ge(le.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var n;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const s={tunedModelName:o.baseModel};!((n=o.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(s.checkpointId=o.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},o),{preTunedModel:s});return l.baseModel=void 0,await this.tuneInternal(l)}else{const s=Object.assign({},o);return await this.tuneInternal(s)}else{const s=Object.assign({},o),l=await this.tuneMldevInternal(s);let a="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?a=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(a=l.name.split("/operations/")[0]),{name:a,state:it.JOB_STATE_QUEUED}}}}async getInternal(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=jd(e);return u=_("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>gt(f))}else{const d=Zd(e);return u=_("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>ni(f))}}async listInternal(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=nc(e);return u=_("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=sc(f),p=new Uo;return Object.assign(p,m),p})}else{const d=oc(e);return u=_("tunedModels",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=ic(f),p=new Uo;return Object.assign(p,m),p})}}async cancel(e){var o,n,s,l;let a,u="",c={};if(this.apiClient.isVertexAI()){const d=Kd(e);return u=_("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=Wd(f),p=new Vo;return Object.assign(p,m),p})}else{const d=$d(e);return u=_("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const m=zd(f),p=new Vo;return Object.assign(p,m),p})}}async tuneInternal(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Qd(e,e);return l=_("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>gt(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var o,n;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Xd(e);return l=_("tunedModels",u._url),a=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>uc(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cc{async download(e,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const fc=1024*1024*8,pc=3,mc=1e3,hc=2,Ke="x-goog-upload-status";async function gc(t,e,o){var n;const s=await ii(t,e,o),l=await(s==null?void 0:s.json());if(((n=s==null?void 0:s.headers)===null||n===void 0?void 0:n[Ke])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function vc(t,e,o){var n;const s=await ii(t,e,o),l=await(s==null?void 0:s.json());if(((n=s==null?void 0:s.headers)===null||n===void 0?void 0:n[Ke])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=pn(l),u=new Nt;return Object.assign(u,a),u}async function ii(t,e,o){var n,s;let l=0,a=0,u=new st(new Response),c="upload";for(l=t.size;a<l;){const d=Math.min(fc,l-a),f=t.slice(a,a+d);a+d>=l&&(c+=", finalize");let m=0,p=mc;for(;m<pc&&(u=await o.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((n=u==null?void 0:u.headers)===null||n===void 0)&&n[Ke]));)m++,await Nc(p),p=p*hc;if(a+=d,((s=u==null?void 0:u.headers)===null||s===void 0?void 0:s[Ke])!=="active")break;if(l<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function yc(t){return{size:t.size,type:t.type}}function Nc(t){return new Promise(e=>setTimeout(e,t))}class Ec{async upload(e,o,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gc(e,o,n)}async uploadToFileSearchStore(e,o,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vc(e,o,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yc(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tc{create(e,o,n){return new Sc(e,o,n)}}class Sc{constructor(e,o,n){this.url=e,this.headers=o,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cn="x-goog-api-key";class Cc{constructor(e){this.apiKey=e}async addAuthHeaders(e,o){if(e.get(cn)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(cn,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xc="gl-node/";class _c{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new W({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=o.interactions,this._interactions}constructor(e){var o;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=e.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=e.apiKey;const n=yi(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new Cc(this.apiKey);this.apiClient=new yu({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:xc+"web",uploader:new Ec,downloader:new cc}),this.models=new Lu(this.apiClient),this.live=new Ru(this.apiClient,s,new Tc),this.batches=new Ws(this.apiClient),this.chats=new wr(this.models,this.apiClient),this.caches=new _r(this.apiClient),this.files=new Fr(this.apiClient),this.operations=new Fu(this.apiClient),this.authTokens=new ed(this.apiClient),this.tunings=new dc(this.apiClient),this.fileSearchStores=new ad(this.apiClient)}}const Dc="AIzaSyDLvxbXVN1ycTF87urbQEjN3L-XhchvhKE",fn=new _c({apiKey:Dc}),Ic=t=>{if(console.error("Error calling Gemini API:",t),t instanceof Error){let e=t.message;try{const o=e.substring(e.indexOf("{")),n=JSON.parse(o);n.error&&n.error.message&&(n.error.status==="RESOURCE_EXHAUSTED"?e="You've likely exceeded the request limit. Please wait a moment before trying again.":n.error.code===500||n.error.status==="UNKNOWN"?e="An unexpected server error occurred. This might be a temporary issue. Please try again in a few moments.":e=n.error.message)}catch{}return Promise.reject(new Error(e))}return Promise.reject(new Error("An unknown error occurred while communicating with the API."))};async function tt(t,e,o){var n,s,l,a,u,c,d;if(!fn)return Promise.reject(new Error("API key not configured. Please set VITE_GEMINI_API_KEY in .env.local"));try{let f=t;const m=[];o&&(f=`Apply the following instruction only to the masked area of the image: "${t}". Preserve the unmasked area.`),e.length>0&&m.push({inlineData:{data:e[0].base64,mimeType:e[0].mimeType}}),o&&m.push({inlineData:{data:o,mimeType:"image/png"}}),e.length>1&&e.slice(1).forEach(N=>{m.push({inlineData:{data:N.base64,mimeType:N.mimeType}})}),m.push({text:f});const p=await fn.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:m},config:{responseModalities:[Me.IMAGE]}}),g={imageUrl:null,text:null},v=(l=(s=(n=p.candidates)==null?void 0:n[0])==null?void 0:s.content)==null?void 0:l.parts;if(v)for(const N of v)N.text?g.text=(g.text?g.text+`
`:"")+N.text:N.inlineData&&(g.imageUrl=`data:${N.inlineData.mimeType};base64,${N.inlineData.data}`);if(!g.imageUrl){const N=(u=(a=p.candidates)==null?void 0:a[0])==null?void 0:u.finishReason,y=(d=(c=p.candidates)==null?void 0:c[0])==null?void 0:d.safetyRatings;let E="The model did not return an image. It might have refused the request. Please try a different image or prompt.";throw N==="SAFETY"&&(E=`The request was blocked for safety reasons. Categories: ${(y==null?void 0:y.filter(S=>S.blocked).map(S=>S.category).join(", "))||"Unknown"}. Please modify your prompt or image.`),new Error(E)}return g}catch(f){return Ic(f)}}const wc="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e5e7eb' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3cpath d='M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2-2z'%3e%3c/path%3e%3ccircle cx='12' cy='13' r='4'%3e%3c/circle%3e%3c/svg%3e",Ac="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e5e7eb' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3cpath d='M12 15V3m0 12l-4-4m4 4l4-4'/%3e%3crect x='3' y='15' width='18' height='6' rx='2' ry='2'/%3e%3c/svg%3e",bc="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e5e7eb' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3cpath d='M12 21V11l-4-4 1.5-3L12 7l2.5-3L16 7l-4 4'%3e%3c/path%3e%3cpath d='M16 7h2a2 2 0 0 1-2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h2'%3e%3c/path%3e%3c/svg%3e",Rc="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e5e7eb' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3cpath d='M3 9h6l3-3 3 3h6v12H3z'%3e%3c/path%3e%3cpath d='M9 3L7 9'%3e%3c/path%3e%3cpath d='M15 3l2 6'%3e%3c/path%3e%3c/svg%3e",Pc="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23e5e7eb' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round' transform='scale(-1, 1)'%3e%3cpath d='M3 9h6l3-3 3 3h6v12H3z'%3e%3c/path%3e%3cpath d='M9 3L7 9'%3e%3c/path%3e%3cpath d='M15 3l2 6'%3e%3c/path%3e%3c/svg%3e",Mc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M7 4v16M17 4v16M2 9h5M17 9h5M2 15h5M17 15h5"/></svg>',kc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>',Uc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="8" y1="11" x2="14" y2="11"/><line x1="11" y1="8" x2="11" y2="14"/></svg>',Vc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 20h20M4 20v-5c0-2 2-4 4-4h8c2 0 4 2 4 4v5M12 11V3m-4 4l4-4 4 4"/></svg>',Lc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>',Fc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="20" rx="2"/><path d="M2 12h20M12 2v20"/></svg>',Gc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l9 4.5V17.5L12 22l-9-4.5V6.5L12 2z"/><path d="M12 22V12"/><path d="M21 6.5L12 12 3 6.5"/></svg>',Jc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>',Hc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2-2z"/><circle cx="12" cy="13" r="4"/></svg>',Bc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>',qc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3l9 4.5v9L12 21l-9-4.5v-9L12 3z"/><path d="M12 12l9-4.5M12 12v9M12 12L3 7.5"/></svg>',$c='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="M2 2l5 5"/></svg>',Kc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="5" r="3"/><path d="M6 10l6 2 6-2M12 12v5l-4 4M12 17l4 4"/></svg>',zc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2M9 9h.01M15 9h.01"/></svg>',Wc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>',Yc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="13.5" cy="6.5" r=".5"/><circle cx="17.5" cy="10.5" r=".5"/><circle cx="8.5" cy="7.5" r=".5"/><circle cx="6.5" cy="12.5" r=".5"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.9 0 1.6-.7 1.6-1.6 0-.4-.2-.8-.5-1.1-.3-.3-.4-.7-.4-1.1 0-.9.7-1.6 1.6-1.6H19c2.2 0 4-1.8 4-4 0-5.5-4.5-10-10-10z"/></svg>',Oc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/><path d="M12 17a7 7 0 1 0 0-14 7 7 0 0 0 0 14z"/><path d="M20 21l-2-2m-12 0l-2 2"/></svg>',Xc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M2 12h20M21 3l-6 6M3 21l6-6"/></svg>',Qc='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16v16H4z"/><path d="M4 12h16M12 4v16"/></svg>',Zc=[{key:"storyboard",titleKey:"transformations.effects.storyboard.title",prompt:"User's scene description: '{{customPrompt}}'. Using this description, create a cohesive storyboard scene from the provided images. The FIRST image is the BACKGROUND. The next one to three images are CHARACTERS to place in the scene. The LAST image is the STYLE REFERENCE. Your task is to: 1. Integrate the characters into the background based on the scene description. 2. Ensure realistic scaling and positioning. 3. Redraw the ENTIRE scene (background + characters) to perfectly match the artistic style, color palette, and mood of the style reference image. The final output must be a single, stylistically unified image.",icon:Mc,descriptionKey:"transformations.effects.storyboard.description",isStoryboard:!0,hasCustomPrompt:!0,customPromptLabelKey:"transformations.effects.storyboard.customPromptLabel",customPromptPlaceholderKey:"transformations.effects.storyboard.customPromptPlaceholder",backgroundUploaderTitle:"transformations.effects.storyboard.backgroundUploaderTitle",backgroundUploaderDescription:"transformations.effects.storyboard.backgroundUploaderDescription",characterUploaderTitle:"transformations.effects.storyboard.characterUploaderTitle",characterUploaderDescription:"transformations.effects.storyboard.characterUploaderDescription",referenceUploaderTitle:"transformations.effects.storyboard.referenceUploaderTitle",referenceUploaderDescription:"transformations.effects.storyboard.referenceUploaderDescription"},{key:"boothExtraction",titleKey:"transformations.effects.boothExtraction.title",prompt:`Extract only the major structural components from the provided reference image. Output the result as a single wide image (approx 25:10 aspect ratio) containing all extracted components arranged separately in a grid/sprite sheet format. 

1. ANALYZE the image to automatically identify the main construction elements (backdrops, wall panels, stage platforms, standees, large lightboxes, 3D props). 
2. IGNORE and REMOVE ephemeral decorations including: all balloons, fresh flower arrangements, floral vines, small bouquets, and irrelevant tiny details like wires or small props. 
3. Extract only the large, fabricatable components. 
4. Additional User Instructions: '{{customPrompt}}'. 

Rendering rules: 
- Do NOT combine modules in one canvas. Each module must be exported as a cleanly isolated object with transparent background, centered in its own frame. 
- Preserve 100% of original colors, textures, glow, lighting direction, material fidelity, proportions, and realism. 
- No redesign, no replacement, no color shifting, no smoothing, no extra stylizing. 
- NO environmental background. 
- NO grouping of modules. 
- Focus on major, fabricatable shapes only.`,icon:kc,descriptionKey:"transformations.effects.boothExtraction.description",hasCustomPrompt:!0,customPromptLabelKey:"transformations.effects.boothExtraction.customPromptLabel",customPromptPlaceholderKey:"transformations.effects.boothExtraction.customPromptPlaceholder"},{key:"zoomObject",titleKey:"transformations.effects.zoomObject.title",prompt:"Redraw the image with the main 3D subject scaled to {{zoomLevel}}% of its current relative size. If the percentage is less than 100%, zoom out and seamlessly extend the background environment (outpainting) to fill the frame, creating a significantly wider and expansive scene around the subject. If the percentage is greater than 100%, zoom in on the subject. Maintain the original 3D style, lighting, and perspective. Additional user instructions: '{{customPrompt}}'.",icon:Uc,descriptionKey:"transformations.effects.zoomObject.description",hasCustomPrompt:!0,isCustomPromptOptional:!0,customPromptLabelKey:"transformations.effects.zoomObject.customPromptLabel",customPromptPlaceholderKey:"transformations.effects.zoomObject.customPromptPlaceholder",controls:[{key:"zoomLevel",labelKey:"transformations.effects.zoomObject.zoomLabel",min:50,max:150,defaultValue:75,unit:"%"}]},{key:"stageEffect",titleKey:"transformations.effects.stageEffect.title",prompt:"Take the stage effects, including lighting, hardware, and atmospheric elements, from the second reference image and seamlessly integrate them into the masked area of the first stage image. The user's specific instruction for the effect is: '{{customPrompt}}'. The effects should look natural and match the perspective and lighting of the stage.",icon:Vc,descriptionKey:"transformations.effects.stageEffect.description",isMultiImage:!0,hasMask:!0,hasCustomPrompt:!0,customPromptLabelKey:"transformations.effects.stageEffect.customPromptLabel",customPromptPlaceholderKey:"transformations.effects.stageEffect.customPromptPlaceholder",primaryUploaderTitle:"transformations.effects.stageEffect.uploader1Title",primaryUploaderDescription:"transformations.effects.stageEffect.uploader1Desc",secondaryUploaderTitle:"transformations.effects.stageEffect.uploader2Title",secondaryUploaderDescription:"transformations.effects.stageEffect.uploader2Desc"},{key:"eventPerformance",titleKey:"transformations.effects.eventPerformance.title",prompt:"Place the character or act from the second image into the masked area of the first stage image. The performance should be described as: '{{customPrompt}}'. It is crucial to render the person at a realistic scale within the masked area, ensuring their proportions are correct and balanced relative to the stage dimensions. Blend the character seamlessly into the stage with realistic lighting, shadows, and perspective to create a natural and convincing scene.",icon:Lc,descriptionKey:"transformations.effects.eventPerformance.description",isMultiImage:!0,hasCustomPrompt:!0,hasMask:!0,customPromptLabelKey:"transformations.effects.eventPerformance.customPromptLabel",customPromptPlaceholderKey:"transformations.effects.eventPerformance.customPromptPlaceholder",primaryUploaderTitle:"transformations.effects.eventPerformance.uploader1Title",primaryUploaderDescription:"transformations.effects.eventPerformance.uploader1Desc",secondaryUploaderTitle:"transformations.effects.eventPerformance.uploader2Title",secondaryUploaderDescription:"transformations.effects.eventPerformance.uploader2Desc"},{key:"productMockup",titleKey:"transformations.effects.productMockup.title",prompt:"Seamlessly integrate the product design from the second image into the masked area of the first image (the environment). The product should occupy approximately {{size}}% of the masked area. Additional instructions: '{{customPrompt}}'. Adjust the product design for perspective, lighting, and shadows to make it look realistic and naturally placed within the environment.",icon:Fc,descriptionKey:"transformations.effects.productMockup.description",isMultiImage:!0,hasMask:!0,hasCustomPrompt:!0,customPromptLabelKey:"transformations.effects.productMockup.customPromptLabel",customPromptPlaceholderKey:"transformations.effects.productMockup.customPromptPlaceholder",primaryUploaderTitle:"transformations.effects.productMockup.uploader1Title",primaryUploaderDescription:"transformations.effects.productMockup.uploader1Desc",secondaryUploaderTitle:"transformations.effects.productMockup.uploader2Title",secondaryUploaderDescription:"transformations.effects.productMockup.uploader2Desc",controls:[{key:"size",labelKey:"transformations.effects.productMockup.sizeLabel",min:20,max:80,defaultValue:50,unit:"%"}]},{key:"eventDesign3d",titleKey:"transformations.effects.eventDesign3d.title",prompt:"From the provided image, create a photorealistic 3D model of the event design described as: '{{customPrompt}}'. The model must be isolated and rendered on a neutral gray background.",icon:Gc,descriptionKey:"transformations.effects.eventDesign3d.description",hasCustomPrompt:!0,customPromptLabelKey:"transformations.effects.eventDesign3d.customPromptLabel",customPromptPlaceholderKey:"transformations.effects.eventDesign3d.customPromptPlaceholder"},{key:"roomEmpty",titleKey:"transformations.effects.roomEmpty.title",prompt:"Remove the following objects from the masked area of the room image: '{{customPrompt}}'. Leave behind a clean, empty space where the objects were. The walls, floor, and ceiling should be seamlessly repaired and inpainted to look natural. Maintain the original lighting and architectural details of the room.",icon:Jc,descriptionKey:"transformations.effects.roomEmpty.description",hasMask:!0,hasCustomPrompt:!0,customPromptLabelKey:"transformations.effects.roomEmpty.customPromptLabel",customPromptPlaceholderKey:"transformations.effects.roomEmpty.customPromptPlaceholder"},{key:"cameraAngle",titleKey:"transformations.effects.cameraAngle.title",icon:Hc,descriptionKey:"transformations.effects.cameraAngle.description",isPresetBased:!0,hasCustomPrompt:!0,isCustomPromptOptional:!0,customPromptLabelKey:"transformations.effects.cameraAngle.customPromptLabel",customPromptPlaceholderKey:"transformations.effects.cameraAngle.customPromptPlaceholder",referenceUploaderTitle:"transformations.effects.cameraAngle.referenceUploaderTitle",referenceUploaderDescription:"transformations.effects.cameraAngle.referenceUploaderDescription",presets:[{key:"frontView",labelKey:"transformations.effects.cameraAngle.presets.frontView",prompt:"Redraw the image from a direct, head-on, front-facing camera angle, centered on the main subject.",referenceImage:wc},{key:"backView",labelKey:"transformations.effects.cameraAngle.presets.backView",prompt:"Redraw the image from directly behind the main subject, showing their back.",referenceImage:bc},{key:"topDownView",labelKey:"transformations.effects.cameraAngle.presets.topDownView",prompt:"Redraw the image from a top-down, bird's-eye view, looking directly down at the scene.",referenceImage:Ac},{key:"leftSideView",labelKey:"transformations.effects.cameraAngle.presets.leftSideView",prompt:"Redraw the image from a side-on profile view, from the left side of the subject.",referenceImage:Rc},{key:"rightSideView",labelKey:"transformations.effects.cameraAngle.presets.rightSideView",prompt:"Redraw the image from a side-on profile view, from the right side of the subject.",referenceImage:Pc}]},{key:"figurine",titleKey:"transformations.effects.figurine.title",prompt:"turn this photo into a character figure. Behind it, place a box with the character's image printed on it, and a computer showing the Blender modeling process on its screen. In front of the box, add a round plastic base with the character figure standing on it. set the scene indoors if possible",icon:Bc,descriptionKey:"transformations.effects.figurine.description"},{key:"wireframe",titleKey:"transformations.effects.wireframe.title",prompt:"Analyze the 3D form of the main subject in this image. Generate a clean, technical wireframe or skeletal structure that outlines its geometric shape. The wireframe lines should have a thickness level of {{thickness}} (where 1 is thinnest and 20 is thickest). The output should be composed of these interconnected lines on a plain background, revealing the underlying 3D mesh.",icon:qc,descriptionKey:"transformations.effects.wireframe.description",controls:[{key:"thickness",labelKey:"transformations.effects.wireframe.thicknessLabel",min:1,max:20,defaultValue:5,unit:""}]},{key:"vectorFrom3d",titleKey:"transformations.effects.vectorFrom3d.title",prompt:"Transform the first 3D-style image into a clean and sharp vector illustration, perfectly matching the artistic style, color palette, and line work of the second reference image. The final output must be a vector illustration of the first image in the style of the second.",icon:$c,descriptionKey:"transformations.effects.vectorFrom3d.description",isMultiImage:!0,primaryUploaderTitle:"transformations.effects.vectorFrom3d.uploader1Title",primaryUploaderDescription:"transformations.effects.vectorFrom3d.uploader1Desc",secondaryUploaderTitle:"transformations.effects.vectorFrom3d.uploader2Title",secondaryUploaderDescription:"transformations.effects.vectorFrom3d.uploader2Desc"},{key:"pose",titleKey:"transformations.effects.pose.title",prompt:"Apply the pose from the second image to the character in the first image. Render as a professional studio photograph.",icon:Kc,descriptionKey:"transformations.effects.pose.description",isMultiImage:!0,primaryUploaderTitle:"transformations.effects.pose.uploader1Title",primaryUploaderDescription:"transformations.effects.pose.uploader1Desc",secondaryUploaderTitle:"transformations.effects.pose.uploader2Title",secondaryUploaderDescription:"transformations.effects.pose.uploader2Desc"},{key:"expressionReference",titleKey:"transformations.effects.expressionReference.title",prompt:"Precisely transfer the facial expression from the second reference person onto the person in the first image. Maintain all facial features, identity, and skin texture of the first person, but adjust the muscle structure, eyes, and mouth to mirror the specific emotion (e.g., intense joy, subtle smirk, shock) shown in the second image. The final result should look like a natural studio photograph of the first person displaying the second person's expression.",icon:zc,descriptionKey:"transformations.effects.expressionReference.description",isMultiImage:!0,primaryUploaderTitle:"transformations.effects.expressionReference.uploader1Title",primaryUploaderDescription:"transformations.effects.expressionReference.uploader1Desc",secondaryUploaderTitle:"transformations.effects.expressionReference.uploader2Title",secondaryUploaderDescription:"transformations.effects.expressionReference.uploader2Desc"},{key:"lineArt",titleKey:"transformations.effects.lineArt.title",prompt:"Turn the image into a clean, hand-drawn line art sketch.",icon:Wc,descriptionKey:"transformations.effects.lineArt.description"},{key:"colorPalette",titleKey:"transformations.effects.colorPalette.title",prompt:"Turn this image into a clean, hand-drawn line art sketch.",stepTwoPrompt:"Color the line art using the colors from the second image.",icon:Yc,descriptionKey:"transformations.effects.colorPalette.description",isMultiImage:!0,isTwoStep:!0,primaryUploaderTitle:"transformations.effects.colorPalette.uploader1Title",primaryUploaderDescription:"transformations.effects.colorPalette.uploader1Desc",secondaryUploaderTitle:"transformations.effects.colorPalette.uploader2Title",secondaryUploaderDescription:"transformations.effects.colorPalette.uploader2Desc"},{key:"plushie",titleKey:"transformations.effects.plushie.title",prompt:"Turn the person in this photo into a cute, soft plushie doll.",icon:Oc,descriptionKey:"transformations.effects.plushie.description"},{key:"twoDToThreeD",titleKey:"transformations.effects.twoDToThreeD.title",prompt:"Convert the first image (2D artwork) into a hyper-realistic 3D model. Use the second image as a direct reference for all surface materials and textures. Apply the textures from the second image onto the 3D forms of the first image. Emphasize a strong sense of depth and volume, making the forms pop out with sharp, well-defined geometric edges. The lighting should create deep shadows that enhance the 3D relief, and the surface materials must be directly inspired by the second image, looking incredibly realistic and tangible.",icon:Xc,descriptionKey:"transformations.effects.twoDToThreeD.description",isMultiImage:!0,primaryUploaderTitle:"transformations.effects.twoDToThreeD.uploader1Title",primaryUploaderDescription:"transformations.effects.twoDToThreeD.uploader1Desc",secondaryUploaderTitle:"transformations.effects.twoDToThreeD.uploader2Title",secondaryUploaderDescription:"transformations.effects.twoDToThreeD.uploader2Desc"},{key:"paintingProcess",titleKey:"transformations.effects.paintingProcess.title",prompt:"Generate a 4-panel grid showing the artistic process of creating this image, from sketch to final render.",icon:Qc,descriptionKey:"transformations.effects.paintingProcess.description"}],jc=({transformations:t,onSelect:e,hasPreviousResult:o,onOrderChange:n,activeCategory:s,setActiveCategory:l})=>{const{t:a}=te(),u=x.useRef(null),c=x.useRef(null),[d,f]=x.useState(!1),m=(E,T)=>{u.current=T,f(!0);const S=E.currentTarget;setTimeout(()=>{S.classList.add("opacity-40","scale-95")},0)},p=(E,T)=>{c.current=T},g=E=>{if(f(!1),E.currentTarget.classList.remove("opacity-40","scale-95"),u.current!==null&&c.current!==null&&u.current!==c.current){const T=[...t],S=T.splice(u.current,1)[0];T.splice(c.current,0,S),n(T)}u.current=null,c.current=null},v=E=>{E.preventDefault()},N=E=>{E.items&&E.items.length>0?l(E):e(E)},y=E=>h.jsxDEV("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 md:gap-5",children:E.map((T,S)=>h.jsxDEV("button",{draggable:!s,onDragStart:C=>!s&&m(C,S),onDragEnter:C=>!s&&p(C,S),onDragEnd:s?void 0:g,onDragOver:s?void 0:v,onClick:()=>N(T),className:`group flex flex-col items-center justify-center text-center p-3 sm:p-4 aspect-square bg-[var(--bg-card)] rounded-2xl border border-[var(--border-primary)] hover:border-[var(--accent-primary)] transition-all duration-300 ease-in-out transform hover:-translate-y-1.5 focus:outline-none focus:ring-2 focus:ring-[var(--accent-primary)] ${s?"cursor-pointer":"cursor-grab active:cursor-grabbing"} ${d&&!s?"border-dashed":""} shadow-lg shadow-black/10`,children:[h.jsxDEV("div",{className:"w-10 h-10 md:w-12 md:h-12 mb-3 text-[var(--accent-primary)] group-hover:text-white transition-colors duration-300 drop-shadow-[0_0_6px_rgba(0,212,255,0.4)]",dangerouslySetInnerHTML:{__html:T.icon}},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:82,columnNumber:11},void 0),h.jsxDEV("span",{className:"font-bold text-[9px] sm:text-[10px] md:text-[11px] leading-tight uppercase tracking-wider text-[var(--text-primary)] group-hover:text-[var(--accent-primary)] transition-colors duration-300 px-1 line-clamp-2",children:a(T.titleKey)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:86,columnNumber:11},void 0)]},T.key,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:70,columnNumber:9},void 0))},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:68,columnNumber:5},void 0);return h.jsxDEV("div",{className:"container mx-auto p-4 md:p-8 animate-fade-in max-w-7xl",children:s?h.jsxDEV("div",{children:[h.jsxDEV("div",{className:"mb-8 flex items-center gap-4",children:[h.jsxDEV("button",{onClick:()=>l(null),className:"flex items-center gap-2 text-[var(--accent-primary)] hover:text-white transition-all duration-200 py-2.5 px-5 rounded-xl bg-white/5 border border-white/10",children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsxDEV("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:117,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:116,columnNumber:15},void 0),h.jsxDEV("span",{className:"font-black uppercase tracking-widest text-[10px]",children:a("app.back")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:119,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:112,columnNumber:13},void 0),h.jsxDEV("h2",{className:"text-3xl font-black text-[var(--text-primary)] flex items-center gap-3 uppercase tracking-tighter",children:[h.jsxDEV("div",{className:"w-9 h-9 text-[var(--accent-primary)]",dangerouslySetInnerHTML:{__html:s.icon}},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:122,columnNumber:15},void 0),a(s.titleKey)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:121,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:111,columnNumber:11},void 0),y(s.items||[])]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:110,columnNumber:9},void 0):h.jsxDEV(h.Fragment,{children:[h.jsxDEV("h2",{className:"text-3xl sm:text-5xl font-black text-center mb-4 text-[var(--text-primary)] uppercase tracking-tighter drop-shadow-lg",children:a("transformationSelector.title")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:98,columnNumber:11},void 0),h.jsxDEV("p",{className:"text-sm sm:text-lg text-center text-[var(--text-secondary)] mb-12 max-w-3xl mx-auto font-medium leading-relaxed opacity-80",children:a(o?"transformationSelector.descriptionWithResult":"transformationSelector.description")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:101,columnNumber:11},void 0),y(t)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:97,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/TransformationSelector.tsx",lineNumber:95,columnNumber:5},void 0)},ef=({content:t,onUseImageAsInput:e,onImageClick:o,onSaveToWorkflow:n})=>{const{t:s}=te(),[l,a]=x.useState("result"),[u,c]=x.useState(50),[d,f]=x.useState(!1),m=x.useRef(null);x.useEffect(()=>{const v=y=>{if(!d||!m.current)return;const E=m.current.getBoundingClientRect(),T=Math.max(0,Math.min(y.clientX-E.left,E.width));c(T/E.width*100)},N=()=>f(!1);return d&&(window.addEventListener("mousemove",v),window.addEventListener("mouseup",N)),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",N)}},[d]);const p=()=>{if(!t.imageUrl)return;const v=document.createElement("a");v.href=t.imageUrl,v.download=`alpha-studio-${Date.now()}.png`,document.body.appendChild(v),v.click(),document.body.removeChild(v)},g=({onClick:v,children:N,isPrimary:y})=>h.jsxDEV("button",{onClick:v,className:`flex-1 py-3 px-4 font-bold rounded-xl shadow-lg transition-all flex items-center justify-center gap-2 ${y?"bg-gradient-to-r from-[var(--accent-primary)] to-[var(--accent-secondary)] text-black":"bg-white/5 border border-white/10 hover:bg-white/10 text-white"}`,children:N},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:57,columnNumber:5},void 0);return h.jsxDEV("div",{className:"w-full flex flex-col gap-4 animate-fade-in",children:[h.jsxDEV("div",{className:"w-full aspect-square bg-black rounded-2xl overflow-hidden border border-white/5 shadow-2xl relative",children:l==="result"?h.jsxDEV("img",{src:t.imageUrl,alt:"Result",className:"w-full h-full object-contain cursor-pointer",onClick:()=>o(t.imageUrl)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:74,columnNumber:11},void 0):h.jsxDEV("div",{ref:m,className:"w-full h-full relative cursor-ew-resize select-none",onMouseDown:()=>f(!0),children:[h.jsxDEV("img",{src:t.originalImageUrl,alt:"Original",className:"absolute inset-0 w-full h-full object-contain"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:86,columnNumber:13},void 0),h.jsxDEV("div",{className:"absolute inset-0",style:{clipPath:`inset(0 ${100-u}% 0 0)`},children:h.jsxDEV("img",{src:t.imageUrl,alt:"Result",className:"w-full h-full object-contain"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:95,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:91,columnNumber:13},void 0),h.jsxDEV("div",{className:"absolute top-0 bottom-0 w-1 bg-[var(--accent-primary)] shadow-[0_0_10px_rgba(249,115,22,0.5)]",style:{left:`${u}%`},children:h.jsxDEV("div",{className:"absolute top-1/2 -translate-y-1/2 -left-4 w-8 h-8 bg-[var(--accent-primary)] rounded-full flex items-center justify-center text-black font-bold",children:""},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:105,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:101,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:81,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:72,columnNumber:7},void 0),h.jsxDEV("div",{className:"flex flex-col gap-3",children:[t.originalImageUrl&&h.jsxDEV("div",{className:"flex gap-2",children:[h.jsxDEV("button",{onClick:()=>a("result"),className:`flex-1 py-1.5 text-[10px] font-bold uppercase tracking-wider rounded-lg border transition-all ${l==="result"?"bg-[var(--accent-primary)] border-[var(--accent-primary)] text-black":"border-white/10 text-gray-500"}`,children:s("resultDisplay.resultView")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:117,columnNumber:13},void 0),h.jsxDEV("button",{onClick:()=>a("slider"),className:`flex-1 py-1.5 text-[10px] font-bold uppercase tracking-wider rounded-lg border transition-all ${l==="slider"?"bg-[var(--accent-primary)] border-[var(--accent-primary)] text-black":"border-white/10 text-gray-500"}`,children:s("resultDisplay.compareView")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:127,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:116,columnNumber:11},void 0),h.jsxDEV("div",{className:"flex gap-3",children:[h.jsxDEV(g,{onClick:p,children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:144,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:143,columnNumber:13},void 0),h.jsxDEV("span",{children:s("resultDisplay.actions.download")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:146,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:142,columnNumber:11},void 0),n&&h.jsxDEV(g,{onClick:()=>n(t.imageUrl),isPrimary:!0,children:h.jsxDEV("span",{children:s("resultDisplay.actions.saveToWorkflow")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:150,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:149,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:141,columnNumber:9},void 0),h.jsxDEV(g,{onClick:()=>e(t.imageUrl),children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:157,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:156,columnNumber:11},void 0),h.jsxDEV("span",{children:s("resultDisplay.actions.useAsInput")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:159,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:155,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:113,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ResultDisplay.tsx",lineNumber:70,columnNumber:5},void 0)},ot=({onImageSelect:t,initialImageUrl:e,onMaskChange:o,onClearImage:n,isMaskToolActive:s})=>{const{t:l}=te(),a=x.useRef(null),u=x.useRef(null),c=x.useRef(null),[d,f]=x.useState(null),[m,p]=x.useState(!1),[g,v]=x.useState(null),[N,y]=x.useState(20),[E,T]=x.useState([]),[S,C]=x.useState(!1),I=x.useCallback(()=>{const D=a.current,w=u.current,V=D==null?void 0:D.getContext("2d"),B=w==null?void 0:w.getContext("2d");return{imageCanvas:D,maskCanvas:w,imageCtx:V,maskCtx:B}},[]),P=x.useCallback(()=>{const{imageCtx:D,imageCanvas:w,maskCanvas:V}=I(),B=c.current;if(!D||!w||!d||!B)return;const ve=B.clientWidth/B.clientHeight,ye=d.width/d.height;let fe,se,we,pe;ve>ye?(se=B.clientHeight,fe=se*ye):(fe=B.clientWidth,se=fe/ye),we=(B.clientWidth-fe)/2,pe=(B.clientHeight-se)/2,[w,V].forEach(Ne=>{Ne&&(Ne.width=B.clientWidth,Ne.height=B.clientHeight)}),D.clearRect(0,0,w.width,w.height),D.drawImage(d,we,pe,fe,se)},[d,I]);x.useEffect(()=>{const D=new Image;D.crossOrigin="anonymous",D.onload=()=>{f(D),T([]);const{maskCtx:w,maskCanvas:V}=I();w&&V&&(w.clearRect(0,0,V.width,V.height),o(null))},e?D.src=e:f(null)},[e,I,o]),x.useEffect(()=>{P();const D=()=>P();return window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[P,d]);const R=x.useCallback(()=>{const{maskCtx:D,maskCanvas:w}=I();D&&w&&T(V=>[...V,D.getImageData(0,0,w.width,w.height)])},[I]),J=x.useCallback(()=>{const{maskCtx:D,maskCanvas:w}=I();D&&w&&(R(),D.clearRect(0,0,w.width,w.height),o(null),T(V=>[...V,D.getImageData(0,0,w.width,w.height)]))},[I,o,R]),A=x.useCallback(()=>{const{maskCtx:D,maskCanvas:w}=I();if(!D||!w||E.length===0)return;const V=E.slice(0,-1);T(V),D.clearRect(0,0,w.width,w.height),V.length>0?(D.putImageData(V[V.length-1],0,0),o(w.toDataURL())):o(null)},[I,o,E]),k=D=>{const w=u.current;if(!w)return null;const V=w.getBoundingClientRect(),B="touches"in D?D.touches[0].clientX-V.left:D.clientX-V.left,ve="touches"in D?D.touches[0].clientY-V.top:D.clientY-V.top;return{x:B,y:ve}},H=D=>{const w=k(D);w&&(R(),p(!0),v(w))},z=D=>{if(!m)return;const w=k(D);if(!w||!g)return;const{maskCtx:V}=I();if(V){V.beginPath();const B=getComputedStyle(document.documentElement).getPropertyValue("--accent-primary").trim();V.strokeStyle=`${B}b3`,V.lineWidth=N,V.lineCap="round",V.lineJoin="round",V.moveTo(g.x,g.y),V.lineTo(w.x,w.y),V.stroke()}v(w)},L=()=>{var D;p(!1),v(null),o(((D=u.current)==null?void 0:D.toDataURL())??null)},$=x.useCallback(D=>{const w=new FileReader;w.onload=V=>{var B;t(D,(B=V.target)==null?void 0:B.result)},w.readAsDataURL(D)},[t]),re=D=>{var w;(w=D.target.files)!=null&&w[0]&&$(D.target.files[0])},Y=x.useCallback(D=>{var w;D.preventDefault(),D.stopPropagation(),C(!1),(w=D.dataTransfer.files)!=null&&w[0]&&$(D.dataTransfer.files[0])},[$]),U=D=>{D.preventDefault(),D.stopPropagation(),C(!0)},K=D=>{D.preventDefault(),D.stopPropagation(),C(!1)};return h.jsxDEV("div",{className:"flex flex-col gap-4",children:[h.jsxDEV("div",{ref:c,onDrop:Y,onDragOver:U,onDragLeave:K,className:`relative w-full aspect-square bg-[var(--bg-secondary)] rounded-lg flex items-center justify-center transition-colors duration-200 select-none ${S?"outline-dashed outline-2 outline-[var(--accent-primary)] bg-[rgba(249,115,22,0.1)]":""} ${e?"p-0":"p-4 border-2 border-dashed border-[var(--border-primary)]"}`,children:e?h.jsxDEV(h.Fragment,{children:[h.jsxDEV("button",{onClick:n,className:"absolute top-2 right-2 z-30 p-1 bg-black/50 backdrop-blur-sm rounded-full text-white hover:bg-red-600 transition-colors","aria-label":"Remove image",children:h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsxDEV("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:229,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:228,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:223,columnNumber:13},void 0),h.jsxDEV("canvas",{ref:a,className:"absolute top-0 left-0",style:{zIndex:1}},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:232,columnNumber:13},void 0),h.jsxDEV("canvas",{ref:u,className:"absolute top-0 left-0",style:{zIndex:3,touchAction:"none",cursor:s?"crosshair":"default"},onMouseDown:s?H:void 0,onMouseMove:s?z:void 0,onMouseUp:s?L:void 0,onMouseLeave:s?L:void 0,onTouchStart:s?H:void 0,onTouchMove:s?z:void 0,onTouchEnd:s?L:void 0},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:233,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:222,columnNumber:11},void 0):h.jsxDEV("label",{htmlFor:"file-upload",className:"flex flex-col items-center justify-center text-[var(--text-tertiary)] cursor-pointer w-full h-full",children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.158 0h.008v.008h-.008V8.25z"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:214,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:213,columnNumber:13},void 0),h.jsxDEV("p",{className:"mb-2 text-sm",children:[h.jsxDEV("span",{className:"font-semibold text-[var(--text-secondary)]",children:l("imageEditor.upload")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:217,columnNumber:15},void 0)," ",l("imageEditor.dragAndDrop")]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:216,columnNumber:13},void 0),h.jsxDEV("input",{id:"file-upload",type:"file",className:"hidden",onChange:re,accept:"image/*"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:219,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:212,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:202,columnNumber:7},void 0),e&&s&&h.jsxDEV("div",{className:"p-3 bg-black/60 backdrop-blur-md rounded-lg flex flex-col gap-4 border border-[var(--border-primary)] animate-fade-in-fast",children:[h.jsxDEV("p",{className:"text-xs text-[var(--text-secondary)] -mb-2",children:l("imageEditor.maskPanelInfo")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:250,columnNumber:11},void 0),h.jsxDEV("div",{className:"flex items-center gap-4",children:[h.jsxDEV("label",{htmlFor:"brush-size",className:"text-sm font-medium text-[var(--text-primary)] whitespace-nowrap",children:l("imageEditor.brushSize")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:252,columnNumber:13},void 0),h.jsxDEV("input",{id:"brush-size",type:"range",min:"5",max:"100",value:N,onChange:D=>y(Number(D.target.value)),className:"w-full h-2 bg-[var(--text-tertiary)] rounded-lg appearance-none cursor-pointer accent-[var(--accent-primary)]"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:255,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:251,columnNumber:11},void 0),h.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxDEV("button",{onClick:A,disabled:E.length===0,className:"px-4 py-2 text-sm font-semibold text-[var(--text-primary)] bg-[rgba(107,114,128,0.2)] rounded-md hover:bg-[rgba(107,114,128,0.4)] disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed transition-colors",children:l("imageEditor.undo")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:266,columnNumber:13},void 0),h.jsxDEV("button",{onClick:J,disabled:E.length===0,className:"px-4 py-2 text-sm font-semibold text-[var(--text-primary)] bg-[rgba(107,114,128,0.2)] rounded-md hover:bg-[rgba(107,114,128,0.4)] disabled:bg-[var(--bg-disabled)] disabled:text-[var(--text-disabled)] disabled:cursor-not-allowed transition-colors",children:l("imageEditor.clearMask")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:273,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:265,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:249,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/ImageEditorCanvas.tsx",lineNumber:201,columnNumber:5},void 0)},tf=({item:t,onUseImage:e,onDownload:o})=>{const{t:n}=te(),s=({onClick:l,children:a,isPrimary:u})=>h.jsxDEV("button",{onClick:l,className:`w-full flex items-center justify-center gap-1.5 py-1.5 px-2 text-xs font-semibold rounded-md transition-colors duration-200 ${u?"bg-gradient-to-r from-[var(--accent-primary)] to-[var(--accent-secondary)] text-[var(--text-on-accent)] shadow-sm shadow-[var(--accent-shadow)] hover:from-[var(--accent-primary-hover)] hover:to-[var(--accent-secondary-hover)]":"bg-[rgba(107,114,128,0.2)] hover:bg-[rgba(107,114,128,0.4)] text-[var(--text-primary)]"}`,children:a},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:25,columnNumber:5},void 0);return t.videoUrl?h.jsxDEV("div",{className:"bg-[var(--bg-secondary)] p-3 rounded-lg border border-[var(--border-primary)]",children:h.jsxDEV("div",{className:"flex flex-col gap-3",children:[h.jsxDEV("video",{src:t.videoUrl,controls:!0,className:"rounded-md w-full object-contain bg-[var(--bg-primary)]"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:41,columnNumber:11},void 0),h.jsxDEV("div",{className:"grid grid-cols-1 gap-2 text-sm",children:h.jsxDEV(s,{onClick:()=>o(t.videoUrl,"video-result"),isPrimary:!0,children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsxDEV("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:45,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:44,columnNumber:15},void 0),n("resultDisplay.actions.download")]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:43,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:42,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:40,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:39,columnNumber:7},void 0):h.jsxDEV("div",{className:"bg-[var(--bg-secondary)] p-3 rounded-lg border border-[var(--border-primary)]",children:t.secondaryImageUrl&&t.imageUrl?h.jsxDEV("div",{className:"flex flex-col gap-4",children:[h.jsxDEV("div",{className:"flex flex-col gap-2",children:[h.jsxDEV("img",{src:t.secondaryImageUrl,className:"rounded-md aspect-square object-contain bg-[var(--bg-primary)]",alt:"Line Art Result"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:60,columnNumber:13},void 0),h.jsxDEV("div",{className:"text-xs text-center text-[var(--text-secondary)] mb-1",children:n("history.lineArt")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:61,columnNumber:13},void 0),h.jsxDEV("div",{className:"grid grid-cols-2 gap-1.5 text-xs",children:[h.jsxDEV(s,{onClick:()=>e(t.secondaryImageUrl),isPrimary:!0,children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:[h.jsxDEV("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:65,columnNumber:19},void 0),h.jsxDEV("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2-2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:66,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:64,columnNumber:17},void 0),n("history.use")]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:63,columnNumber:15},void 0),h.jsxDEV(s,{onClick:()=>o(t.secondaryImageUrl,"line-art"),children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsxDEV("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:72,columnNumber:19},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:71,columnNumber:17},void 0),n("history.save")]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:70,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:62,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:59,columnNumber:11},void 0),h.jsxDEV("div",{className:"flex flex-col gap-2",children:[h.jsxDEV("img",{src:t.imageUrl,className:"rounded-md aspect-square object-contain bg-[var(--bg-primary)]",alt:"Final Result"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:79,columnNumber:13},void 0),h.jsxDEV("div",{className:"text-xs text-center text-[var(--text-secondary)] mb-1",children:n("history.finalResult")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:80,columnNumber:13},void 0),h.jsxDEV("div",{className:"grid grid-cols-2 gap-1.5 text-xs",children:[h.jsxDEV(s,{onClick:()=>e(t.imageUrl),isPrimary:!0,children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:[h.jsxDEV("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:84,columnNumber:19},void 0),h.jsxDEV("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2-2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:85,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:83,columnNumber:17},void 0),n("history.use")]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:82,columnNumber:15},void 0),h.jsxDEV(s,{onClick:()=>o(t.imageUrl,"final-result"),children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsxDEV("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:91,columnNumber:19},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:90,columnNumber:17},void 0),n("history.save")]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:89,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:81,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:78,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:58,columnNumber:9},void 0):t.imageUrl&&h.jsxDEV("div",{className:"flex flex-col gap-3",children:[h.jsxDEV("img",{src:t.imageUrl,className:"rounded-md w-full object-contain bg-[var(--bg-primary)]",alt:"Generated Result"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:100,columnNumber:11},void 0),h.jsxDEV("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[h.jsxDEV(s,{onClick:()=>o(t.imageUrl,"single-result"),children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsxDEV("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:104,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:103,columnNumber:15},void 0),n("resultDisplay.actions.download")]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:102,columnNumber:13},void 0),h.jsxDEV(s,{onClick:()=>e(t.imageUrl),isPrimary:!0,children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[h.jsxDEV("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:110,columnNumber:17},void 0),h.jsxDEV("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2-2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:111,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:109,columnNumber:15},void 0),n("resultDisplay.actions.useAsInput")]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:108,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:101,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:99,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:56,columnNumber:5},void 0)},of=({isOpen:t,onClose:e,history:o,onUseImage:n,onDownload:s})=>{const{t:l}=te();return h.jsxDEV("div",{className:`fixed inset-0 z-40 transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,children:[h.jsxDEV("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:127,columnNumber:7},void 0),h.jsxDEV("div",{className:`absolute top-0 right-0 h-full w-full max-w-md bg-[var(--bg-card)] border-l border-[var(--border-primary)] shadow-2xl flex flex-col transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"translate-x-full"}`,children:[h.jsxDEV("div",{className:"p-4 border-b border-[var(--border-primary)] flex justify-between items-center flex-shrink-0",children:[h.jsxDEV("h2",{className:"text-xl font-semibold text-[var(--accent-primary)]",children:l("history.title")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:131,columnNumber:11},void 0),h.jsxDEV("button",{onClick:e,className:"p-1 rounded-full text-[var(--text-secondary)] hover:bg-[rgba(107,114,128,0.2)] hover:text-[var(--text-primary)] transition-colors",children:h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsxDEV("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:134,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:133,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:132,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:130,columnNumber:9},void 0),h.jsxDEV("div",{className:"flex-grow overflow-y-auto p-4",children:o.length===0?h.jsxDEV("div",{className:"text-center text-[var(--text-tertiary)] pt-10 flex flex-col items-center gap-4",children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:143,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:142,columnNumber:15},void 0),h.jsxDEV("p",{children:l("history.empty")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:145,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:141,columnNumber:13},void 0):h.jsxDEV("div",{className:"space-y-4",children:o.map((a,u)=>h.jsxDEV(tf,{item:a,onUseImage:n,onDownload:s},u,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:150,columnNumber:17},void 0))},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:148,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:139,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:129,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/HistoryPanel.tsx",lineNumber:126,columnNumber:5},void 0)},nf=(t,e)=>{const o=document.createElement("a");o.href=t,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)},sf=({imageUrl:t,title:e,onClose:o})=>{const{t:n}=te();if(x.useEffect(()=>{const l=a=>{a.key==="Escape"&&o()};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[o]),x.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),!t)return null;const s=()=>{const l=e?`${e.replace(/\s+/g,"-").toLowerCase()}.png`:"image.png";nf(t,l)};return h.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[h.jsxDEV("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:o},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/modals/ImagePreviewModal.tsx",lineNumber:41,columnNumber:7},void 0),h.jsxDEV("div",{className:"relative z-10 max-w-[90vw] max-h-[90vh] flex flex-col",children:[h.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e&&h.jsxDEV("h3",{className:"text-lg font-semibold text-white",children:e},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/modals/ImagePreviewModal.tsx",lineNumber:51,columnNumber:13},void 0),h.jsxDEV("div",{className:"flex items-center gap-2 ml-auto",children:[h.jsxDEV("button",{onClick:s,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:n("imagePreview.download"),children:h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/modals/ImagePreviewModal.tsx",lineNumber:60,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/modals/ImagePreviewModal.tsx",lineNumber:59,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/modals/ImagePreviewModal.tsx",lineNumber:54,columnNumber:13},void 0),h.jsxDEV("button",{onClick:o,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:n("imagePreview.close"),children:h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/modals/ImagePreviewModal.tsx",lineNumber:69,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/modals/ImagePreviewModal.tsx",lineNumber:68,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/modals/ImagePreviewModal.tsx",lineNumber:63,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/modals/ImagePreviewModal.tsx",lineNumber:53,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/modals/ImagePreviewModal.tsx",lineNumber:49,columnNumber:9},void 0),h.jsxDEV("div",{className:"relative overflow-hidden rounded-xl bg-black/50",children:h.jsxDEV("img",{src:t,alt:e||"Preview",className:"max-w-full max-h-[80vh] object-contain"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/modals/ImagePreviewModal.tsx",lineNumber:77,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/modals/ImagePreviewModal.tsx",lineNumber:76,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/modals/ImagePreviewModal.tsx",lineNumber:47,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/modals/ImagePreviewModal.tsx",lineNumber:39,columnNumber:5},void 0)},rf=({message:t,size:e="md"})=>{const{t:o}=te(),n={sm:"h-5 w-5",md:"h-10 w-10",lg:"h-16 w-16"};return e==="sm"?h.jsxDEV("svg",{className:`animate-spin ${n[e]} text-[var(--accent-primary)]`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[h.jsxDEV("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/ui/LoadingSpinner.tsx",lineNumber:21,columnNumber:9},void 0),h.jsxDEV("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/ui/LoadingSpinner.tsx",lineNumber:22,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/ui/LoadingSpinner.tsx",lineNumber:20,columnNumber:7},void 0):h.jsxDEV("div",{className:"flex flex-col items-center justify-center gap-4 text-[var(--text-primary)]",children:[h.jsxDEV("svg",{className:`animate-spin ${n[e]} text-[var(--accent-primary)]`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[h.jsxDEV("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/ui/LoadingSpinner.tsx",lineNumber:30,columnNumber:9},void 0),h.jsxDEV("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/ui/LoadingSpinner.tsx",lineNumber:31,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/ui/LoadingSpinner.tsx",lineNumber:29,columnNumber:7},void 0),t!==void 0&&h.jsxDEV("p",{className:"text-lg font-medium",children:t||o("app.loading.default")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/ui/LoadingSpinner.tsx",lineNumber:33,columnNumber:33},void 0),h.jsxDEV("p",{className:"text-sm text-[var(--text-secondary)]",children:o("app.loading.wait")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/ui/LoadingSpinner.tsx",lineNumber:34,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/ui/LoadingSpinner.tsx",lineNumber:28,columnNumber:5},void 0)},lf=({message:t,onRetry:e})=>{const{t:o}=te();return h.jsxDEV("div",{className:"w-full max-w-lg p-4 bg-red-500/10 border border-red-500/30 text-red-400 rounded-lg text-center",role:"alert",children:[h.jsxDEV("p",{className:"font-bold mb-1",children:"Error"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/ui/ErrorMessage.tsx",lineNumber:14,columnNumber:7},void 0),h.jsxDEV("p",{className:"text-sm mb-3",children:t},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/ui/ErrorMessage.tsx",lineNumber:15,columnNumber:7},void 0),e&&h.jsxDEV("button",{onClick:e,className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 rounded-lg text-sm transition-colors",children:o("app.regenerate")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/ui/ErrorMessage.tsx",lineNumber:17,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/ui/ErrorMessage.tsx",lineNumber:13,columnNumber:5},void 0)},Pe=({onImageSelect:t,imageUrl:e,onClear:o,title:n,description:s,aspectRatio:l="aspect-square",enableHostUpload:a=!0,onHostedUrlChange:u})=>{const[c,d]=x.useState(!1),[f,m]=x.useState("upload"),[p,g]=x.useState(""),[v,N]=x.useState(!1),[y,E]=x.useState(!1),[T,S]=x.useState(null),[C,I]=x.useState(null),{t:P}=te(),R=x.useCallback(async U=>{S(null);const K=new FileReader;K.onload=D=>{var w;t(U,(w=D.target)==null?void 0:w.result),I(null)},K.readAsDataURL(U)},[t]),J=U=>{var K;(K=U.target.files)!=null&&K[0]&&R(U.target.files[0])},A=x.useCallback(U=>{var K;U.preventDefault(),U.stopPropagation(),d(!1),(K=U.dataTransfer.files)!=null&&K[0]&&R(U.dataTransfer.files[0])},[R]),k=U=>{U.preventDefault(),U.stopPropagation(),d(!0)},H=U=>{U.preventDefault(),U.stopPropagation(),d(!1)},z=async()=>{if(p.trim()){N(!0),S(null);try{const U=await fi(p.trim());t(null,U),I(p.trim()),u==null||u(p.trim())}catch{S("Could not load image from URL. Please check if the URL is correct and accessible.")}finally{N(!1)}}},L=async()=>{if(e){E(!0),S(null);try{const K=await(await fetch(e)).blob(),D=new File([K],"image.png",{type:K.type}),w=await pi(D);w.success?(I(w.url),u==null||u(w.url)):S(w.error||"Upload failed")}catch{S("Failed to upload image to host")}finally{E(!1)}}},$=()=>{o(),I(null),g(""),S(null)},re=async U=>{try{await navigator.clipboard.writeText(U)}catch(K){console.error("Failed to copy:",K)}},Y=`file-upload-${n.replace(/\s+/g,"-").toLowerCase()}`;return h.jsxDEV("div",{className:"flex flex-col gap-2",children:[h.jsxDEV("h3",{className:"text-sm font-semibold text-[var(--text-primary)]",children:n},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:134,columnNumber:7},void 0),!e&&h.jsxDEV("div",{className:"flex gap-1 p-1 bg-[var(--bg-tertiary)] rounded-lg",children:[h.jsxDEV("button",{onClick:()=>m("upload"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${f==="upload"?"bg-[var(--accent-primary)] text-white":"text-[var(--text-secondary)] hover:text-[var(--text-primary)]"}`,children:"Upload"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:139,columnNumber:11},void 0),h.jsxDEV("button",{onClick:()=>m("url"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${f==="url"?"bg-[var(--accent-primary)] text-white":"text-[var(--text-secondary)] hover:text-[var(--text-primary)]"}`,children:"URL"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:149,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:138,columnNumber:9},void 0),!e&&f==="url"&&h.jsxDEV("div",{className:"flex flex-col gap-2",children:[h.jsxDEV("div",{className:"flex gap-2",children:[h.jsxDEV("input",{type:"url",value:p,onChange:U=>g(U.target.value),placeholder:"https://example.com/image.jpg",className:"flex-1 px-3 py-2 text-sm bg-[var(--bg-secondary)] border border-[var(--border-primary)] rounded-lg text-[var(--text-primary)] placeholder:text-[var(--text-tertiary)] focus:outline-none focus:border-[var(--accent-primary)]",onKeyDown:U=>U.key==="Enter"&&z()},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:166,columnNumber:13},void 0),h.jsxDEV("button",{onClick:z,disabled:v||!p.trim(),className:"px-4 py-2 text-sm font-medium bg-[var(--accent-primary)] text-white rounded-lg hover:bg-[var(--accent-secondary)] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:v?h.jsxDEV("svg",{className:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",children:[h.jsxDEV("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:181,columnNumber:19},void 0),h.jsxDEV("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:182,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:180,columnNumber:17},void 0):"Load"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:174,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:165,columnNumber:11},void 0),T&&h.jsxDEV("p",{className:"text-xs text-red-500",children:T},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:188,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:164,columnNumber:9},void 0),f==="upload"&&h.jsxDEV("div",{onDrop:A,onDragOver:k,onDragLeave:H,className:`relative w-full ${l} bg-[var(--bg-secondary)] rounded-lg flex items-center justify-center transition-colors duration-200 select-none ${c?"outline-dashed outline-2 outline-[var(--accent-primary)] bg-[rgba(249,115,22,0.1)]":""} ${e?"p-0":"p-4 border-2 border-dashed border-[var(--border-primary)]"}`,children:e?h.jsxDEV(h.Fragment,{children:[h.jsxDEV("img",{src:e,alt:n,className:"w-full h-full object-contain rounded-lg"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:214,columnNumber:15},void 0),h.jsxDEV("button",{onClick:$,className:"absolute top-2 right-2 z-10 p-1 bg-black/50 backdrop-blur-sm rounded-full text-white hover:bg-red-600 transition-colors","aria-label":`Remove ${n} image`,children:h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsxDEV("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:221,columnNumber:19},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:220,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:215,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:213,columnNumber:13},void 0):h.jsxDEV("label",{htmlFor:Y,className:"flex flex-col items-center justify-center text-[var(--text-tertiary)] cursor-pointer w-full h-full text-center",children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.158 0h.008v.008h-.008V8.25z"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:206,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:205,columnNumber:15},void 0),h.jsxDEV("p",{className:"mb-1 text-xs font-semibold text-[var(--text-secondary)]",children:P("imageEditor.upload")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:208,columnNumber:15},void 0),h.jsxDEV("p",{className:"text-xs",children:s},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:209,columnNumber:15},void 0),h.jsxDEV("input",{id:Y,type:"file",className:"hidden",onChange:J,accept:"image/*"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:210,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:204,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:195,columnNumber:9},void 0),f==="url"&&e&&h.jsxDEV("div",{className:`relative w-full ${l} bg-[var(--bg-secondary)] rounded-lg`,children:[h.jsxDEV("img",{src:e,alt:n,className:"w-full h-full object-contain rounded-lg"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:232,columnNumber:11},void 0),h.jsxDEV("button",{onClick:$,className:"absolute top-2 right-2 z-10 p-1 bg-black/50 backdrop-blur-sm rounded-full text-white hover:bg-red-600 transition-colors","aria-label":`Remove ${n} image`,children:h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsxDEV("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:239,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:238,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:233,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:231,columnNumber:9},void 0),e&&a&&h.jsxDEV("div",{className:"flex flex-col gap-2",children:[C?h.jsxDEV("div",{className:"flex items-center gap-2 p-2 bg-green-500/10 border border-green-500/30 rounded-lg",children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-green-500 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsxDEV("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:274,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:273,columnNumber:15},void 0),h.jsxDEV("input",{type:"text",value:C,readOnly:!0,className:"flex-1 text-xs bg-transparent text-[var(--text-secondary)] outline-none"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:276,columnNumber:15},void 0),h.jsxDEV("button",{onClick:()=>re(C),className:"p-1 text-[var(--text-tertiary)] hover:text-[var(--text-primary)] transition-colors",title:"Copy URL",children:h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:288,columnNumber:19},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:287,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:282,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:272,columnNumber:13},void 0):h.jsxDEV("button",{onClick:L,disabled:y,className:"flex items-center justify-center gap-2 px-3 py-2 text-xs font-medium bg-[var(--bg-tertiary)] text-[var(--text-secondary)] rounded-lg hover:bg-[var(--accent-primary)] hover:text-white transition-colors disabled:opacity-50",children:y?h.jsxDEV(h.Fragment,{children:[h.jsxDEV("svg",{className:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",children:[h.jsxDEV("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:257,columnNumber:21},void 0),h.jsxDEV("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:258,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:256,columnNumber:19},void 0),"Uploading..."]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:255,columnNumber:17},void 0):h.jsxDEV(h.Fragment,{children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:265,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:264,columnNumber:19},void 0),"Upload to Cloud"]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:263,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:249,columnNumber:13},void 0),T&&h.jsxDEV("p",{className:"text-xs text-red-500",children:T},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:294,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:247,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/UploaderBox.tsx",lineNumber:133,columnNumber:5},void 0)},af=({onPrimarySelect:t,onSecondarySelect:e,primaryImageUrl:o,secondaryImageUrl:n,onClearPrimary:s,onClearSecondary:l,primaryTitle:a,primaryDescription:u,secondaryTitle:c,secondaryDescription:d,enableHostUpload:f=!0,onPrimaryHostedUrlChange:m,onSecondaryHostedUrlChange:p})=>{const{t:g}=te();return h.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxDEV(Pe,{title:a??g("transformations.effects.pose.uploader1Title"),description:u??g("transformations.effects.pose.uploader1Desc"),imageUrl:o,onImageSelect:t,onClear:s,enableHostUpload:f,onHostedUrlChange:m},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageUploader.tsx",lineNumber:39,columnNumber:7},void 0),h.jsxDEV(Pe,{title:c??g("transformations.effects.pose.uploader2Title"),description:d??g("transformations.effects.pose.uploader2Desc"),imageUrl:n,onImageSelect:e,onClear:l,enableHostUpload:f,onHostedUrlChange:p},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageUploader.tsx",lineNumber:48,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageUploader.tsx",lineNumber:38,columnNumber:5},void 0)},uf=({imageUrls:t,onImagesChange:e,maxImages:o})=>{const{t:n}=te(),[s,l]=x.useState(!1),a=x.useCallback(g=>{const v=[],N=Array.from(g).slice(0,o-t.length);if(N.length===0)return;let y=0;N.forEach(E=>{const T=new FileReader;T.onload=S=>{var C;if(v.push((C=S.target)==null?void 0:C.result),y++,y===N.length){const I=[...t,...v];e(I)}},T.readAsDataURL(E)})},[t,o,e]),u=g=>{g.target.files&&a(g.target.files)},c=x.useCallback(g=>{g.preventDefault(),g.stopPropagation(),l(!1),g.dataTransfer.files&&a(g.dataTransfer.files)},[a]),d=g=>{g.preventDefault(),g.stopPropagation(),l(!0)},f=g=>{g.preventDefault(),g.stopPropagation(),l(!1)},m=g=>{const v=t.filter((N,y)=>y!==g);e(v)},p="multi-image-upload";return h.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[t.map((g,v)=>h.jsxDEV("div",{className:"relative w-full aspect-square bg-[var(--bg-secondary)] rounded-lg overflow-hidden group",children:[h.jsxDEV("img",{src:g,alt:`Uploaded image ${v+1}`,className:"w-full h-full object-contain"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageGridUploader.tsx",lineNumber:69,columnNumber:11},void 0),h.jsxDEV("button",{onClick:()=>m(v),className:"absolute top-2 right-2 z-10 p-1 bg-black/50 backdrop-blur-sm rounded-full text-white hover:bg-red-600 transition-all opacity-0 group-hover:opacity-100","aria-label":`Remove image ${v+1}`,children:h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsxDEV("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageGridUploader.tsx",lineNumber:76,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageGridUploader.tsx",lineNumber:75,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageGridUploader.tsx",lineNumber:70,columnNumber:11},void 0)]},v,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageGridUploader.tsx",lineNumber:68,columnNumber:9},void 0)),t.length<o&&h.jsxDEV("div",{onDrop:c,onDragOver:d,onDragLeave:f,className:`relative w-full aspect-square bg-[var(--bg-secondary)] rounded-lg flex items-center justify-center transition-colors duration-200 border-2 border-dashed border-[var(--border-primary)] ${s?"outline-dashed outline-2 outline-offset-2 outline-[var(--accent-primary)] bg-[rgba(249,115,22,0.1)]":""}`,children:h.jsxDEV("label",{htmlFor:p,className:"flex flex-col items-center justify-center text-[var(--text-tertiary)] cursor-pointer w-full h-full",children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageGridUploader.tsx",lineNumber:93,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageGridUploader.tsx",lineNumber:92,columnNumber:13},void 0),h.jsxDEV("p",{className:"text-sm font-semibold",children:n("imageEditor.upload")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageGridUploader.tsx",lineNumber:95,columnNumber:13},void 0),h.jsxDEV("p",{className:"text-xs text-center px-2",children:`(${t.length}/${o}) ${n("imageEditor.dragAndDrop")}`},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageGridUploader.tsx",lineNumber:96,columnNumber:13},void 0),h.jsxDEV("input",{id:p,type:"file",className:"hidden",onChange:u,accept:"image/*",multiple:!0},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageGridUploader.tsx",lineNumber:97,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageGridUploader.tsx",lineNumber:91,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageGridUploader.tsx",lineNumber:83,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/upload/MultiImageGridUploader.tsx",lineNumber:66,columnNumber:5},void 0)};function pf({onBack:t}){const{t:e}=te(),[o,n]=x.useState("selecting"),[s,l]=x.useState(Zc),[a,u]=x.useState(null),[c,d]=x.useState(null),[f,m]=x.useState(null),[p,g]=x.useState(null),[v,N]=x.useState(null),[y,E]=x.useState(null),[T,S]=x.useState([]),[C,I]=x.useState(null),[P,R]=x.useState({}),[J,A]=x.useState(null),[k,H]=x.useState(""),[z,L]=x.useState(null),[$,re]=x.useState(!1),[Y,U]=x.useState(null),[K,D]=x.useState([]),[w,V]=x.useState(!1),[B,ve]=x.useState(null),ye=x.useCallback(G=>{var q;const b={};(q=G.controls)==null||q.forEach(O=>{b[O.key]=O.defaultValue}),R(b)},[]),fe=x.useCallback(G=>{var b,q;d(G),n("configuring"),L(null),U(null),N(null),H(""),A(((q=(b=G.presets)==null?void 0:b[0])==null?void 0:q.key)||null),ye(G)},[ye]),se=x.useCallback((G,b)=>{m(b),N(null)},[]),we=x.useCallback((G,b)=>{g(b)},[]),pe=x.useCallback(()=>{m(null),N(null)},[]),Ne=x.useCallback(()=>{g(null)},[]),si=x.useCallback((G,b)=>{E(b)},[]),ri=x.useCallback((G,b)=>{I(b)},[]),It=x.useCallback(G=>{var q;let b=G.prompt||"";if(Object.entries(P).forEach(([O,me])=>{b=b.replace(new RegExp(`{{${O}}}`,"g"),String(me))}),b=b.replace(/{{customPrompt}}/g,k||""),G.isPresetBased&&J){const O=(q=G.presets)==null?void 0:q.find(me=>me.key===J);O&&(b=O.prompt+(k?` Additional instructions: ${k}`:""))}return b},[P,k,J]),li=x.useCallback(async()=>{if(c){re(!0),U(null);try{const G=It(c),b=[];if(c.isStoryboard?(y&&b.push({base64:y.split(",")[1],mimeType:y.split(";")[0].split(":")[1]??"image/png"}),T.forEach(q=>{b.push({base64:q.split(",")[1],mimeType:q.split(";")[0].split(":")[1]??"image/png"})}),C&&b.push({base64:C.split(",")[1],mimeType:C.split(";")[0].split(":")[1]??"image/png"})):c.isMultiImage?(f&&b.push({base64:f.split(",")[1],mimeType:f.split(";")[0].split(":")[1]??"image/png"}),p&&b.push({base64:p.split(",")[1],mimeType:p.split(";")[0].split(":")[1]??"image/png"})):c.isPresetBased?f&&b.push({base64:f.split(",")[1],mimeType:f.split(";")[0].split(":")[1]??"image/png"}):f&&b.push({base64:f.split(",")[1],mimeType:f.split(";")[0].split(":")[1]??"image/png"}),b.length===0)throw new Error(e("app.error.uploadAndSelect"));if(c.isTwoStep){const O=(await tt(G,b,null)).imageUrl;if(!O)throw new Error("Step 1 failed");const me=[{base64:O.split(",")[1],mimeType:"image/png"},...p?[{base64:p.split(",")[1],mimeType:p.split(";")[0].split(":")[1]??"image/png"}]:[]],bt={imageUrl:(await tt(c.stepTwoPrompt||"",me,null)).imageUrl||"",secondaryImageUrl:O,originalImageUrl:f,text:G};L(bt),D(ci=>[bt,...ci])}else{const O={imageUrl:(await tt(G,b,c.hasMask?v:null)).imageUrl||"",originalImageUrl:f,text:G};L(O),D(me=>[O,...me])}n("result")}catch(G){console.error("Generation error:",G),U(G instanceof Error?G.message:e("app.error.generic"))}finally{re(!1)}}},[c,It,f,p,y,T,C,v,e]),wt=x.useCallback(G=>{m(G),g(null),N(null),L(null),n("selecting")},[]),At=x.useCallback(()=>{n("selecting"),d(null),u(null)},[]),ai=x.useCallback((G,b)=>{const q=document.createElement("a");q.href=G,q.download=`alpha-studio-${Date.now()}.png`,document.body.appendChild(q),q.click(),document.body.removeChild(q)},[]),ui=x.useCallback(()=>c?c.isStoryboard?!!y&&T.length>0&&!!C:c.isMultiImage?!!f&&(c.isSecondaryOptional||!!p):c.hasCustomPrompt&&!c.isCustomPromptOptional?!!f&&!!k.trim():!!f:!1,[c,f,p,y,T,C,k]),di=()=>{var G;return c?h.jsxDEV("div",{className:"flex flex-col gap-6",children:[h.jsxDEV("div",{className:"flex items-center justify-between gap-3 mb-2",children:[h.jsxDEV("div",{className:"flex items-center gap-3",children:[h.jsxDEV("div",{className:"w-10 h-10 text-[var(--accent-primary)]",dangerouslySetInnerHTML:{__html:c.icon}},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:308,columnNumber:13},this),h.jsxDEV("div",{children:[h.jsxDEV("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:e(c.titleKey)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:313,columnNumber:15},this),c.descriptionKey&&h.jsxDEV("p",{className:"text-sm text-[var(--text-secondary)]",children:e(c.descriptionKey)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:315,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:312,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:307,columnNumber:11},this),h.jsxDEV("button",{onClick:At,className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold text-[var(--accent-primary)] bg-[rgba(249,115,22,0.1)] hover:bg-[rgba(249,115,22,0.2)] border border-[var(--accent-primary)] rounded-lg transition-colors",children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:324,columnNumber:15},this)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:323,columnNumber:13},this),e("transformationSelector.changeTool")]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:319,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:306,columnNumber:9},this),c.isStoryboard&&h.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxDEV(Pe,{title:e(c.backgroundUploaderTitle||"Background"),description:e(c.backgroundUploaderDescription||""),imageUrl:y,onImageSelect:si,onClear:()=>E(null)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:333,columnNumber:13},this),h.jsxDEV("div",{className:"md:col-span-1",children:[h.jsxDEV("h3",{className:"text-sm font-semibold text-[var(--text-primary)] mb-2",children:e(c.characterUploaderTitle||"Characters")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:341,columnNumber:15},this),h.jsxDEV(uf,{imageUrls:T,onImagesChange:S,maxImages:3},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:344,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:340,columnNumber:13},this),h.jsxDEV(Pe,{title:e(c.referenceUploaderTitle||"Style Reference"),description:e(c.referenceUploaderDescription||""),imageUrl:C,onImageSelect:ri,onClear:()=>I(null)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:350,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:332,columnNumber:11},this),c.isMultiImage&&!c.isStoryboard&&(c.hasMask?h.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxDEV("div",{children:[h.jsxDEV("h3",{className:"text-sm font-semibold text-[var(--text-primary)] mb-2",children:e(c.primaryUploaderTitle||"Primary Image")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:365,columnNumber:17},this),h.jsxDEV(ot,{initialImageUrl:f,onImageSelect:se,onMaskChange:N,onClearImage:pe,isMaskToolActive:!0},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:368,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:364,columnNumber:15},this),h.jsxDEV(Pe,{title:e(c.secondaryUploaderTitle||"Secondary Image"),description:e(c.secondaryUploaderDescription||""),imageUrl:p,onImageSelect:we,onClear:Ne},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:376,columnNumber:15},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:363,columnNumber:13},this):h.jsxDEV(af,{primaryImageUrl:f,secondaryImageUrl:p,onPrimarySelect:se,onSecondarySelect:we,onClearPrimary:pe,onClearSecondary:Ne,primaryTitle:e(c.primaryUploaderTitle||""),primaryDescription:e(c.primaryUploaderDescription||""),secondaryTitle:e(c.secondaryUploaderTitle||""),secondaryDescription:e(c.secondaryUploaderDescription||"")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:385,columnNumber:13},this)),!c.isMultiImage&&!c.isStoryboard&&!c.isPresetBased&&h.jsxDEV(ot,{initialImageUrl:f,onImageSelect:se,onMaskChange:N,onClearImage:pe,isMaskToolActive:c.hasMask??!1},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:402,columnNumber:11},this),c.isPresetBased&&h.jsxDEV("div",{className:"space-y-4",children:[h.jsxDEV(ot,{initialImageUrl:f,onImageSelect:se,onMaskChange:N,onClearImage:pe,isMaskToolActive:!1},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:414,columnNumber:13},this),h.jsxDEV("div",{className:"grid grid-cols-5 gap-2",children:(G=c.presets)==null?void 0:G.map(b=>h.jsxDEV("button",{onClick:()=>A(b.key),className:`flex flex-col items-center gap-2 p-3 rounded-xl border-2 transition-all ${J===b.key?"border-[var(--accent-primary)] bg-[rgba(249,115,22,0.1)]":"border-[var(--border-primary)] hover:border-[var(--border-secondary)]"}`,children:[b.referenceImage&&h.jsxDEV("img",{src:b.referenceImage,alt:e(b.labelKey),className:"w-10 h-10 opacity-70"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:433,columnNumber:21},this),h.jsxDEV("span",{className:"text-xs text-center",children:e(b.labelKey)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:435,columnNumber:19},this)]},b.key,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:423,columnNumber:17},this))},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:421,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:413,columnNumber:11},this),c.controls&&c.controls.length>0&&h.jsxDEV("div",{className:"space-y-4 p-4 bg-[var(--bg-secondary)] rounded-xl",children:c.controls.map(b=>h.jsxDEV("div",{className:"space-y-2",children:[h.jsxDEV("div",{className:"flex justify-between text-sm",children:[h.jsxDEV("label",{className:"text-[var(--text-secondary)]",children:e(b.labelKey)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:448,columnNumber:19},this),h.jsxDEV("span",{className:"text-[var(--accent-primary)] font-mono",children:[P[b.key]||b.defaultValue,b.unit]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:449,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:447,columnNumber:17},this),h.jsxDEV("input",{type:"range",min:b.min,max:b.max,value:P[b.key]||b.defaultValue,onChange:q=>R(O=>({...O,[b.key]:Number(q.target.value)})),className:"w-full h-2 bg-[var(--bg-tertiary)] rounded-lg appearance-none cursor-pointer accent-[var(--accent-primary)]"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:453,columnNumber:17},this)]},b.key,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:446,columnNumber:15},this))},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:444,columnNumber:11},this),c.hasCustomPrompt&&h.jsxDEV("div",{className:"space-y-2",children:[h.jsxDEV("label",{className:"text-sm font-medium text-[var(--text-secondary)]",children:[e(c.customPromptLabelKey||"studio.customPrompt"),c.isCustomPromptOptional&&h.jsxDEV("span",{className:"text-[var(--text-tertiary)]",children:[" (",e("common.optional"),")"]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:472,columnNumber:17},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:469,columnNumber:13},this),h.jsxDEV("textarea",{value:k,onChange:b=>H(b.target.value),placeholder:e(c.customPromptPlaceholderKey||""),className:"w-full p-3 bg-[var(--bg-secondary)] border border-[var(--border-primary)] rounded-xl text-[var(--text-primary)] placeholder-[var(--text-tertiary)] focus:border-[var(--accent-primary)] focus:outline-none resize-none",rows:3},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:475,columnNumber:13},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:468,columnNumber:11},this),h.jsxDEV("button",{onClick:li,disabled:!ui()||$,className:"w-full py-4 bg-gradient-to-r from-[var(--accent-primary)] to-[var(--accent-secondary)] text-white font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 transition-opacity shadow-lg",children:$?h.jsxDEV("span",{className:"flex items-center justify-center gap-2",children:[h.jsxDEV(rf,{size:"sm"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:493,columnNumber:15},this),e("studio.generating")]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:492,columnNumber:13},this):e("studio.generate")},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:486,columnNumber:9},this),Y&&h.jsxDEV(lf,{message:Y},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:501,columnNumber:19},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:304,columnNumber:7},this):null};return h.jsxDEV("div",{className:"min-h-screen bg-[var(--bg-primary)] text-[var(--text-primary)]",children:[h.jsxDEV("div",{className:"fixed bottom-6 left-6 z-40 flex gap-2",children:[h.jsxDEV("button",{onClick:t,className:"p-3 bg-[var(--bg-card)] border border-[var(--border-primary)] rounded-full shadow-lg hover:bg-[var(--bg-secondary)] transition-all hover:scale-105",title:e("common.back"),children:h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:516,columnNumber:13},this)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:515,columnNumber:11},this)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:510,columnNumber:9},this),o!=="selecting"&&h.jsxDEV("button",{onClick:At,className:"p-3 bg-[var(--bg-card)] border border-[var(--border-primary)] rounded-full shadow-lg hover:bg-[var(--bg-secondary)] transition-all hover:scale-105",title:e("studio.newTransformation"),children:h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:526,columnNumber:15},this)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:525,columnNumber:13},this)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:520,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:509,columnNumber:7},this),h.jsxDEV("button",{onClick:()=>V(!0),className:"fixed bottom-6 right-6 z-40 p-3 bg-[var(--bg-card)] border border-[var(--border-primary)] rounded-full shadow-lg hover:bg-[var(--bg-secondary)] transition-all hover:scale-105",title:e("history.title"),children:[h.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:539,columnNumber:11},this)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:538,columnNumber:9},this),K.length>0&&h.jsxDEV("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-[var(--accent-primary)] rounded-full text-xs font-bold flex items-center justify-center text-black",children:K.length},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:542,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:533,columnNumber:7},this),h.jsxDEV("main",{className:"min-h-screen",children:[o==="selecting"&&h.jsxDEV(jc,{transformations:s,onSelect:fe,hasPreviousResult:!!z,onOrderChange:l,activeCategory:a,setActiveCategory:u},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:551,columnNumber:11},this),o==="configuring"&&h.jsxDEV("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:di()},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:562,columnNumber:11},this),o==="result"&&z&&h.jsxDEV("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:h.jsxDEV(ef,{content:z,onUseImageAsInput:wt,onImageClick:G=>ve(G)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:569,columnNumber:13},this)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:568,columnNumber:11},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:549,columnNumber:7},this),h.jsxDEV(of,{isOpen:w,onClose:()=>V(!1),history:K,onUseImage:wt,onDownload:ai},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:579,columnNumber:7},this),B&&h.jsxDEV(sf,{imageUrl:B,onClose:()=>ve(null)},void 0,!1,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:589,columnNumber:9},this)]},void 0,!0,{fileName:"D:/Dev/NodeJS/alpha-studio/alpha-studio/src/components/studio/StudioTool.tsx",lineNumber:507,columnNumber:5},this)}export{pf as default};
